<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…­åˆå½©æ•¸æ“šåˆ†æç³»çµ± - é€²éšç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .tab-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .tab-nav {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }

        .tab-button {
            flex: 1;
            padding: 15px 30px;
            background: none;
            border: none;
            font-size: 1.1rem;
            font-weight: 600;
            color: #6c757d;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-button.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .tab-content {
            padding: 30px;
            min-height: 600px;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
        }

        /* çµæœè¡¨æ ¼ */
        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .results-table th,
        .results-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #e9ecef;
        }

        .results-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }

        .results-table tr:hover {
            background-color: #f8f9fa;
        }

        .number-ball {
            display: inline-block;
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            line-height: 35px;
            margin: 2px;
            font-weight: bold;
            text-align: center;
        }

        .extra-number-ball {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
        }

        /* çµ±è¨ˆæ§åˆ¶ */
        .stats-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .range-selection {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
            max-width: 600px;
        }

        .range-title {
            text-align: center;
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }

        .range-inputs {
            display: flex;
            gap: 20px;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .input-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: #666;
        }

        .period-input {
            width: 100px;
            padding: 10px 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .period-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .range-separator {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
            margin: 0 10px;
        }

        .quick-select {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .quick-btn {
            padding: 8px 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .quick-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .apply-btn {
            padding: 12px 30px;
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .apply-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .apply-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .range-info {
            text-align: center;
            font-size: 0.9rem;
            color: #666;
            margin-top: 10px;
        }

        /* çµ±è¨ˆç¶²æ ¼ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .number-stat {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .number-stat:hover {
            transform: translateY(-5px);
            border-color: #667eea;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .stat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            border-bottom: 2px solid #f1f3f4;
            padding-bottom: 10px;
        }

        .stat-number {
            font-size: 1.7rem;
            font-weight: bold;
            color: #333;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .stat-info {
            text-align: right;
        }

        .stat-frequency {
            font-size: 1.2rem;
            color: #333;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .stat-rank {
            font-size: 0.9rem;
            padding: 4px 8px;
            border-radius: 12px;
            color: white;
            font-weight: 600;
        }

        /* å…±ç¾åˆ†æå€åŸŸ */
        .co-occurrence {
            margin-top: 15px;
        }

        .co-occurrence-title {
            font-size: 0.95rem;
            color: #666;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .co-numbers {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .co-number {
            display: inline-flex;
            align-items: center;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 20px;
            padding: 4px 8px;
            font-size: 0.85rem;
            transition: all 0.2s ease;
        }

        .co-number:hover {
            background: #e9ecef;
            border-color: #667eea;
        }

        .co-number-ball {
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
            margin-right: 6px;
        }

        .co-frequency {
            color: #666;
            font-weight: 500;
        }

        /* çµ±è¨ˆé¡è‰²ç­‰ç´š */
        .rank-1 { background: #dc3545; }
        .rank-2 { background: #fd7e14; }
        .rank-3 { background: #ffc107; }
        .rank-4 { background: #20c997; }
        .rank-5 { background: #6f42c1; }
        .rank-6 { background: #e83e8c; }
        .rank-7 { background: #6c757d; }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 1024px) {
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 5px;
                max-width: 100%;
            }

            .header h1 {
                font-size: 2rem;
            }

            .tab-button {
                padding: 12px 15px;
                font-size: 1rem;
            }

            .tab-content {
                padding: 15px 5px;
            }

            .results-table {
                font-size: 0.9rem;
            }

            .results-table th,
            .results-table td {
                padding: 8px 5px;
            }

            .number-ball {
                width: 30px;
                height: 30px;
                line-height: 30px;
                font-size: 0.9rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
                gap: 15px;
                margin: 0;
            }

            .number-stat {
                padding: 25px;
                margin: 0 3px;
                border-radius: 15px;
            }

            .stat-header {
                margin-bottom: 20px;
                padding-bottom: 15px;
            }

            .stat-number {
                width: 40px;
                height: 40px;
                font-size: 1.8rem;
            }

            .stat-info {
                flex: 1;
                margin-left: 15px;
            }

            .stat-frequency {
                font-size: 1.3rem;
                margin-bottom: 8px;
            }

            .stat-rank {
                font-size: 1rem;
                padding: 6px 12px;
            }

            .co-occurrence-title {
                font-size: 1.1rem;
                margin-bottom: 15px;
            }

            .co-numbers {
                gap: 10px;
            }

            .co-number {
                font-size: 1rem;
                padding: 8px 12px;
                border-radius: 25px;
            }

            .co-number-ball {
                width: 24px;
                height: 24px;
                font-size: 0.9rem;
                margin-right: 8px;
            }

            .range-inputs {
                flex-direction: column;
                gap: 15px;
            }

            .quick-select {
                gap: 8px;
            }

            .quick-btn {
                padding: 8px 14px;
                font-size: 0.9rem;
            }

            .apply-btn {
                padding: 10px 25px;
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 2px;
            }

            .tab-content {
                padding: 10px 2px;
            }

            .results-table {
                font-size: 0.8rem;
            }

            .number-ball {
                width: 22px;
                height: 22px;
                line-height: 22px;
                font-size: 0.8rem;
                margin: 1px;
            }

            .stats-grid {
                gap: 12px;
            }

            .number-stat {
                padding: 30px 20px;
                margin: 0 1px;
                border-radius: 18px;
            }

            .stat-header {
                margin-bottom: 25px;
                padding-bottom: 20px;
            }

            .stat-number {
                width: 55px;
                height: 55px;
                font-size: 2rem;
            }

            .stat-frequency {
                font-size: 1.4rem;
                margin-bottom: 10px;
            }

            .stat-rank {
                font-size: 1.1rem;
                padding: 8px 15px;
            }

            .co-occurrence-title {
                font-size: 1.2rem;
                margin-bottom: 18px;
            }

            .co-numbers {
                gap: 12px;
            }

            .co-number {
                font-size: 1.1rem;
                padding: 10px 15px;
                border-radius: 30px;
            }

            .co-number-ball {
                width: 26px;
                height: 26px;
                font-size: 1rem;
                margin-right: 10px;
            }

            .stats-controls {
                padding: 20px 15px;
                margin-bottom: 20px;
            }

            .range-inputs {
                flex-direction: column;
                gap: 12px;
            }

            .period-input {
                width: 120px;
                padding: 12px;
                font-size: 1.1rem;
            }

            .quick-btn {
                padding: 10px 16px;
                font-size: 1rem;
            }

            .apply-btn {
                padding: 14px 28px;
                font-size: 1.1rem;
            }

            /* è™Ÿç¢¼é¸æ“‡éŸ¿æ‡‰å¼ */
            .number-grid {
                grid-template-columns: repeat(5, 1fr);
                gap: 6px;
                max-width: 350px;
            }

            .number-cell {
                width: 40px;
                height: 40px;
                font-size: 0.9rem;
            }

            .selection-controls {
                flex-direction: column;
                gap: 10px;
            }

            .control-btn {
                padding: 12px 20px;
                font-size: 1rem;
            }

            .quick-options {
                gap: 8px;
            }

            .quick-option-btn {
                padding: 10px 14px;
                font-size: 0.9rem;
            }

            .calculation-controls {
                flex-direction: column;
                gap: 15px;
            }

            .calculate-btn, .analysis-btn {
                padding: 14px 30px;
                font-size: 1rem;
            }

            .modal-content {
                margin: 10% auto;
                padding: 20px;
                width: 95%;
            }

            /* è†½è…³æŠ•æ³¨éŸ¿æ‡‰å¼ */
            .betting-mode-tabs {
                max-width: 250px;
            }

            .mode-tab {
                padding: 8px 15px;
                font-size: 0.9rem;
            }

            .banker-selection-status {
                flex-direction: column;
                gap: 10px;
            }

            .section-title {
                font-size: 1rem;
            }

            .banker-section, .runner-section {
                margin-bottom: 20px;
            }
        }

        /* è™Ÿç¢¼é¸æ“‡ä»‹é¢æ¨£å¼ */
        .number-selection-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        /* æŠ•æ³¨æ¨¡å¼åˆ‡æ›æ¨™ç±¤ */
        .betting-mode-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 25px;
            background: #e9ecef;
            border-radius: 25px;
            padding: 5px;
            max-width: 300px;
            margin-left: auto;
            margin-right: auto;
        }

        .mode-tab {
            flex: 1;
            padding: 10px 20px;
            border: none;
            background: transparent;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #6c757d;
        }

        .mode-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
        }

        .mode-tab:hover:not(.active) {
            color: #495057;
            background: rgba(255,255,255,0.5);
        }

        /* æŠ•æ³¨æ¨¡å¼å…§å®¹ */
        .betting-mode-content {
            width: 100%;
        }

        /* è†½è…³æŠ•æ³¨æ¨£å¼ */
        .banker-selection-status {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 25px;
            font-weight: 600;
            color: #333;
        }

        .banker-section, .runner-section {
            margin-bottom: 25px;
        }

        .section-title {
            color: #333;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .banker-grid .number-cell {
            border-color: #dc3545;
        }

        .banker-grid .number-cell:hover {
            border-color: #dc3545;
            background: rgba(220, 53, 69, 0.1);
        }

        .banker-grid .number-cell.selected {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            color: white;
            border-color: #dc3545;
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.4);
        }

        .runner-grid .number-cell {
            border-color: #28a745;
        }

        .runner-grid .number-cell:hover {
            border-color: #28a745;
            background: rgba(40, 167, 69, 0.1);
        }

        .runner-grid .number-cell.selected {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border-color: #28a745;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
        }

        .runner-grid .number-cell.disabled {
            background: #f8f9fa;
            color: #6c757d;
            border-color: #dee2e6;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .selection-status {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
            font-weight: 600;
            color: #333;
        }

        .number-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 20px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .number-cell {
            width: 40px;
            height: 40px;
            border: 2px solid #ddd;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            color: #333;
        }

        .number-cell:hover {
            border-color: #007bff;
            transform: scale(1.05);
        }

        .number-cell.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .selection-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .control-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .reset-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
            color: white;
        }

        .save-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .quick-selection {
            text-align: center;
        }

        .quick-selection h4 {
            color: #666;
            margin-bottom: 15px;
        }

        .quick-options {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .quick-option-btn {
            padding: 8px 16px;
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            border: none;
            border-radius: 20px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quick-option-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(116, 185, 255, 0.4);
        }

        .verification-controls {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .verification-controls .range-selection {
            width: 100%;
            max-width: 600px;
            text-align: center;
        }

        .calculation-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .calculate-btn {
            padding: 15px 35px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 30px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .analysis-btn {
            padding: 15px 35px;
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            border-radius: 30px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .calculate-btn:hover, .analysis-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        /* å½ˆçª—æ¨£å¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #333;
        }

        .close {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: #000;
        }

        .loading {
            text-align: center;
            padding: 14px;
            color: #666;
            font-size: 1.2rem;
        }

        .error {
            text-align: center;
            padding: 50px;
            color: #ff4757;
            font-size: 1.2rem;
        }

        /* æ±Ÿæ©èºæ—‹å››æ–¹åœ–æ¨£å¼ */
        .gann-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .gann-cell {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            border-radius: 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 3px 10px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .gann-cell:hover {
            transform: scale(1.1) translateY(-3px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
            z-index: 10;
        }

        .gann-cell.highlight {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            box-shadow: 0 4px 15px rgba(240, 147, 251, 0.5);
            animation: pulse 2s infinite;
        }

        .gann-cell.highlight:hover {
            transform: scale(1.15) translateY(-3px);
            box-shadow: 0 8px 25px rgba(240, 147, 251, 0.7);
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 4px 15px rgba(240, 147, 251, 0.5);
            }
            50% {
                box-shadow: 0 6px 20px rgba(240, 147, 251, 0.8);
            }
        }

        /* æ±Ÿæ©åœ–æœŸæ•¸é¸æ“‡å™¨æ¨£å¼å¢å¼· */
        #gann-period-select:hover {
            border-color: #764ba2;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }

        #gann-period-select:focus {
            border-color: #764ba2;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .gann-cell {
                width: 45px;
                height: 45px;
                font-size: 14px;
            }
        }

        @media (max-width: 480px) {
            .gann-cell {
                width: 38px;
                height: 38px;
                font-size: 12px;
            }
            
            .gann-grid {
                gap: 5px;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ° å…­åˆå½©æ•¸æ“šåˆ†æç³»çµ± - é€²éšç‰ˆ</h1>
            <p>å°ˆæ¥­å½©ç¥¨æ•¸æ“šåˆ†æèˆ‡çµ±è¨ˆå·¥å…· | åŒ…å«æ•¸å­—å…±ç¾åˆ†æ</p>
        </div>

        <div class="tab-container">
            <div class="tab-nav">
                <button class="tab-button active" onclick="switchTab('results')">é–‹ççµæœ</button>
                <button class="tab-button" onclick="switchTab('statistics')">çµ±è¨ˆåˆ†æ</button>
                <button class="tab-button" onclick="switchTab('verification')">æ ¸å°ä¸­ç</button>
                <button class="tab-button" onclick="switchTab('gann-square')">æ±Ÿæ©èºæ—‹å››æ–¹åœ–</button>
            </div>

            <div class="tab-content">
                <!-- çµæœæ¨™ç±¤é  -->
                <div id="results" class="tab-pane active">
                    <h2>è¿‘æœŸé–‹ççµæœ</h2>
                    <div id="results-content" class="loading">æ­£åœ¨è¼‰å…¥é–‹çæ•¸æ“š...</div>
                </div>

                <!-- çµ±è¨ˆæ¨™ç±¤é  -->
                <div id="statistics" class="tab-pane">
                    <h2>è™Ÿç¢¼çµ±è¨ˆåˆ†æ</h2>
                    <div class="stats-controls">
                        <div class="range-selection">
                            <div class="range-title">ğŸ“Š æœŸæ•¸ç¯„åœé¸æ“‡</div>

                            <div class="range-inputs">
                                <div class="input-group">
                                    <label class="input-label">é–‹å§‹æœŸæ•¸</label>
                                    <input type="number" id="start-period" class="period-input" min="1" max="999" value="1" placeholder="1">
                                </div>

                                <div class="range-separator">è‡³</div>

                                <div class="input-group">
                                    <label class="input-label">çµæŸæœŸæ•¸</label>
                                    <input type="number" id="end-period" class="period-input" min="1" max="999" value="100" placeholder="100">
                                </div>
                            </div>

                            <div class="range-info">
                                <span id="period-count">çµ±è¨ˆæœŸæ•¸ï¼š100æœŸ</span> |
                                <span id="period-range">ç¯„åœï¼šç¬¬1æœŸ è‡³ ç¬¬100æœŸ</span>
                            </div>

                            <div class="quick-select">
                                <button class="quick-btn" onclick="setQuickRange(1, 10)">è¿‘10æœŸ</button>
                                <button class="quick-btn" onclick="setQuickRange(1, 20)">è¿‘20æœŸ</button>
                                <button class="quick-btn" onclick="setQuickRange(1, 30)">è¿‘30æœŸ</button>
                                <button class="quick-btn" onclick="setQuickRange(1, 50)">è¿‘50æœŸ</button>
                                <button class="quick-btn" onclick="setQuickRange(1, 75)">è¿‘75æœŸ</button>
                                <button class="quick-btn" onclick="setQuickRange(1, 100)">è¿‘100æœŸ</button>
                            </div>

                            <button class="apply-btn" onclick="applyRangeSelection()">ğŸ” æ‡‰ç”¨ç¯„åœçµ±è¨ˆ</button>
                            <button class="apply-btn" onclick="filterHighFrequencyNumbers()" style="margin-top: 10px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">ğŸ² ç¯©é¸é«˜é »è™Ÿç¢¼</button>
                        </div>
                        
                        <!-- é«˜é »è™Ÿç¢¼ç¯©é¸çµæœé¡¯ç¤ºå€åŸŸ -->
                        <div id="high-frequency-result" style="margin-top: 20px; display: none;">
                            <div style="display: flex; gap: 20px;">
                                <!-- å·¦å´ï¼šç•¶å‰ç¯©é¸çµæœ -->
                                <div style="flex: 1; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                    <h4 style="color: #333; margin-bottom: 10px;">ğŸ“Š é«˜é »è™Ÿç¢¼ç¯©é¸çµæœ</h4>
                                    <div style="margin-bottom: 15px;">
                                        <strong>ç¯©é¸æ¢ä»¶ï¼š</strong>
                                        <span id="filter-threshold-info" style="color: #667eea;"></span>
                                    </div>
                                    <div style="margin-bottom: 15px; padding: 10px; background: white; border-radius: 5px; border-left: 4px solid #667eea;">
                                        <strong>ç¬¦åˆæ¢ä»¶çš„è™Ÿç¢¼ï¼š</strong>
                                        <span id="filtered-numbers-count" style="color: #667eea; font-weight: bold; margin-left: 5px;"></span>
                                        <div id="filtered-numbers" style="margin-top: 8px; font-size: 16px; color: #333; line-height: 1.8;"></div>
                                    </div>
                                    <div style="margin-bottom: 15px; padding: 10px; background: white; border-radius: 5px; border-left: 4px solid #28a745;">
                                        <strong>ä¸Šä¸€æœŸï¼š</strong>
                                        <div id="previous-period-numbers" style="margin-top: 8px; font-size: 16px; color: #333; line-height: 1.8;"></div>
                                        <div id="probability-info" style="margin-top: 10px; padding: 8px; background: #f0f0f0; border-radius: 4px; font-size: 13px; line-height: 1.6;"></div>
                                    </div>
                                    <div style="padding: 10px; background: white; border-radius: 5px; border-left: 4px solid #764ba2;">
                                        <strong>éš¨æ©ŸæŠ½å– 6 å€‹è™Ÿç¢¼ï¼š</strong>
                                        <div id="random-6-numbers" style="margin-top: 8px; font-size: 18px; font-weight: bold; color: #764ba2;"></div>
                                        <button onclick="refreshRandom6()" style="margin-top: 10px; padding: 5px 15px; background: #764ba2; color: white; border: none; border-radius: 5px; cursor: pointer;">ğŸ”„ é‡æ–°éš¨æ©ŸæŠ½å–</button>
                                    </div>
                                </div>
                                
                                <!-- å³å´ï¼šæ­·å²è¨˜éŒ„ -->
                                <div style="flex: 1; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                        <h4 style="color: #333; margin: 0;">ğŸ“œ ç¯©é¸æ­·å²è¨˜éŒ„</h4>
                                        <button onclick="clearFilterHistory()" style="padding: 3px 10px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">æ¸…é™¤æ­·å²</button>
                                    </div>
                                    <div id="filter-history" style="max-height: 500px; overflow-y: auto;">
                                        <p style="color: #999; text-align: center; padding: 20px;">å°šç„¡ç¯©é¸è¨˜éŒ„</p>
                                    </div>
                                    
                                    <!-- æ­·å²é«˜é »è™Ÿç¢¼ -->
                                    <div style="margin-top: 15px; padding: 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                                        <h4 style="color: white; margin: 0 0 12px 0; font-size: 16px; display: flex; align-items: center;">
                                            <span style="font-size: 20px; margin-right: 8px;">ğŸ”¥</span>
                                            æ­·å²é«˜é »è™Ÿç¢¼
                                        </h4>
                                        <div id="historical-high-frequency" style="min-height: 60px; background: rgba(255,255,255,0.95); border-radius: 6px; padding: 12px; display: flex; flex-wrap: wrap; justify-content: center; align-items: center; gap: 8px;">
                                            <p style="color: #999; text-align: center; margin: 0; width: 100%;">å°šç„¡æ­·å²æ•¸æ“š</p>
                                        </div>
                                        <div style="margin-top: 8px; font-size: 11px; color: rgba(255,255,255,0.8); text-align: center;">
                                            æ ¹æ“šæ­·å²ç¯©é¸è¨˜éŒ„çµ±è¨ˆï¼ŒæŒ‰é »ç‡çµ±è¨ˆæ’åæ’åº
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="stats-content" class="loading">æ­£åœ¨è¼‰å…¥çµ±è¨ˆæ•¸æ“š...</div>
                </div>

                <!-- æ ¸å°ä¸­çæ¨™ç±¤é  -->
                <div id="verification" class="tab-pane">
                    <h2>æ ¸å°ä¸­ç</h2>

                    <!-- æŠ•æ³¨è™Ÿç¢¼é¸æ“‡å€åŸŸ -->
                    <div class="number-selection-container">
                        <h3 style="color: #333; margin-bottom: 20px; text-align: center;">ğŸ¯ æŠ•æ³¨è™Ÿç¢¼é¸æ“‡</h3>

                        <!-- æŠ•æ³¨æ¨¡å¼åˆ‡æ› -->
                        <div class="betting-mode-tabs">
                            <button class="mode-tab active" onclick="switchBettingMode('complex')">è¤‡å¼æŠ•æ³¨</button>
                            <button class="mode-tab" onclick="switchBettingMode('banker')">è†½è…³æŠ•æ³¨</button>
                        </div>

                        <!-- è¤‡å¼æŠ•æ³¨æ¨¡å¼ -->
                        <div id="complex-betting-mode" class="betting-mode-content">
                            <!-- è™Ÿç¢¼é¸æ“‡ç‹€æ…‹ -->
                            <div class="selection-status">
                                <span id="selected-count">å·²é¸æ“‡ï¼š0å€‹è™Ÿç¢¼</span>
                                <span id="combination-count">å¯çµ„åˆï¼š0æ³¨</span>
                            </div>

                            <!-- è™Ÿç¢¼è¡¨æ ¼ -->
                            <div class="number-grid" id="number-grid">
                                <!-- 1-49çš„è™Ÿç¢¼å°‡ç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
                            </div>
                        </div>

                        <!-- è†½è…³æŠ•æ³¨æ¨¡å¼ -->
                        <div id="banker-betting-mode" class="betting-mode-content" style="display: none;">
                            <!-- è†½è…³æŠ•æ³¨ç‹€æ…‹ -->
                            <div class="banker-selection-status">
                                <span id="banker-count">è†½ç¢¼ï¼š0å€‹</span>
                                <span id="runner-count">è…³ç¢¼ï¼š0å€‹</span>
                                <span id="banker-combination-count">ç¸½çµ„åˆï¼š0æ³¨</span>
                            </div>

                            <!-- è†½ç¢¼é¸æ“‡å€ -->
                            <div class="banker-section">
                                <h4 class="section-title">è†½ç¢¼é¸æ“‡ï¼ˆ1-5å€‹è™Ÿç¢¼ï¼‰</h4>
                                <div class="number-grid banker-grid" id="banker-grid">
                                    <!-- 1-49çš„è™Ÿç¢¼å°‡ç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
                                </div>
                            </div>

                            <!-- è…³ç¢¼é¸æ“‡å€ -->
                            <div class="runner-section">
                                <h4 class="section-title">è…³ç¢¼é¸æ“‡ï¼ˆè‡³å°‘1å€‹è™Ÿç¢¼ï¼‰</h4>
                                <div class="number-grid runner-grid" id="runner-grid">
                                    <!-- 1-49çš„è™Ÿç¢¼å°‡ç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
                                </div>
                            </div>
                        </div>

                        <!-- æ§åˆ¶æŒ‰éˆ• -->
                        <div class="selection-controls">
                            <button class="control-btn reset-btn" onclick="resetSelection()">ğŸ”„ é‡ç½®</button>
                            <button class="control-btn save-btn" onclick="saveSelection()">ğŸ’¾ ä¿å­˜é¸æ“‡</button>
                        </div>

                        <!-- å¿«é€Ÿé¸æ“‡é¸é … -->
                        <div class="quick-selection">
                            <h4>å¿«é€Ÿé¸æ“‡é è¨­çµ„åˆï¼š</h4>
                            <div class="quick-options">
                                <button class="quick-option-btn" onclick="loadQuickSelection('hot')">ç†±é–€è™Ÿç¢¼</button>
                                <button class="quick-option-btn" onclick="loadQuickSelection('custom1')">çµ„åˆä¸€</button>
                                <button class="quick-option-btn" onclick="loadQuickSelection('custom2')">çµ„åˆäºŒ</button>
                                <button class="quick-option-btn" onclick="loadQuickSelection('saved')">æˆ‘çš„ä¿å­˜</button>
                            </div>
                        </div>
                    </div>

                    <!-- æœŸæ•¸ç¯„åœé¸æ“‡å€åŸŸ -->
                    <div class="verification-controls">
                        <div class="range-selection">
                            <div class="range-title">ğŸ“Š æœŸæ•¸ç¯„åœé¸æ“‡</div>

                            <div class="range-inputs">
                                <div class="input-group">
                                    <label class="input-label">é–‹å§‹æœŸæ•¸</label>
                                    <input type="number" id="verification-start-period" class="period-input" min="1" max="999" value="1" placeholder="1">
                                </div>

                                <div class="range-separator">è‡³</div>

                                <div class="input-group">
                                    <label class="input-label">çµæŸæœŸæ•¸</label>
                                    <input type="number" id="verification-end-period" class="period-input" min="1" max="999" value="50" placeholder="40">
                                </div>
                            </div>

                            <div class="range-info">
                                <span id="verification-period-count">çµ±è¨ˆæœŸæ•¸ï¼š40æœŸ</span> |
                                <span id="verification-period-range">ç¯„åœï¼šç¬¬1æœŸ è‡³ ç¬¬40æœŸ</span>
                            </div>

                            <div class="quick-select">
                                <button class="quick-btn" onclick="setVerificationQuickRange(1, 10)">è¿‘10æœŸ</button>
                                <button class="quick-btn" onclick="setVerificationQuickRange(1, 20)">è¿‘20æœŸ</button>
                                <button class="quick-btn" onclick="setVerificationQuickRange(1, 30)">è¿‘30æœŸ</button>
                                <button class="quick-btn" onclick="setVerificationQuickRange(1, 40)">è¿‘40æœŸ</button>
                            </div>
                        </div>
                    </div>

                    <!-- è¨ˆç®—æŒ‰éˆ• -->
                    <div class="calculation-controls">
                        <button class="calculate-btn" onclick="calculateComplexWinnings()">ğŸ° æ´¾å½©çé‡‘</button>
                        <button class="analysis-btn" onclick="loadVerification()">ğŸ“Š çµ±è¨ˆåˆ†æ</button>
                    </div>

                    <div id="verification-content" class="loading">æ­£åœ¨è¼‰å…¥çµ±è¨ˆåˆ†ææ•¸æ“š...</div>
                </div>

                <!-- æ±Ÿæ©èºæ—‹å››æ–¹åœ–æ¨™ç±¤é  -->
                <div id="gann-square" class="tab-pane">
                    <h2>æ±Ÿæ©èºæ—‹å››æ–¹åœ–</h2>
                    <div style="text-align: center; margin: 30px auto; max-width: 800px;">
                        <p style="color: #666; margin-bottom: 20px; font-size: 16px;">
                            æ±Ÿæ©èºæ—‹å››æ–¹åœ–æ˜¯ç”±å¨å»‰Â·æ±Ÿæ©ï¼ˆWilliam D. Gannï¼‰å‰µé€ çš„æ•¸å­—æ’åˆ—æ–¹æ³•ã€‚<br>
                            49å€‹è™Ÿç¢¼æŒ‰é †æ™‚é‡æ–¹å‘ç”±å…§å‘å¤–èºæ—‹æ’åˆ—ï¼Œå¾ä¸­å¿ƒçš„01é–‹å§‹ï¼Œå‘å³ã€å‘ä¸‹ã€å‘å·¦ã€å‘ä¸Šä¾æ¬¡å±•é–‹ã€‚
                        </p>
                        
                        <!-- æœŸæ•¸é¸æ“‡å™¨ -->
                        <div style="margin-bottom: 25px; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                            <div style="display: flex; align-items: center; justify-content: center; gap: 15px;">
                                <label style="font-weight: 600; color: #333; font-size: 16px;">ğŸ¯ é¸æ“‡æœŸæ•¸ï¼š</label>
                                <select id="gann-period-select" onchange="updateGannSquareHighlight()" style="padding: 10px 20px; font-size: 16px; border: 2px solid #667eea; border-radius: 8px; background: white; color: #333; cursor: pointer; min-width: 200px; outline: none; transition: all 0.3s ease;">
                                    <option value="">è«‹é¸æ“‡æœŸæ•¸</option>
                                </select>
                            </div>
                            <div id="gann-selected-info" style="margin-top: 15px; padding: 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; color: white; font-size: 14px; display: none;">
                                <div style="font-weight: 600; margin-bottom: 5px;">é–‹çè™Ÿç¢¼ï¼š</div>
                                <div id="gann-selected-numbers" style="display: flex; gap: 8px; justify-content: center; flex-wrap: wrap;"></div>
                            </div>
                        </div>
                        
                        <!-- 7x7 èºæ—‹ç¶²æ ¼ -->
                        <div id="gann-square-grid" style="display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 25px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
                            <!-- å°‡ç”± JavaScript ç”Ÿæˆ -->
                        </div>
                        
                        <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px; text-align: left;">
                            <h3 style="color: #333; margin-bottom: 15px;">ğŸ“– èªªæ˜</h3>
                            <ul style="color: #666; line-height: 1.8;">
                                <li>ä¸­å¿ƒä½ç½®ç‚º <strong>01</strong>ï¼Œä»£è¡¨èµ·å§‹é»</li>
                                <li>æ•¸å­—æŒ‰ç…§ <strong>å³â†’ä¸‹â†’å·¦â†’ä¸Š</strong> çš„é †æ™‚é‡æ–¹å‘èºæ—‹æ’åˆ—</li>
                                <li>æ¯å€‹æ•¸å­—éƒ½æœ‰å…¶ç¨ç‰¹çš„ç©ºé–“ä½ç½®ï¼Œå¯ç”¨æ–¼è™Ÿç¢¼åˆ†æ</li>
                                <li>é¸æ“‡æœŸæ•¸å¾Œï¼Œè©²æœŸé–‹å‡ºçš„è™Ÿç¢¼å°‡ä»¥<strong style="color: #f5576c;">ç²‰ç´…è‰²æ¼¸è®Š</strong>é«˜äº®é¡¯ç¤º</li>
                                <li>æ±Ÿæ©ç†è«–èªç‚ºï¼Œé€™ç¨®æ’åˆ—æ–¹å¼èƒ½æ­ç¤ºæ•¸å­—é–“çš„å…§åœ¨é—œè¯</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ´¾å½©çé‡‘å½ˆçª— -->
    <div id="winnings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">ğŸ° æ´¾å½©çé‡‘è©³æƒ…</h2>
                <span class="close" onclick="closeWinningsModal()">&times;</span>
            </div>
            <div id="winnings-details">
                <!-- çé‡‘è©³æƒ…å°‡ç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€è®Šé‡
        let selectedNumbers = [];
        const maxSelections = 20; // æœ€å¤šé¸æ“‡20å€‹è™Ÿç¢¼

        // è†½è…³æŠ•æ³¨è®Šé‡
        let currentBettingMode = 'complex'; // 'complex' æˆ– 'banker'
        let bankerNumbers = []; // è†½ç¢¼
        let runnerNumbers = []; // è…³ç¢¼
        const maxBankerNumbers = 5; // æœ€å¤š5å€‹è†½ç¢¼

        // é è¨­æŠ•æ³¨çµ„åˆ
        const quickSelections = {
            hot: [3, 7, 11, 13, 20, 21, 22, 23, 24, 27, 30], // ç†±é–€è™Ÿç¢¼
            custom1: [5, 6, 9, 13, 19, 25, 26, 30, 32, 35, 36, 39, 40, 44, 45, 46], // çµ„åˆä¸€
            custom2: [4, 6, 12, 19, 25, 26, 27, 29, 32, 34, 46], // çµ„åˆäºŒ
            saved: [] // ç”¨æˆ¶ä¿å­˜çš„çµ„åˆ
        };

        // åµŒå…¥çœŸå¯¦å…­åˆå½©æ•¸æ“š
        const lotteryData = [
        {draw_number: "25/128", draw_date: "2025-12-11", numbers: [1, 5, 6, 25, 30, 42], extra_number: 43},
        {draw_number: "25/127", draw_date: "2025-12-06", numbers: [4, 6, 26, 28, 34, 40], extra_number: 25},
        {draw_number: "25/126", draw_date: "2025-12-02", numbers: [6, 18, 29, 34, 37, 38], extra_number: 39},
        {draw_number: "25/125", draw_date: "2025-11-25", numbers: [1, 2, 17, 35, 37, 48], extra_number: 8},
        {draw_number: "25/124", draw_date: "2025-11-20", numbers: [19, 26, 33, 35, 36, 39], extra_number: 5},
        {draw_number: "25/123", draw_date: "2025-11-18", numbers: [2, 4, 10, 26, 28, 36], extra_number: 23},
        {draw_number: "25/122", draw_date: "2025-11-16", numbers: [2, 11, 13, 28, 38, 47], extra_number: 7},
        {draw_number: "25/121", draw_date: "2025-11-13", numbers: [10, 11, 28, 30, 37, 39], extra_number: 15},
        {draw_number: "25/120", draw_date: "2025-11-11", numbers: [18, 20, 28, 37, 38, 40], extra_number: 41},
        {draw_number: "25/119", draw_date: "2025-11-08", numbers: [7, 9, 16, 17, 33, 46], extra_number: 49},
        {draw_number: "25/118", draw_date: "2025-11-06", numbers: [10, 17, 22, 33, 40, 41], extra_number: 31},
        {draw_number: "25/117", draw_date: "2025-11-04", numbers: [19, 20, 26, 28, 39, 44], extra_number: 4},
        {draw_number: "25/116", draw_date: "2025-10-28", numbers: [4, 7, 15, 21, 45, 46], extra_number: 24},
        {draw_number: "25/115", draw_date: "2025-10-25", numbers: [6, 7, 27, 36, 39, 43], extra_number: 1},
        {draw_number: "25/114", draw_date: "2025-10-23", numbers: [4, 19, 24, 25, 26, 46], extra_number: 39},
        {draw_number: "25/113", draw_date: "2025-10-21", numbers: [1, 8, 9, 11, 18, 32], extra_number: 13},
        {draw_number: "25/112", draw_date: "2025-10-18", numbers: [5, 13, 17, 18, 31, 44], extra_number: 2},
        {draw_number: "25/111", draw_date: "2025-10-16", numbers: [2, 11, 32, 40, 43, 48], extra_number: 12},
        {draw_number: "25/110", draw_date: "2025-10-14", numbers: [3, 15, 17, 24, 32, 44], extra_number: 20},
        {draw_number: "25/109", draw_date: "2025-10-11", numbers: [5, 6, 18, 19, 30, 39], extra_number: 7},
        {draw_number: "25/108", draw_date: "2025-10-09", numbers: [1, 3, 24, 31, 39, 45], extra_number: 7},
        {draw_number: "25/107", draw_date: "2025-10-06", numbers: [15, 17, 19, 23, 24, 34], extra_number: 33},
        {draw_number: "25/106", draw_date: "2025-09-30", numbers: [13, 21, 33, 41, 44, 46], extra_number: 43},
        {draw_number: "25/105", draw_date: "2025-09-27", numbers: [8, 14, 16, 18, 26, 48], extra_number: 44},
        {draw_number: "25/104", draw_date: "2025-09-25", numbers: [2, 11, 22, 27, 46, 47], extra_number: 32},
        {draw_number: "25/103", draw_date: "2025-09-20", numbers: [8, 13, 17, 24, 36, 43], extra_number: 41},
        {draw_number: "25/102", draw_date: "2025-09-18", numbers: [22, 33, 35, 36, 37, 48], extra_number: 30},
        {draw_number: "25/101", draw_date: "2025-09-16", numbers: [14, 21, 22, 28, 32, 33], extra_number: 25},
        {draw_number: "25/100", draw_date: "2025-09-13", numbers: [15, 21, 23, 37, 47, 49], extra_number: 30},
        {draw_number: "25/099", draw_date: "2025-09-11", numbers: [11, 21, 22, 25, 32, 44], extra_number: 38},
        {draw_number: "25/098", draw_date: "2025-09-09", numbers: [7, 15, 32, 40, 42, 44], extra_number: 9},
        {draw_number: "25/097", draw_date: "2025-09-06", numbers: [6, 19, 22, 23, 34, 43], extra_number: 11},
        {draw_number: "25/096", draw_date: "2025-09-02", numbers: [5, 18, 23, 24, 29, 49], extra_number: 11},
        {draw_number: "25/095", draw_date: "2025-08-30", numbers: [6, 18, 31, 33, 44, 49], extra_number: 2},
        {draw_number: "25/094", draw_date: "2025-08-28", numbers: [5, 36, 39, 44, 48, 49], extra_number: 32},
        {draw_number: "25/093", draw_date: "2025-08-26", numbers: [2, 3, 16, 25, 38, 48], extra_number: 6},
        {draw_number: "25/092", draw_date: "2025-08-23", numbers: [17, 22, 26, 36, 39, 45], extra_number: 14},
        {draw_number: "25/091", draw_date: "2025-08-21", numbers: [6, 8, 10, 23, 32, 45], extra_number: 3},
        {draw_number: "25/090", draw_date: "2025-08-19", numbers: [28, 32, 34, 37, 45, 49], extra_number: 7},
        {draw_number: "25/089", draw_date: "2025-08-16", numbers: [4, 10, 15, 20, 32, 38], extra_number: 26},
        {draw_number: "25/088", draw_date: "2025-08-14", numbers: [1, 13, 25, 27, 31, 34], extra_number: 33},
        {draw_number: "25/087", draw_date: "2025-08-12", numbers: [8, 16, 18, 28, 29, 32], extra_number: 20},
        {draw_number: "25/086", draw_date: "2025-08-09", numbers: [25, 36, 44, 45, 48, 49], extra_number: 13},
        {draw_number: "25/085", draw_date: "2025-08-07", numbers: [3, 7, 25, 29, 37, 39], extra_number: 8},
        {draw_number: "25/084", draw_date: "2025-08-02", numbers: [10, 14, 18, 21, 34, 44], extra_number: 24},
        {draw_number: "25/083", draw_date: "2025-07-31", numbers: [10, 21, 23, 27, 35, 47], extra_number: 39},
        {draw_number: "25/082", draw_date: "2025-07-29", numbers: [9, 11, 17, 28, 35, 43], extra_number: 42},
        {draw_number: "25/081", draw_date: "2025-07-26", numbers: [19, 22, 25, 32, 33, 45], extra_number: 36},
        {draw_number: "25/080", draw_date: "2025-07-21", numbers: [17, 20, 28, 31, 35, 48], extra_number: 32},
        {draw_number: "25/079", draw_date: "2025-07-19", numbers: [6, 25, 29, 40, 48, 49], extra_number: 42},
        {draw_number: "25/078", draw_date: "2025-07-17", numbers: [12, 19, 31, 37, 42, 45], extra_number: 15},
            {draw_number: "25/077", draw_date: "2025-07-15", numbers: [9, 12, 23, 30, 31, 44], extra_number: 5},
            {draw_number: "25/076", draw_date: "2025-07-12", numbers: [5, 17, 20, 24, 27, 35], extra_number: 38},
            {draw_number: "25/075", draw_date: "2025-07-10", numbers: [6, 13, 23, 25, 32, 39], extra_number: 34},
            {draw_number: "25/074", draw_date: "2025-07-08", numbers: [13, 16, 17, 22, 23, 35], extra_number: 41},
            {draw_number: "25/073", draw_date: "2025-07-06", numbers: [5, 9, 22, 33, 46, 47], extra_number: 36},
            {draw_number: "25/072", draw_date: "2025-07-03", numbers: [7, 17, 24, 35, 37, 45], extra_number: 30},
            {draw_number: "25/071", draw_date: "2025-06-29", numbers: [19, 29, 32, 34, 42, 46], extra_number: 20},
            {draw_number: "25/070", draw_date: "2025-06-26", numbers: [9, 11, 23, 24, 29, 49], extra_number: 30},
            {draw_number: "25/069", draw_date: "2025-06-24", numbers: [3, 21, 28, 33, 45, 49], extra_number: 29},
            {draw_number: "25/068", draw_date: "2025-06-21", numbers: [2, 4, 19, 27, 31, 39], extra_number: 13},
            {draw_number: "25/067", draw_date: "2025-06-19", numbers: [7, 12, 13, 18, 34, 35], extra_number: 6},
            {draw_number: "25/066", draw_date: "2025-06-17", numbers: [5, 19, 30, 40, 44, 45], extra_number: 26},
            {draw_number: "25/065", draw_date: "2025-06-12", numbers: [6, 25, 32, 36, 39, 45], extra_number: 13},
            {draw_number: "25/064", draw_date: "2025-06-10", numbers: [9, 13, 35, 40, 45, 46], extra_number: 26},
            {draw_number: "25/063", draw_date: "2025-06-07", numbers: [9, 15, 27, 30, 34, 39], extra_number: 19},
            {draw_number: "25/062", draw_date: "2025-06-05", numbers: [18, 22, 24, 33, 39, 44], extra_number: 3},
            {draw_number: "25/061", draw_date: "2025-06-03", numbers: [1, 2, 13, 15, 41, 46], extra_number: 27},
            {draw_number: "25/060", draw_date: "2025-06-01", numbers: [12, 16, 28, 29, 38, 47], extra_number: 26},
            {draw_number: "25/059", draw_date: "2025-05-29", numbers: [5, 6, 16, 21, 24, 35], extra_number: 33},
            {draw_number: "25/058", draw_date: "2025-05-24", numbers: [6, 14, 15, 19, 45, 47], extra_number: 17},
            {draw_number: "25/057", draw_date: "2025-05-22", numbers: [4, 11, 26, 29, 34, 35], extra_number: 18},
            {draw_number: "25/056", draw_date: "2025-05-20", numbers: [10, 15, 28, 31, 34, 40], extra_number: 48},
            {draw_number: "25/055", draw_date: "2025-05-17", numbers: [12, 22, 27, 29, 32, 34], extra_number: 9},
            {draw_number: "25/054", draw_date: "2025-05-15", numbers: [6, 12, 29, 32, 34, 46], extra_number: 16},
            {draw_number: "25/053", draw_date: "2025-05-13", numbers: [13, 26, 27, 41, 45, 49], extra_number: 46},
            {draw_number: "25/052", draw_date: "2025-05-11", numbers: [19, 26, 28, 29, 46, 49], extra_number: 32},
            {draw_number: "25/051", draw_date: "2025-05-08", numbers: [6, 11, 17, 22, 27, 43], extra_number: 24},
            {draw_number: "25/050", draw_date: "2025-05-06", numbers: [12, 15, 25, 26, 29, 41], extra_number: 42},
            {draw_number: "25/049", draw_date: "2025-05-03", numbers: [18, 20, 30, 35, 47, 49], extra_number: 44},
            {draw_number: "25/048", draw_date: "2025-05-01", numbers: [4, 7, 21, 32, 41, 47], extra_number: 28},
            {draw_number: "25/047", draw_date: "2025-04-29", numbers: [20, 21, 24, 30, 32, 38], extra_number: 47},
            {draw_number: "25/046", draw_date: "2025-04-26", numbers: [11, 15, 18, 21, 29, 40], extra_number: 8},
            {draw_number: "25/045", draw_date: "2025-04-24", numbers: [12, 16, 21, 35, 44, 48], extra_number: 32},
            {draw_number: "25/044", draw_date: "2025-04-22", numbers: [3, 7, 11, 20, 23, 27], extra_number: 29},
            {draw_number: "25/043", draw_date: "2025-04-19", numbers: [1, 11, 24, 37, 45, 49], extra_number: 22},
            {draw_number: "25/042", draw_date: "2025-04-15", numbers: [10, 20, 21, 22, 23, 42], extra_number: 49},
            {draw_number: "25/041", draw_date: "2025-04-12", numbers: [19, 21, 34, 36, 47, 49], extra_number: 14},
            {draw_number: "25/040", draw_date: "2025-04-10", numbers: [11, 22, 23, 26, 32, 35], extra_number: 2},
            {draw_number: "25/039", draw_date: "2025-04-08", numbers: [11, 17, 20, 27, 36, 48], extra_number: 21},
            {draw_number: "25/038", draw_date: "2025-04-05", numbers: [7, 11, 22, 26, 39, 44], extra_number: 8},
            {draw_number: "25/037", draw_date: "2025-04-03", numbers: [2, 4, 7, 29, 32, 40], extra_number: 44},
            {draw_number: "25/036", draw_date: "2025-04-01", numbers: [6, 14, 17, 30, 35, 42], extra_number: 49},
            {draw_number: "25/035", draw_date: "2025-03-29", numbers: [3, 5, 12, 13, 45, 47], extra_number: 46},
            {draw_number: "25/034", draw_date: "2025-03-27", numbers: [10, 19, 35, 44, 47, 49], extra_number: 15},
            {draw_number: "25/033", draw_date: "2025-03-25", numbers: [8, 11, 17, 36, 43, 48], extra_number: 25},
            {draw_number: "25/032", draw_date: "2025-03-22", numbers: [12, 23, 24, 27, 36, 46], extra_number: 43},
            {draw_number: "25/031", draw_date: "2025-03-20", numbers: [16, 20, 21, 24, 39, 43], extra_number: 34},
            {draw_number: "25/030", draw_date: "2025-03-18", numbers: [6, 8, 24, 26, 29, 45], extra_number: 39},
            {draw_number: "25/029", draw_date: "2025-03-16", numbers: [29, 30, 36, 41, 48, 49], extra_number: 14},
            {draw_number: "25/028", draw_date: "2025-03-13", numbers: [4, 16, 19, 21, 26, 29], extra_number: 13},
            {draw_number: "25/027", draw_date: "2025-03-11", numbers: [1, 4, 9, 14, 21, 37], extra_number: 45},
            {draw_number: "25/026", draw_date: "2025-03-08", numbers: [19, 25, 26, 29, 32, 39], extra_number: 4},
            {draw_number: "25/025", draw_date: "2025-03-06", numbers: [4, 11, 19, 20, 30, 39], extra_number: 45},
            {draw_number: "25/024", draw_date: "2025-03-04", numbers: [1, 9, 14, 38, 42, 43], extra_number: 23},
            {draw_number: "25/023", draw_date: "2025-03-01", numbers: [4, 15, 22, 25, 29, 42], extra_number: 1},
            {draw_number: "25/022", draw_date: "2025-02-27", numbers: [7, 11, 15, 17, 25, 28], extra_number: 9},
            {draw_number: "25/021", draw_date: "2025-02-25", numbers: [1, 2, 6, 11, 40, 47], extra_number: 32},
            {draw_number: "25/020", draw_date: "2025-02-22", numbers: [14, 15, 20, 27, 41, 44], extra_number: 33},
            {draw_number: "25/019", draw_date: "2025-02-20", numbers: [13, 20, 22, 27, 41, 44], extra_number: 36},
            {draw_number: "25/018", draw_date: "2025-02-18", numbers: [3, 7, 13, 35, 37, 39], extra_number: 23},
            {draw_number: "25/017", draw_date: "2025-02-15", numbers: [1, 8, 21, 25, 29, 34], extra_number: 4},
            {draw_number: "25/016", draw_date: "2025-02-13", numbers: [5, 26, 29, 32, 42, 45], extra_number: 36},
            {draw_number: "25/015", draw_date: "2025-02-11", numbers: [5, 15, 20, 26, 30, 40], extra_number: 39},
            {draw_number: "25/014", draw_date: "2025-02-08", numbers: [1, 7, 21, 27, 33, 45], extra_number: 17},
            {draw_number: "25/013", draw_date: "2025-02-06", numbers: [1, 4, 18, 25, 38, 45], extra_number: 23},
            {draw_number: "25/012", draw_date: "2025-02-04", numbers: [3, 13, 15, 18, 19, 24], extra_number: 37},
            {draw_number: "25/011", draw_date: "2025-02-02", numbers: [14, 18, 30, 36, 40, 42], extra_number: 1},
            {draw_number: "25/010", draw_date: "2025-01-25", numbers: [7, 14, 19, 31, 36, 45], extra_number: 24},
            {draw_number: "25/009", draw_date: "2025-01-23", numbers: [3, 6, 24, 25, 34, 37], extra_number: 45},
            {draw_number: "25/008", draw_date: "2025-01-21", numbers: [16, 22, 33, 43, 48, 49], extra_number: 8},
            {draw_number: "25/007", draw_date: "2025-01-18", numbers: [3, 4, 6, 12, 18, 32], extra_number: 28},
            {draw_number: "25/006", draw_date: "2025-01-16", numbers: [1, 3, 4, 19, 38, 45], extra_number: 39},
            {draw_number: "25/005", draw_date: "2025-01-14", numbers: [3, 5, 11, 12, 18, 48], extra_number: 6},
            {draw_number: "25/004", draw_date: "2025-01-11", numbers: [8, 15, 26, 27, 30, 35], extra_number: 2},
            {draw_number: "25/003", draw_date: "2025-01-09", numbers: [1, 19, 28, 33, 35, 41], extra_number: 11},
            {draw_number: "25/002", draw_date: "2025-01-07", numbers: [8, 13, 18, 23, 31, 47], extra_number: 16},
            {draw_number: "25/001", draw_date: "2025-01-02", numbers: [9, 23, 42, 44, 45, 46], extra_number: 22},
            {draw_number: "24/140", draw_date: "2024-12-28", numbers: [1, 3, 5, 18, 26, 35], extra_number: 14},
            {draw_number: "24/139", draw_date: "2024-12-24", numbers: [8, 11, 18, 23, 25, 41], extra_number: 45},
            {draw_number: "24/138", draw_date: "2024-12-21", numbers: [14, 20, 21, 22, 23, 30], extra_number: 18},
            {draw_number: "24/137", draw_date: "2024-12-19", numbers: [1, 2, 3, 36, 37, 41], extra_number: 10},
            {draw_number: "24/136", draw_date: "2024-12-17", numbers: [9, 11, 23, 26, 30, 48], extra_number: 28},
            {draw_number: "24/135", draw_date: "2024-12-14", numbers: [1, 16, 18, 36, 37, 46], extra_number: 38},
            {draw_number: "24/134", draw_date: "2024-12-12", numbers: [10, 14, 16, 21, 37, 49], extra_number: 22},
            {draw_number: "24/133", draw_date: "2024-12-10", numbers: [3, 18, 24, 33, 43, 44], extra_number: 4},
            {draw_number: "24/132", draw_date: "2024-12-07", numbers: [1, 15, 18, 33, 34, 39], extra_number: 22},
            {draw_number: "24/131", draw_date: "2024-12-05", numbers: [5, 12, 27, 29, 38, 40], extra_number: 22},
            {draw_number: "24/130", draw_date: "2024-12-03", numbers: [2, 13, 15, 17, 22, 28], extra_number: 23},
            {draw_number: "24/129", draw_date: "2024-11-30", numbers: [10, 14, 23, 24, 33, 41], extra_number: 38},
            {draw_number: "24/128", draw_date: "2024-11-28", numbers: [9, 15, 26, 32, 33, 44], extra_number: 1},
            {draw_number: "24/127", draw_date: "2024-11-26", numbers: [8, 11, 12, 28, 29, 44], extra_number: 34},
            {draw_number: "24/126", draw_date: "2024-11-23", numbers: [1, 2, 7, 14, 15, 25], extra_number: 35},
            {draw_number: "24/125", draw_date: "2024-11-21", numbers: [1, 3, 6, 14, 32, 34], extra_number: 12},
            {draw_number: "24/124", draw_date: "2024-11-19", numbers: [19, 32, 36, 38, 39, 47], extra_number: 29},
            {draw_number: "24/123", draw_date: "2024-11-16", numbers: [1, 3, 7, 19, 31, 38], extra_number: 23},
            {draw_number: "24/122", draw_date: "2024-11-14", numbers: [8, 14, 20, 28, 36, 39], extra_number: 30},
            {draw_number: "24/121", draw_date: "2024-11-12", numbers: [5, 13, 22, 27, 45, 46], extra_number: 7},
            {draw_number: "24/120", draw_date: "2024-11-10", numbers: [3, 20, 24, 27, 30, 42], extra_number: 17},
            {draw_number: "24/119", draw_date: "2024-11-07", numbers: [11, 17, 33, 36, 40, 44], extra_number: 2},
            {draw_number: "24/118", draw_date: "2024-11-05", numbers: [7, 11, 13, 24, 27, 31], extra_number: 35},
            {draw_number: "24/117", draw_date: "2024-11-02", numbers: [14, 16, 25, 40, 41, 45], extra_number: 27},
            {draw_number: "24/116", draw_date: "31/10/2024", numbers: [7, 13, 16, 22, 23, 31], extra_number: 6},
            {draw_number: "24/115", draw_date: "28/10/2024", numbers: [5, 6, 13, 15, 36, 49], extra_number: 23},
            {draw_number: "24/114", draw_date: "22/10/2024", numbers: [13, 21, 28, 30, 41, 49], extra_number: 3},
            {draw_number: "24/113", draw_date: "17/10/2024", numbers: [11, 17, 22, 26, 33, 46], extra_number: 35},
            {draw_number: "24/112", draw_date: "15/10/2024", numbers: [19, 36, 37, 43, 44, 49], extra_number: 8},
            {draw_number: "24/111", draw_date: "12/10/2024", numbers: [4, 8, 9, 19, 20, 48], extra_number: 21},
            {draw_number: "24/110", draw_date: "10/10/2024", numbers: [10, 33, 35, 40, 44, 48], extra_number: 6},
            {draw_number: "24/109", draw_date: "08/10/2024", numbers: [10, 16, 24, 32, 37, 40], extra_number: 19},
            {draw_number: "24/108", draw_date: "02/10/2024", numbers: [8, 15, 21, 32, 43, 47], extra_number: 41},
            {draw_number: "24/107", draw_date: "26/09/2024", numbers: [2, 4, 29, 35, 38, 49], extra_number: 14},
            {draw_number: "24/106", draw_date: "24/09/2024", numbers: [9, 17, 28, 31, 40, 49], extra_number: 25},
            {draw_number: "24/105", draw_date: "21/09/2024", numbers: [2, 3, 14, 25, 27, 36], extra_number: 45},
            {draw_number: "24/104", draw_date: "19/09/2024", numbers: [5, 18, 21, 24, 44, 47], extra_number: 20},
            {draw_number: "24/103", draw_date: "17/09/2024", numbers: [5, 18, 21, 24, 27, 44], extra_number: 10},
            {draw_number: "24/102", draw_date: "12/09/2024", numbers: [14, 18, 20, 25, 32, 43], extra_number: 45},
            {draw_number: "24/101", draw_date: "10/09/2024", numbers: [1, 12, 16, 20, 21, 30], extra_number: 27},
            {draw_number: "24/100", draw_date: "07/09/2024", numbers: [5, 24, 26, 32, 35, 40], extra_number: 16},
            {draw_number: "24/099", draw_date: "03/09/2024", numbers: [2, 3, 7, 25, 46, 48], extra_number: 13},
            {draw_number: "24/098", draw_date: "31/08/2024", numbers: [2, 21, 34, 36, 41, 47], extra_number: 31},
            {draw_number: "24/097", draw_date: "29/08/2024", numbers: [6, 7, 18, 24, 28, 29], extra_number: 1},
            {draw_number: "24/096", draw_date: "27/08/2024", numbers: [2, 15, 23, 33, 34, 39], extra_number: 19},
            {draw_number: "24/095", draw_date: "24/08/2024", numbers: [9, 15, 19, 28, 31, 41], extra_number: 42},
            {draw_number: "24/094", draw_date: "22/08/2024", numbers: [8, 9, 16, 21, 32, 33], extra_number: 34},
            {draw_number: "24/093", draw_date: "20/08/2024", numbers: [1, 4, 16, 26, 39, 49], extra_number: 7},
            {draw_number: "24/092", draw_date: "17/08/2024", numbers: [6, 13, 19, 21, 26, 28], extra_number: 9},
            {draw_number: "24/091", draw_date: "15/08/2024", numbers: [3, 16, 33, 35, 39, 44], extra_number: 8},
            {draw_number: "24/090", draw_date: "13/08/2024", numbers: [7, 9, 20, 21, 30, 35], extra_number: 26},
            {draw_number: "24/089", draw_date: "10/08/2024", numbers: [8, 12, 21, 35, 44, 45], extra_number: 2},
            {draw_number: "24/088", draw_date: "08/08/2024", numbers: [3, 6, 7, 8, 11, 29], extra_number: 49},
            {draw_number: "24/087", draw_date: "06/08/2024", numbers: [3, 4, 7, 13, 27, 41], extra_number: 38},
            {draw_number: "24/086", draw_date: "03/08/2024", numbers: [5, 6, 8, 22, 26, 44], extra_number: 40},
            {draw_number: "24/085", draw_date: "01/08/2024", numbers: [2, 9, 16, 39, 43, 46], extra_number: 20},
            {draw_number: "24/084", draw_date: "30/07/2024", numbers: [6, 7, 17, 20, 21, 25], extra_number: 26},
            {draw_number: "24/083", draw_date: "25/07/2024", numbers: [3, 16, 18, 26, 43, 45], extra_number: 9},
            {draw_number: "24/082", draw_date: "23/07/2024", numbers: [12, 13, 24, 25, 27, 34], extra_number: 4},
            {draw_number: "24/081", draw_date: "20/07/2024", numbers: [17, 18, 31, 33, 39, 41], extra_number: 14},
            {draw_number: "24/080", draw_date: "18/07/2024", numbers: [11, 12, 18, 28, 29, 30], extra_number: 39},
            {draw_number: "24/079", draw_date: "16/07/2024", numbers: [11, 13, 17, 34, 40, 47], extra_number: 21},
            {draw_number: "24/078", draw_date: "13/07/2024", numbers: [17, 21, 24, 27, 29, 48], extra_number: 8},
            {draw_number: "24/077", draw_date: "11/07/2024", numbers: [8, 20, 29, 33, 34, 44], extra_number: 12},
            {draw_number: "24/076", draw_date: "09/07/2024", numbers: [18, 25, 30, 35, 36, 40], extra_number: 44},
            {draw_number: "24/075", draw_date: "07/07/2024", numbers: [1, 2, 17, 27, 34, 41], extra_number: 22},
            {draw_number: "24/074", draw_date: "02/07/2024", numbers: [5, 8, 15, 21, 27, 37], extra_number: 2},
            {draw_number: "24/073", draw_date: "29/06/2024", numbers: [7, 21, 29, 30, 36, 46], extra_number: 42},
            {draw_number: "24/072", draw_date: "27/06/2024", numbers: [2, 17, 24, 30, 32, 40], extra_number: 16},
            {draw_number: "24/071", draw_date: "25/06/2024", numbers: [21, 30, 34, 40, 48, 49], extra_number: 16},
            {draw_number: "24/070", draw_date: "22/06/2024", numbers: [18, 25, 28, 34, 42, 49], extra_number: 14},
            {draw_number: "24/069", draw_date: "20/06/2024", numbers: [14, 21, 26, 27, 42, 46], extra_number: 45},
            {draw_number: "24/068", draw_date: "18/06/2024", numbers: [9, 16, 31, 33, 38, 48], extra_number: 23},
            {draw_number: "24/067", draw_date: "16/06/2024", numbers: [3, 7, 13, 17, 21, 49], extra_number: 4},
            {draw_number: "24/066", draw_date: "13/06/2024", numbers: [1, 5, 15, 19, 25, 39], extra_number: 46},
            {draw_number: "24/065", draw_date: "09/06/2024", numbers: [6, 9, 12, 17, 19, 42], extra_number: 13},
            {draw_number: "24/064", draw_date: "04/06/2024", numbers: [6, 11, 19, 21, 27, 43], extra_number: 44},
            {draw_number: "24/063", draw_date: "01/06/2024", numbers: [6, 18, 28, 33, 36, 48], extra_number: 11},
            {draw_number: "24/062", draw_date: "30/05/2024", numbers: [1, 24, 25, 27, 30, 32], extra_number: 13},
            {draw_number: "24/061", draw_date: "28/05/2024", numbers: [33, 37, 38, 43, 44, 46], extra_number: 32},
            {draw_number: "24/060", draw_date: "25/05/2024", numbers: [7, 26, 30, 37, 46, 49], extra_number: 25},
            {draw_number: "24/059", draw_date: "23/05/2024", numbers: [5, 9, 18, 21, 36, 40], extra_number: 13},
            {draw_number: "24/058", draw_date: "21/05/2024", numbers: [2, 3, 4, 15, 37, 40], extra_number: 8},
            {draw_number: "24/057", draw_date: "18/05/2024", numbers: [8, 17, 19, 27, 33, 45], extra_number: 37},
            {draw_number: "24/056", draw_date: "16/05/2024", numbers: [21, 32, 40, 43, 44, 49], extra_number: 1},
            {draw_number: "24/055", draw_date: "14/05/2024", numbers: [14, 37, 38, 41, 45, 49], extra_number: 5},
            {draw_number: "24/054", draw_date: "12/05/2024", numbers: [3, 9, 25, 30, 36, 41], extra_number: 19},
            {draw_number: "24/053", draw_date: "09/05/2024", numbers: [5, 14, 15, 18, 23, 48], extra_number: 13},
            {draw_number: "24/052", draw_date: "07/05/2024", numbers: [8, 19, 27, 30, 36, 42], extra_number: 2},
            {draw_number: "24/051", draw_date: "04/05/2024", numbers: [1, 3, 7, 21, 28, 30], extra_number: 45},
            {draw_number: "24/050", draw_date: "02/05/2024", numbers: [6, 18, 21, 39, 42, 46], extra_number: 17},
            {draw_number: "24/049", draw_date: "30/04/2024", numbers: [11, 12, 28, 35, 37, 39], extra_number: 30},
            {draw_number: "24/048", draw_date: "27/04/2024", numbers: [9, 18, 28, 40, 47, 48], extra_number: 23},
            {draw_number: "24/047", draw_date: "25/04/2024", numbers: [3, 17, 25, 32, 36, 38], extra_number: 46},
            {draw_number: "24/046", draw_date: "23/04/2024", numbers: [5, 6, 16, 27, 37, 47], extra_number: 24},
            {draw_number: "24/045", draw_date: "21/04/2024", numbers: [7, 8, 10, 12, 17, 27], extra_number: 25},
            {draw_number: "24/044", draw_date: "18/04/2024", numbers: [17, 25, 26, 30, 38, 48], extra_number: 28},
            {draw_number: "24/043", draw_date: "16/04/2024", numbers: [12, 14, 17, 18, 23, 44], extra_number: 27},
            {draw_number: "24/042", draw_date: "13/04/2024", numbers: [6, 10, 12, 14, 17, 41], extra_number: 47},
            {draw_number: "24/041", draw_date: "11/04/2024", numbers: [2, 7, 9, 13, 33, 35], extra_number: 49},
            {draw_number: "24/040", draw_date: "09/04/2024", numbers: [13, 20, 29, 30, 34, 48], extra_number: 3},
            {draw_number: "24/039", draw_date: "06/04/2024", numbers: [15, 16, 17, 30, 34, 35], extra_number: 25},
            {draw_number: "24/038", draw_date: "04/04/2024", numbers: [4, 8, 12, 22, 24, 26], extra_number: 1},
            {draw_number: "24/037", draw_date: "02/04/2024", numbers: [16, 25, 31, 42, 43, 44], extra_number: 7},
            {draw_number: "24/036", draw_date: "30/03/2024", numbers: [2, 6, 18, 22, 36, 39], extra_number: 21},
            {draw_number: "24/035", draw_date: "28/03/2024", numbers: [2, 9, 15, 20, 39, 48], extra_number: 43},
            {draw_number: "24/034", draw_date: "26/03/2024", numbers: [6, 11, 12, 18, 24, 42], extra_number: 38},
            {draw_number: "24/033", draw_date: "23/03/2024", numbers: [11, 18, 24, 35, 42, 46], extra_number: 3},
            {draw_number: "24/032", draw_date: "21/03/2024", numbers: [6, 19, 20, 34, 39, 42], extra_number: 44},
            {draw_number: "24/031", draw_date: "19/03/2024", numbers: [7, 8, 29, 30, 36, 48], extra_number: 28},
            {draw_number: "24/030", draw_date: "17/03/2024", numbers: [1, 8, 13, 23, 40, 44], extra_number: 15},
            {draw_number: "24/029", draw_date: "14/03/2024", numbers: [6, 23, 24, 31, 34, 49], extra_number: 1},
            {draw_number: "24/028", draw_date: "12/03/2024", numbers: [13, 16, 18, 24, 32, 43], extra_number: 44},
            {draw_number: "24/027", draw_date: "09/03/2024", numbers: [4, 5, 8, 21, 32, 42], extra_number: 45},
            {draw_number: "24/026", draw_date: "07/03/2024", numbers: [5, 22, 30, 31, 32, 39], extra_number: 44},
            {draw_number: "24/025", draw_date: "05/03/2024", numbers: [11, 24, 34, 36, 39, 42], extra_number: 38},
            {draw_number: "24/024", draw_date: "02/03/2024", numbers: [7, 23, 31, 35, 43, 46], extra_number: 10},
            {draw_number: "24/023", draw_date: "29/02/2024", numbers: [5, 13, 16, 36, 39, 41], extra_number: 38},
            {draw_number: "24/022", draw_date: "27/02/2024", numbers: [3, 11, 12, 22, 24, 26], extra_number: 21},
            {draw_number: "24/021", draw_date: "24/02/2024", numbers: [2, 7, 24, 29, 30, 36], extra_number: 6},
            {draw_number: "24/020", draw_date: "22/02/2024", numbers: [22, 25, 33, 34, 35, 39], extra_number: 5},
            {draw_number: "24/019", draw_date: "20/02/2024", numbers: [10, 26, 27, 29, 30, 45], extra_number: 37},
            {draw_number: "24/018", draw_date: "17/02/2024", numbers: [9, 23, 26, 27, 36, 41], extra_number: 24},
            {draw_number: "24/017", draw_date: "14/02/2024", numbers: [10, 12, 13, 24, 25, 48], extra_number: 15},
            {draw_number: "24/016", draw_date: "08/02/2024", numbers: [5, 7, 9, 20, 22, 25], extra_number: 13},
            {draw_number: "24/015", draw_date: "06/02/2024", numbers: [15, 18, 19, 38, 41, 49], extra_number: 22},
            {draw_number: "24/014", draw_date: "03/02/2024", numbers: [3, 7, 21, 32, 36, 47], extra_number: 23},
            {draw_number: "24/013", draw_date: "01/02/2024", numbers: [4, 12, 15, 23, 24, 31], extra_number: 43},
            {draw_number: "24-012", draw_date: "30/01/2024", numbers: [8, 20, 21, 29, 30, 49], extra_number: 32},
            {draw_number: "24-011", draw_date: "27/01/2024", numbers: [1, 8, 13, 19, 34, 47], extra_number: 12},
            {draw_number: "24-010", draw_date: "25/01/2024", numbers: [2, 5, 15, 32, 45, 49], extra_number: 19},
            {draw_number: "24-009", draw_date: "23/01/2024", numbers: [2, 6, 7, 14, 30, 43], extra_number: 15},
            {draw_number: "24-008", draw_date: "20/01/2024", numbers: [3, 25, 31, 40, 43, 48], extra_number: 45},
            {draw_number: "24-007", draw_date: "18/01/2024", numbers: [2, 10, 17, 46, 47, 49], extra_number: 3},
            {draw_number: "24-006", draw_date: "16/01/2024", numbers: [1, 6, 8, 27, 41, 47], extra_number: 29},
            {draw_number: "24-005", draw_date: "14/01/2024", numbers: [3, 17, 18, 36, 38, 39], extra_number: 21},
            {draw_number: "24-004", draw_date: "11/01/2024", numbers: [3, 6, 8, 26, 29, 38], extra_number: 1},
            {draw_number: "24-003", draw_date: "09/01/2024", numbers: [3, 9, 16, 19, 33, 35], extra_number: 39},
            {draw_number: "24-002", draw_date: "06/01/2024", numbers: [1, 4, 24, 31, 33, 34], extra_number: 2},
            {draw_number: "24-001", draw_date: "03/01/2024", numbers: [2, 3, 19, 34, 37, 46], extra_number: 32},
            {draw_number: "23/146", draw_date: "30/12/2023", numbers: [5, 8, 19, 25, 41, 48], extra_number: 24},
            {draw_number: "23/145", draw_date: "28/12/2023", numbers: [11, 18, 27, 29, 34, 45], extra_number: 28},
            {draw_number: "23/144", draw_date: "24/12/2023", numbers: [2, 8, 16, 19, 37, 49], extra_number: 20},
            {draw_number: "23/143", draw_date: "21/12/2023", numbers: [1, 10, 12, 33, 46, 49], extra_number: 32},
            {draw_number: "23/142", draw_date: "19/12/2023", numbers: [4, 9, 13, 33, 35, 46], extra_number: 6},
            {draw_number: "23/141", draw_date: "14/12/2023", numbers: [3, 4, 11, 37, 44, 48], extra_number: 36},
            {draw_number: "23/140", draw_date: "12/12/2023", numbers: [3, 10, 20, 24, 27, 42], extra_number: 45},
            {draw_number: "23/139", draw_date: "09/12/2023", numbers: [2, 3, 4, 31, 46, 49], extra_number: 34},
            {draw_number: "23/138", draw_date: "07/12/2023", numbers: [27, 28, 37, 38, 43, 45], extra_number: 40},
            {draw_number: "23/137", draw_date: "05/12/2023", numbers: [9, 16, 23, 38, 39, 41], extra_number: 19},
            {draw_number: "23/136", draw_date: "02/12/2023", numbers: [3, 17, 30, 36, 38, 45], extra_number: 8},
            {draw_number: "23/135", draw_date: "30/11/2023", numbers: [7, 12, 32, 34, 36, 39], extra_number: 5},
            {draw_number: "23/134", draw_date: "28/11/2023", numbers: [3, 14, 20, 30, 38, 42], extra_number: 13},
            {draw_number: "23/133", draw_date: "25/11/2023", numbers: [2, 8, 12, 28, 34, 47], extra_number: 7},
            {draw_number: "23/132", draw_date: "23/11/2023", numbers: [11, 16, 24, 27, 28, 32], extra_number: 48},
            {draw_number: "23/131", draw_date: "21/11/2023", numbers: [9, 11, 15, 17, 19, 44], extra_number: 7},
            {draw_number: "23/130", draw_date: "18/11/2023", numbers: [6, 25, 29, 30, 34, 35], extra_number: 20},
            {draw_number: "23/129", draw_date: "16/11/2023", numbers: [3, 5, 8, 16, 26, 33], extra_number: 24},
            {draw_number: "23/128", draw_date: "14/11/2023", numbers: [2, 15, 27, 36, 37, 48], extra_number: 23},
            {draw_number: "23/127", draw_date: "12/11/2023", numbers: [19, 26, 32, 34, 37, 44], extra_number: 11},
            {draw_number: "23/126", draw_date: "09/11/2023", numbers: [1, 4, 18, 25, 30, 49], extra_number: 15},
            {draw_number: "23/125", draw_date: "07/11/2023", numbers: [7, 16, 26, 31, 47, 49], extra_number: 44},
            {draw_number: "23/124", draw_date: "04/11/2023", numbers: [2, 13, 16, 28, 40, 44], extra_number: 46},
            {draw_number: "23/123", draw_date: "02/11/2023", numbers: [3, 14, 32, 37, 43, 47], extra_number: 26},
            {draw_number: "23/122", draw_date: "31/10/2023", numbers: [4, 33, 35, 36, 41, 49], extra_number: 1},
            {draw_number: "23/121", draw_date: "26/10/2023", numbers: [11, 16, 27, 32, 33, 37], extra_number: 24},
            {draw_number: "23/120", draw_date: "24/10/2023", numbers: [19, 20, 29, 45, 48, 49], extra_number: 8},
            {draw_number: "23/119", draw_date: "21/10/2023", numbers: [6, 8, 12, 31, 32, 46], extra_number: 4},
            {draw_number: "23/118", draw_date: "19/10/2023", numbers: [1, 13, 18, 32, 34, 49], extra_number: 44},
            {draw_number: "23/117", draw_date: "17/10/2023", numbers: [8, 18, 24, 34, 41, 42], extra_number: 31},
            {draw_number: "23/116", draw_date: "14/10/2023", numbers: [1, 29, 31, 42, 47, 48], extra_number: 40},
            {draw_number: "23/115", draw_date: "12/10/2023", numbers: [2, 13, 23, 28, 30, 31], extra_number: 3},
            {draw_number: "23/114", draw_date: "10/10/2023", numbers: [1, 12, 22, 23, 34, 39], extra_number: 30},
            {draw_number: "23/113", draw_date: "07/10/2023", numbers: [4, 9, 12, 36, 43, 47], extra_number: 26},
            {draw_number: "23/112", draw_date: "05/10/2023", numbers: [2, 11, 20, 29, 41, 49], extra_number: 45},
            {draw_number: "23/111", draw_date: "03/10/2023", numbers: [8, 16, 32, 39, 40, 43], extra_number: 29},
            {draw_number: "23/110", draw_date: "30/09/2023", numbers: [6, 8, 11, 26, 35, 47], extra_number: 1},
            {draw_number: "23/109", draw_date: "28/09/2023", numbers: [9, 12, 30, 31, 45, 48], extra_number: 46},
            {draw_number: "23/108", draw_date: "23/09/2023", numbers: [3, 27, 28, 35, 44, 46], extra_number: 12},
            {draw_number: "23/107", draw_date: "21/09/2023", numbers: [1, 10, 22, 28, 33, 46], extra_number: 37},
            {draw_number: "23/106", draw_date: "19/09/2023", numbers: [8, 9, 10, 27, 35, 38], extra_number: 46},
            {draw_number: "23/105", draw_date: "16/09/2023", numbers: [10, 24, 34, 40, 41, 45], extra_number: 35},
            {draw_number: "23/104", draw_date: "14/09/2023", numbers: [17, 27, 30, 31, 32, 38], extra_number: 11},
            {draw_number: "23/103", draw_date: "12/09/2023", numbers: [4, 10, 12, 16, 30, 32], extra_number: 14},
            {draw_number: "23/102", draw_date: "09/09/2023", numbers: [4, 6, 19, 32, 39, 42], extra_number: 34},
            {draw_number: "23/101", draw_date: "07/09/2023", numbers: [20, 22, 24, 25, 29, 49], extra_number: 36},
            {draw_number: "23/100", draw_date: "05/09/2023", numbers: [2, 5, 20, 24, 27, 32], extra_number: 12},
            {draw_number: "23/099", draw_date: "03/09/2023", numbers: [15, 20, 25, 39, 45, 48], extra_number: 28},
            {draw_number: "23/098", draw_date: "31/08/2023", numbers: [10, 15, 17, 21, 40, 44], extra_number: 12},
            {draw_number: "23/097", draw_date: "29/08/2023", numbers: [3, 6, 7, 33, 36, 46], extra_number: 4},
            {draw_number: "23/096", draw_date: "26/08/2023", numbers: [16, 26, 31, 35, 39, 46], extra_number: 3},
            {draw_number: "23/095", draw_date: "24/08/2023", numbers: [6, 18, 29, 31, 44, 46], extra_number: 8},
            {draw_number: "23/094", draw_date: "22/08/2023", numbers: [1, 5, 7, 12, 48, 49], extra_number: 16},
            {draw_number: "23/093", draw_date: "19/08/2023", numbers: [8, 14, 18, 20, 23, 25], extra_number: 44},
            {draw_number: "23/092", draw_date: "17/08/2023", numbers: [3, 9, 15, 18, 21, 37], extra_number: 42},
            {draw_number: "23/091", draw_date: "15/08/2023", numbers: [4, 12, 17, 37, 38, 39], extra_number: 41},
            {draw_number: "23/090", draw_date: "12/08/2023", numbers: [3, 12, 13, 17, 24, 36], extra_number: 16},
            {draw_number: "23/089", draw_date: "10/08/2023", numbers: [2, 3, 4, 13, 18, 42], extra_number: 12},
            {draw_number: "23/088", draw_date: "08/08/2023", numbers: [4, 7, 18, 28, 30, 40], extra_number: 29},
            {draw_number: "23/087", draw_date: "05/08/2023", numbers: [2, 8, 24, 39, 41, 44], extra_number: 40},
            {draw_number: "23/086", draw_date: "03/08/2023", numbers: [3, 14, 23, 30, 33, 44], extra_number: 21},
            {draw_number: "23/085", draw_date: "01/08/2023", numbers: [2, 7, 25, 28, 31, 35], extra_number: 11},
            {draw_number: "23/084", draw_date: "29/07/2023", numbers: [13, 23, 26, 40, 41, 43], extra_number: 14},
            {draw_number: "23/083", draw_date: "27/07/2023", numbers: [13, 15, 17, 18, 20, 43], extra_number: 39},
            {draw_number: "23/082", draw_date: "25/07/2023", numbers: [1, 2, 10, 13, 29, 47], extra_number: 9},
            {draw_number: "23/081", draw_date: "20/07/2023", numbers: [4, 16, 18, 34, 35, 46], extra_number: 47},
            {draw_number: "23/080", draw_date: "18/07/2023", numbers: [15, 16, 34, 36, 39, 40], extra_number: 42},
            {draw_number: "23/079", draw_date: "15/07/2023", numbers: [4, 9, 12, 33, 37, 42], extra_number: 3},
            {draw_number: "23/078", draw_date: "13/07/2023", numbers: [3, 8, 11, 23, 36, 38], extra_number: 33},
            {draw_number: "23/077", draw_date: "11/07/2023", numbers: [7, 19, 22, 27, 40, 47], extra_number: 13},
            {draw_number: "23/076", draw_date: "08/07/2023", numbers: [1, 11, 22, 26, 38, 39], extra_number: 27},
            {draw_number: "23/075", draw_date: "04/07/2023", numbers: [5, 15, 20, 29, 32, 37], extra_number: 18},
            {draw_number: "23/074", draw_date: "02/07/2023", numbers: [3, 6, 25, 29, 35, 42], extra_number: 36},
            {draw_number: "23/073", draw_date: "29/06/2023", numbers: [6, 10, 18, 21, 22, 33], extra_number: 4},
            {draw_number: "23/072", draw_date: "27/06/2023", numbers: [7, 10, 16, 18, 29, 45], extra_number: 1},
            {draw_number: "23/071", draw_date: "24/06/2023", numbers: [1, 11, 14, 16, 26, 36], extra_number: 39},
            {draw_number: "23/070", draw_date: "22/06/2023", numbers: [14, 15, 24, 30, 37, 39], extra_number: 26},
            {draw_number: "23/069", draw_date: "20/06/2023", numbers: [8, 18, 31, 34, 35, 47], extra_number: 39},
            {draw_number: "23/068", draw_date: "17/06/2023", numbers: [18, 22, 31, 35, 44, 48], extra_number: 6},
            {draw_number: "23/067", draw_date: "15/06/2023", numbers: [5, 13, 17, 20, 33, 38], extra_number: 14},
            {draw_number: "23/066", draw_date: "13/06/2023", numbers: [14, 16, 22, 26, 36, 42], extra_number: 19},
            {draw_number: "23/065", draw_date: "11/06/2023", numbers: [14, 16, 18, 22, 30, 47], extra_number: 11},
            {draw_number: "23/064", draw_date: "08/06/2023", numbers: [4, 22, 24, 28, 45, 46], extra_number: 7},
            {draw_number: "23/063", draw_date: "06/06/2023", numbers: [6, 12, 34, 42, 45, 48], extra_number: 2},
            {draw_number: "23/062", draw_date: "03/06/2023", numbers: [2, 16, 24, 25, 47, 48], extra_number: 40},
            {draw_number: "23/061", draw_date: "01/06/2023", numbers: [14, 30, 32, 42, 45, 47], extra_number: 4},
            {draw_number: "23/060", draw_date: "30/05/2023", numbers: [3, 9, 15, 30, 32, 41], extra_number: 26},
            {draw_number: "23/059", draw_date: "27/05/2023", numbers: [11, 20, 21, 22, 27, 32], extra_number: 12},
            {draw_number: "23/058", draw_date: "25/05/2023", numbers: [3, 14, 18, 26, 40, 43], extra_number: 15},
            {draw_number: "23/057", draw_date: "23/05/2023", numbers: [4, 14, 15, 37, 41, 49], extra_number: 38},
            {draw_number: "23/056", draw_date: "20/05/2023", numbers: [1, 19, 22, 26, 46, 47], extra_number: 39},
            {draw_number: "23/055", draw_date: "18/05/2023", numbers: [5, 6, 12, 16, 41, 47], extra_number: 7},
            {draw_number: "23/054", draw_date: "16/05/2023", numbers: [2, 18, 27, 31, 32, 46], extra_number: 44},
            {draw_number: "23/053", draw_date: "14/05/2023", numbers: [1, 4, 9, 35, 37, 48], extra_number: 43},
            {draw_number: "23/052", draw_date: "11/05/2023", numbers: [17, 18, 28, 30, 32, 33], extra_number: 1},
            {draw_number: "23/051", draw_date: "09/05/2023", numbers: [7, 10, 22, 25, 32, 35], extra_number: 27},
            {draw_number: "23/050", draw_date: "06/05/2023", numbers: [1, 5, 14, 15, 21, 25], extra_number: 31},
            {draw_number: "23/049", draw_date: "04/05/2023", numbers: [2, 10, 28, 37, 47, 49], extra_number: 7},
            {draw_number: "23/048", draw_date: "02/05/2023", numbers: [4, 10, 20, 32, 38, 49], extra_number: 7},
            {draw_number: "23/047", draw_date: "29/04/2023", numbers: [7, 8, 17, 19, 27, 40], extra_number: 2},
            {draw_number: "23/046", draw_date: "27/04/2023", numbers: [8, 12, 21, 43, 44, 49], extra_number: 27},
            {draw_number: "23/045", draw_date: "25/04/2023", numbers: [20, 26, 38, 43, 46, 47], extra_number: 35},
            {draw_number: "23/044", draw_date: "22/04/2023", numbers: [2, 6, 7, 9, 17, 19], extra_number: 26},
            {draw_number: "23/043", draw_date: "20/04/2023", numbers: [1, 20, 24, 28, 38, 46], extra_number: 40},
            {draw_number: "23/042", draw_date: "18/04/2023", numbers: [20, 23, 27, 28, 30, 46], extra_number: 29},
            {draw_number: "23/041", draw_date: "16/04/2023", numbers: [10, 12, 18, 20, 23, 36], extra_number: 6},
            {draw_number: "23/040", draw_date: "13/04/2023", numbers: [9, 14, 15, 32, 36, 48], extra_number: 25},
            {draw_number: "23/039", draw_date: "11/04/2023", numbers: [12, 23, 29, 40, 42, 43], extra_number: 20},
            {draw_number: "23/038", draw_date: "08/04/2023", numbers: [1, 13, 17, 18, 33, 36], extra_number: 22},
            {draw_number: "23/037", draw_date: "04/04/2023", numbers: [15, 19, 20, 24, 36, 47], extra_number: 4},
            {draw_number: "23/036", draw_date: "01/04/2023", numbers: [8, 9, 12, 19, 21, 40], extra_number: 24},
            {draw_number: "23/035", draw_date: "30/03/2023", numbers: [1, 8, 12, 36, 42, 47], extra_number: 40},
            {draw_number: "23/034", draw_date: "28/03/2023", numbers: [9, 10, 16, 41, 44, 46], extra_number: 39},
            {draw_number: "23/033", draw_date: "25/03/2023", numbers: [11, 15, 18, 26, 31, 37], extra_number: 10},
            {draw_number: "23/032", draw_date: "23/03/2023", numbers: [5, 14, 17, 20, 22, 32], extra_number: 33},
            {draw_number: "23/031", draw_date: "21/03/2023", numbers: [8, 13, 18, 30, 33, 41], extra_number: 20},
            {draw_number: "23/030", draw_date: "18/03/2023", numbers: [4, 7, 17, 34, 42, 48], extra_number: 3},
            {draw_number: "23/029", draw_date: "16/03/2023", numbers: [18, 21, 28, 30, 34, 40], extra_number: 14},
            {draw_number: "23/028", draw_date: "14/03/2023", numbers: [1, 2, 10, 12, 18, 37], extra_number: 43},
            {draw_number: "23/027", draw_date: "12/03/2023", numbers: [11, 12, 13, 20, 35, 43], extra_number: 44},
            {draw_number: "23/026", draw_date: "09/03/2023", numbers: [1, 4, 7, 14, 31, 37], extra_number: 11},
            {draw_number: "23/025", draw_date: "07/03/2023", numbers: [4, 11, 12, 26, 37, 40], extra_number: 7},
            {draw_number: "23/024", draw_date: "04/03/2023", numbers: [1, 9, 15, 26, 42, 44], extra_number: 25},
            {draw_number: "23/023", draw_date: "02/03/2023", numbers: [14, 17, 19, 32, 39, 46], extra_number: 36},
            {draw_number: "23/022", draw_date: "28/02/2023", numbers: [8, 13, 29, 33, 40, 42], extra_number: 3},
            {draw_number: "23/021", draw_date: "25/02/2023", numbers: [14, 25, 27, 28, 44, 47], extra_number: 4},
            {draw_number: "23/020", draw_date: "23/02/2023", numbers: [8, 16, 32, 42, 47, 48], extra_number: 35},
            {draw_number: "23/019", draw_date: "21/02/2023", numbers: [8, 19, 29, 30, 33, 41], extra_number: 4},
            {draw_number: "23/018", draw_date: "18/02/2023", numbers: [4, 12, 20, 28, 34, 49], extra_number: 43},
            {draw_number: "23/017", draw_date: "16/02/2023", numbers: [8, 9, 13, 22, 38, 39], extra_number: 11},
            {draw_number: "23/016", draw_date: "14/02/2023", numbers: [3, 13, 19, 32, 33, 39], extra_number: 24},
            {draw_number: "23/015", draw_date: "11/02/2023", numbers: [13, 18, 22, 29, 34, 41], extra_number: 23},
            {draw_number: "23/014", draw_date: "09/02/2023", numbers: [1, 9, 13, 27, 29, 40], extra_number: 20},
            {draw_number: "23/013", draw_date: "07/02/2023", numbers: [4, 11, 13, 14, 30, 37], extra_number: 20},
            {draw_number: "23/012", draw_date: "04/02/2023", numbers: [14, 18, 25, 29, 31, 42], extra_number: 6},
            {draw_number: "23/011", draw_date: "02/02/2023", numbers: [2, 8, 23, 33, 34, 35], extra_number: 43},
            {draw_number: "23/010", draw_date: "28/01/2023", numbers: [2, 12, 16, 38, 45, 46], extra_number: 14},
            {draw_number: "23/009", draw_date: "26/01/2023", numbers: [2, 3, 23, 31, 32, 43], extra_number: 40},
            {draw_number: "23/008", draw_date: "19/01/2023", numbers: [17, 25, 27, 29, 36, 49], extra_number: 23},
            {draw_number: "23/007", draw_date: "17/01/2023", numbers: [10, 15, 29, 34, 38, 47], extra_number: 18},
            {draw_number: "23/006", draw_date: "14/01/2023", numbers: [3, 5, 16, 26, 35, 38], extra_number: 9},
            {draw_number: "23/005", draw_date: "12/01/2023", numbers: [6, 22, 26, 27, 40, 45], extra_number: 13},
            {draw_number: "23/004", draw_date: "10/01/2023", numbers: [2, 21, 24, 29, 35, 47], extra_number: 18},
            {draw_number: "23/003", draw_date: "07/01/2023", numbers: [10, 31, 33, 34, 43, 49], extra_number: 40},
            {draw_number: "23/002", draw_date: "05/01/2023", numbers: [5, 9, 19, 34, 36, 49], extra_number: 23},
            {draw_number: "23/001", draw_date: "03/01/2023", numbers: [7, 20, 25, 27, 35, 43], extra_number: 1},
            {draw_number: "22/111", draw_date: "29/12/2022", numbers: [1, 2, 21, 33, 41, 45], extra_number: 4},
            {draw_number: "22/110", draw_date: "27/12/2022", numbers: [5, 13, 18, 32, 39, 45], extra_number: 44},
            {draw_number: "22/109", draw_date: "25/12/2022", numbers: [2, 7, 11, 14, 18, 39], extra_number: 29},
            {draw_number: "22/108", draw_date: "22/12/2022", numbers: [16, 18, 19, 33, 41, 46], extra_number: 37},
            {draw_number: "22/107", draw_date: "20/12/2022", numbers: [28, 36, 37, 38, 41, 45], extra_number: 42},
            {draw_number: "22/106", draw_date: "17/12/2022", numbers: [6, 14, 15, 26, 35, 40], extra_number: 8},
            {draw_number: "22/105", draw_date: "15/12/2022", numbers: [5, 7, 18, 26, 31, 45], extra_number: 30},
            {draw_number: "22/104", draw_date: "13/12/2022", numbers: [12, 38, 39, 40, 45, 49], extra_number: 10},
            {draw_number: "22/103", draw_date: "10/12/2022", numbers: [6, 12, 20, 25, 39, 49], extra_number: 7},
            {draw_number: "22/102", draw_date: "08/12/2022", numbers: [17, 19, 35, 39, 44, 46], extra_number: 21},
            {draw_number: "22/101", draw_date: "06/12/2022", numbers: [6, 11, 17, 30, 44, 46], extra_number: 5},
            {draw_number: "22/100", draw_date: "03/12/2022", numbers: [2, 15, 31, 34, 38, 41], extra_number: 21},
            {draw_number: "22/099", draw_date: "01/12/2022", numbers: [14, 18, 27, 32, 39, 42], extra_number: 43},
            {draw_number: "22/098", draw_date: "29/11/2022", numbers: [12, 18, 22, 28, 31, 40], extra_number: 7},
            {draw_number: "22/097", draw_date: "26/11/2022", numbers: [14, 25, 28, 29, 43, 44], extra_number: 10},
            {draw_number: "22/096", draw_date: "24/11/2022", numbers: [3, 12, 14, 19, 25, 28], extra_number: 11},
            {draw_number: "22/095", draw_date: "22/11/2022", numbers: [6, 10, 11, 13, 32, 46], extra_number: 39},
            {draw_number: "22/094", draw_date: "19/11/2022", numbers: [6, 11, 27, 39, 46, 47], extra_number: 15},
            {draw_number: "22/093", draw_date: "17/11/2022", numbers: [1, 9, 27, 32, 33, 35], extra_number: 45},
            {draw_number: "22/092", draw_date: "15/11/2022", numbers: [17, 18, 32, 38, 44, 49], extra_number: 19},
            {draw_number: "22/091", draw_date: "13/11/2022", numbers: [5, 12, 18, 19, 26, 33], extra_number: 46},
            {draw_number: "22/090", draw_date: "10/11/2022", numbers: [11, 12, 14, 18, 29, 30], extra_number: 31},
            {draw_number: "22/089", draw_date: "08/11/2022", numbers: [10, 20, 27, 32, 38, 46], extra_number: 4},
            {draw_number: "22/088", draw_date: "05/11/2022", numbers: [7, 11, 22, 23, 28, 32], extra_number: 29},
            {draw_number: "22/087", draw_date: "03/11/2022", numbers: [10, 13, 19, 21, 27, 49], extra_number: 35},
            {draw_number: "22/086", draw_date: "01/11/2022", numbers: [2, 12, 14, 32, 41, 46], extra_number: 20},
            {draw_number: "22/085", draw_date: "29/10/2022", numbers: [4, 5, 12, 15, 28, 29], extra_number: 20},
            {draw_number: "22/084", draw_date: "25/10/2022", numbers: [27, 28, 30, 34, 35, 48], extra_number: 11},
            {draw_number: "22/083", draw_date: "22/10/2022", numbers: [12, 15, 16, 42, 44, 45], extra_number: 4},
            {draw_number: "22/082", draw_date: "20/10/2022", numbers: [20, 24, 27, 31, 32, 49], extra_number: 36},
            {draw_number: "22/081", draw_date: "18/10/2022", numbers: [7, 25, 26, 39, 44, 45], extra_number: 46},
            {draw_number: "22/080", draw_date: "15/10/2022", numbers: [18, 21, 25, 28, 38, 44], extra_number: 45},
            {draw_number: "22/079", draw_date: "13/10/2022", numbers: [1, 10, 14, 38, 47, 48], extra_number: 40},
            {draw_number: "22/078", draw_date: "11/10/2022", numbers: [1, 5, 10, 25, 36, 47], extra_number: 23},
            {draw_number: "22/077", draw_date: "08/10/2022", numbers: [7, 11, 28, 31, 43, 48], extra_number: 42},
            {draw_number: "22/076", draw_date: "06/10/2022", numbers: [4, 11, 21, 28, 31, 47], extra_number: 5},
            {draw_number: "22/075", draw_date: "04/10/2022", numbers: [7, 8, 12, 13, 26, 43], extra_number: 3},
            {draw_number: "22/074", draw_date: "02/10/2022", numbers: [1, 7, 11, 24, 27, 38], extra_number: 17},
            {draw_number: "22/073", draw_date: "29/09/2022", numbers: [6, 8, 18, 36, 37, 44], extra_number: 30},
            {draw_number: "22/072", draw_date: "27/09/2022", numbers: [2, 18, 29, 30, 32, 47], extra_number: 46},
            {draw_number: "22/071", draw_date: "24/09/2022", numbers: [4, 6, 10, 27, 29, 46], extra_number: 17},
            {draw_number: "22/070", draw_date: "22/09/2022", numbers: [8, 11, 31, 32, 33, 36], extra_number: 46},
            {draw_number: "22/069", draw_date: "20/09/2022", numbers: [4, 7, 14, 18, 27, 31], extra_number: 48},
            {draw_number: "22/068", draw_date: "17/09/2022", numbers: [5, 17, 22, 24, 34, 38], extra_number: 13},
            {draw_number: "22/067", draw_date: "15/09/2022", numbers: [21, 23, 29, 30, 33, 49], extra_number: 40},
            {draw_number: "22/066", draw_date: "13/09/2022", numbers: [2, 4, 20, 38, 40, 46], extra_number: 11},
            {draw_number: "22/065", draw_date: "08/09/2022", numbers: [8, 14, 15, 20, 41, 44], extra_number: 3},
            {draw_number: "22/064", draw_date: "06/09/2022", numbers: [14, 22, 35, 37, 42, 46], extra_number: 24},
            {draw_number: "22/063", draw_date: "03/09/2022", numbers: [2, 8, 12, 19, 35, 45], extra_number: 33},
            {draw_number: "22/062", draw_date: "01/09/2022", numbers: [23, 24, 30, 31, 45, 46], extra_number: 26},
            {draw_number: "22/061", draw_date: "30/08/2022", numbers: [7, 8, 9, 17, 24, 25], extra_number: 20},
            {draw_number: "22/060", draw_date: "27/08/2022", numbers: [12, 22, 34, 35, 39, 45], extra_number: 7},
            {draw_number: "22/059", draw_date: "25/08/2022", numbers: [16, 19, 32, 33, 42, 46], extra_number: 34},
            {draw_number: "22/058", draw_date: "23/08/2022", numbers: [4, 8, 9, 10, 30, 42], extra_number: 22},
            {draw_number: "22/057", draw_date: "20/08/2022", numbers: [8, 17, 19, 28, 31, 35], extra_number: 46},
            {draw_number: "22/056", draw_date: "18/08/2022", numbers: [2, 8, 19, 21, 24, 47], extra_number: 4},
            {draw_number: "22/055", draw_date: "16/08/2022", numbers: [7, 20, 31, 35, 41, 47], extra_number: 42},
            {draw_number: "22/054", draw_date: "13/08/2022", numbers: [6, 22, 25, 33, 38, 47], extra_number: 10},
            {draw_number: "22/053", draw_date: "11/08/2022", numbers: [7, 12, 22, 26, 43, 49], extra_number: 5},
            {draw_number: "22/052", draw_date: "09/08/2022", numbers: [1, 12, 25, 28, 36, 46], extra_number: 13},
            {draw_number: "22/051", draw_date: "04/08/2022", numbers: [13, 24, 30, 35, 36, 39], extra_number: 29},
            {draw_number: "22/050", draw_date: "02/08/2022", numbers: [4, 8, 9, 11, 42, 46], extra_number: 47},
            {draw_number: "22/049", draw_date: "30/07/2022", numbers: [21, 25, 34, 37, 41, 46], extra_number: 14},
            {draw_number: "22/048", draw_date: "28/07/2022", numbers: [8, 13, 16, 21, 23, 49], extra_number: 44},
            {draw_number: "22/047", draw_date: "26/07/2022", numbers: [6, 14, 23, 31, 38, 48], extra_number: 1},
            {draw_number: "22/046", draw_date: "22/07/2022", numbers: [5, 12, 21, 30, 34, 38], extra_number: 3},
            {draw_number: "22/045", draw_date: "15/07/2022", numbers: [19, 20, 25, 29, 46, 47], extra_number: 35},
            {draw_number: "22/044", draw_date: "12/07/2022", numbers: [4, 13, 22, 27, 43, 47], extra_number: 23},
            {draw_number: "22/043", draw_date: "08/07/2022", numbers: [7, 10, 28, 30, 32, 36], extra_number: 27},
            {draw_number: "22/042", draw_date: "05/07/2022", numbers: [9, 30, 31, 32, 37, 40], extra_number: 25},
            {draw_number: "22/041", draw_date: "03/07/2022", numbers: [19, 21, 23, 26, 37, 39], extra_number: 13},
            {draw_number: "22/040", draw_date: "27/06/2022", numbers: [1, 13, 19, 26, 29, 37], extra_number: 15},
            {draw_number: "22/039", draw_date: "21/06/2022", numbers: [2, 15, 20, 30, 47, 48], extra_number: 44},
            {draw_number: "22/038", draw_date: "17/06/2022", numbers: [9, 17, 24, 27, 33, 39], extra_number: 48},
            {draw_number: "22/037", draw_date: "14/06/2022", numbers: [7, 16, 21, 30, 34, 38], extra_number: 41},
            {draw_number: "22/036", draw_date: "10/06/2022", numbers: [11, 17, 24, 26, 37, 41], extra_number: 34},
            {draw_number: "22/035", draw_date: "07/06/2022", numbers: [9, 16, 21, 35, 47, 48], extra_number: 36},
            {draw_number: "22/034", draw_date: "03/06/2022", numbers: [1, 27, 32, 35, 38, 44], extra_number: 24},
            {draw_number: "22/033", draw_date: "31/05/2022", numbers: [2, 13, 35, 39, 43, 48], extra_number: 9},
            {draw_number: "22/032", draw_date: "27/05/2022", numbers: [1, 17, 25, 29, 42, 46], extra_number: 8},
            {draw_number: "22/031", draw_date: "24/05/2022", numbers: [5, 7, 8, 17, 47, 49], extra_number: 34},
            {draw_number: "22/030", draw_date: "20/05/2022", numbers: [27, 30, 36, 38, 45, 46], extra_number: 34},
            {draw_number: "22/029", draw_date: "17/05/2022", numbers: [4, 7, 29, 35, 40, 46], extra_number: 17},
            {draw_number: "22/028", draw_date: "13/05/2022", numbers: [1, 5, 10, 22, 30, 34], extra_number: 42},
            {draw_number: "22/027", draw_date: "10/05/2022", numbers: [12, 14, 19, 39, 41, 48], extra_number: 33},
            {draw_number: "22/026", draw_date: "06/05/2022", numbers: [2, 15, 41, 42, 44, 46], extra_number: 40},
            {draw_number: "22/025", draw_date: "03/05/2022", numbers: [3, 8, 11, 15, 18, 40], extra_number: 41},
            {draw_number: "22/024", draw_date: "29/04/2022", numbers: [1, 7, 16, 28, 31, 48], extra_number: 18},
            {draw_number: "22/023", draw_date: "26/04/2022", numbers: [9, 23, 30, 32, 34, 40], extra_number: 25},
            {draw_number: "22/022", draw_date: "22/04/2022", numbers: [8, 11, 15, 19, 34, 37], extra_number: 25},
            {draw_number: "22/021", draw_date: "19/04/2022", numbers: [12, 23, 28, 34, 39, 46], extra_number: 44},
            {draw_number: "22/020", draw_date: "15/04/2022", numbers: [21, 25, 30, 36, 37, 47], extra_number: 42},
            {draw_number: "22/019", draw_date: "12/04/2022", numbers: [8, 11, 12, 20, 26, 30], extra_number: 28},
            {draw_number: "22/018", draw_date: "08/04/2022", numbers: [10, 20, 36, 38, 43, 48], extra_number: 30},
            {draw_number: "22/017", draw_date: "05/04/2022", numbers: [9, 11, 12, 22, 29, 42], extra_number: 3},
            {draw_number: "22/016", draw_date: "01/04/2022", numbers: [4, 8, 21, 40, 46, 49], extra_number: 34},
            {draw_number: "22/015", draw_date: "29/03/2022", numbers: [8, 18, 21, 35, 37, 38], extra_number: 10},
            {draw_number: "22/014", draw_date: "25/03/2022", numbers: [15, 20, 26, 28, 29, 46], extra_number: 12},
            {draw_number: "22/013", draw_date: "22/03/2022", numbers: [6, 28, 32, 33, 40, 45], extra_number: 1},
            {draw_number: "22/012", draw_date: "18/03/2022", numbers: [12, 18, 22, 30, 40, 49], extra_number: 15},
            {draw_number: "22/011", draw_date: "15/03/2022", numbers: [3, 10, 12, 28, 39, 48], extra_number: 17},
            {draw_number: "22/010", draw_date: "11/03/2022", numbers: [11, 20, 23, 29, 38, 47], extra_number: 12},
            {draw_number: "22/009", draw_date: "08/03/2022", numbers: [1, 5, 23, 42, 46, 49], extra_number: 11},
            {draw_number: "22/008", draw_date: "03/03/2022", numbers: [12, 19, 21, 22, 40, 43], extra_number: 46},
            {draw_number: "22/007", draw_date: "24/02/2022", numbers: [2, 9, 11, 12, 16, 24], extra_number: 43},
            {draw_number: "22/006", draw_date: "17/02/2022", numbers: [6, 7, 22, 34, 35, 46], extra_number: 8},
            {draw_number: "22/005", draw_date: "10/02/2022", numbers: [6, 13, 17, 28, 35, 44], extra_number: 5},
            {draw_number: "22/004", draw_date: "05/02/2022", numbers: [15, 18, 21, 25, 39, 43], extra_number: 33},
            {draw_number: "22/003", draw_date: "27/01/2022", numbers: [10, 18, 20, 29, 32, 33], extra_number: 2},
            {draw_number: "22/002", draw_date: "20/01/2022", numbers: [1, 3, 10, 11, 30, 42], extra_number: 39},
            {draw_number: "22/001", draw_date: "04/01/2022", numbers: [2, 8, 12, 14, 20, 47], extra_number: 36}
        ];
console.log('lotteryData', lotteryData.length);

        // æ¨™ç±¤åˆ‡æ›åŠŸèƒ½
        function switchTab(tabName) {
            // éš±è—æ‰€æœ‰æ¨™ç±¤é 
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });
            
            // ç§»é™¤æ‰€æœ‰æŒ‰éˆ•çš„activeé¡åˆ¥
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // é¡¯ç¤ºé¸ä¸­çš„æ¨™ç±¤é 
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // è¼‰å…¥å°æ‡‰æ•¸æ“š
            if (tabName === 'results') {
                loadResults();
            } else if (tabName === 'statistics') {
                // åˆå§‹åŒ–ç¯„åœé¸æ“‡ä»‹é¢
                initializeRangeSelection();
                updateStatsWithRange(1, 100); // é è¨­é¡¯ç¤ºç¬¬1æœŸè‡³ç¬¬100æœŸ
            } else if (tabName === 'verification') {
                // åˆå§‹åŒ–è™Ÿç¢¼é¸æ“‡ä»‹é¢å’Œç¯„åœé¸æ“‡
                initializeNumberSelection();
                initializeVerificationRangeSelection();
                // å¦‚æœæ˜¯è†½è…³æŠ•æ³¨æ¨¡å¼ï¼Œä¹Ÿåˆå§‹åŒ–è†½è…³ç¶²æ ¼
                if (currentBettingMode === 'banker') {
                    initializeBankerGrids();
                }
                // é è¨­è¼‰å…¥çµ±è¨ˆåˆ†æçµæœ
                loadVerification();
            } else if (tabName === 'gann-square') {
                // åˆå§‹åŒ–æ±Ÿæ©èºæ—‹å››æ–¹åœ–
                initializeGannSquare();
            }
        }

        // è¼‰å…¥é–‹ççµæœ
        function loadResults() {
            const resultsContent = document.getElementById('results-content');
            
            try {
                let html = `
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th>æœŸè™Ÿ</th>
                                <th>é–‹çæ—¥æœŸ</th>
                                <th>é–‹çè™Ÿç¢¼</th>
                                <th>ç‰¹åˆ¥è™Ÿ</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                
                lotteryData.forEach(row => {
                    const numbers = row.numbers.map(num => 
                        `<span class="number-ball">${num}</span>`
                    ).join('');
                    
                    html += `
                        <tr>
                            <td>${row.draw_number}</td>
                            <td>${row.draw_date}</td>
                            <td>${numbers}</td>
                            <td><span class="number-ball extra-number-ball">${row.extra_number}</span></td>
                        </tr>
                    `;
                });
                
                html += '</tbody></table>';
                resultsContent.innerHTML = html;
                
            } catch (error) {
                console.error('Error loading results:', error);
                resultsContent.innerHTML = '<div class="error">è¼‰å…¥é–‹ççµæœæ™‚å‡ºç¾éŒ¯èª¤</div>';
            }
        }

        // è¨ˆç®—æ•¸å­—å…±ç¾çŸ©é™£
        function calculateCoOccurrence(selectedData) {
            const coMatrix = {};
            
            // åˆå§‹åŒ–å…±ç¾çŸ©é™£
            for (let i = 1; i <= 49; i++) {
                coMatrix[i] = {};
                for (let j = 1; j <= 49; j++) {
                    if (i !== j) coMatrix[i][j] = 0;
                }
            }
            
            // è¨ˆç®—å…±ç¾æ¬¡æ•¸
            selectedData.forEach(row => {
                const allNumbers = [...row.numbers, row.extra_number];
                
                // å°æ¯ä¸€å°æ•¸å­—è¨ˆç®—å…±ç¾
                for (let i = 0; i < allNumbers.length; i++) {
                    for (let j = i + 1; j < allNumbers.length; j++) {
                        const num1 = allNumbers[i];
                        const num2 = allNumbers[j];
                        coMatrix[num1][num2]++;
                        coMatrix[num2][num1]++;
                    }
                }
            });
            
            return coMatrix;
        }

        // ç²å–èˆ‡æŒ‡å®šæ•¸å­—æœ€å¸¸å…±ç¾çš„å…¶ä»–æ•¸å­—
        function getTopCoOccurring(number, coMatrix, topN = 5) {
            const coOccurrences = [];
            
            for (let otherNum = 1; otherNum <= 49; otherNum++) {
                if (otherNum !== number) {
                    coOccurrences.push({
                        number: otherNum,
                        frequency: coMatrix[number][otherNum] || 0
                    });
                }
            }
            
            // æŒ‰é »ç‡é™åºæ’åº
            coOccurrences.sort((a, b) => b.frequency - a.frequency);
            
            return coOccurrences.slice(0, topN);
        }

        // åˆå§‹åŒ–ç¯„åœé¸æ“‡ä»‹é¢
        function initializeRangeSelection() {
            // è¨­ç½®æœ€å¤§æœŸæ•¸é™åˆ¶
            const maxPeriods = lotteryData.length;
            document.getElementById('start-period').max = maxPeriods;
            document.getElementById('end-period').max = maxPeriods;

            // æ·»åŠ è¼¸å…¥äº‹ä»¶ç›£è½å™¨
            document.getElementById('start-period').addEventListener('input', updateRangeInfo);
            document.getElementById('end-period').addEventListener('input', updateRangeInfo);

            // åˆå§‹åŒ–ç¯„åœè³‡è¨Š
            updateRangeInfo();
        }

        // è¨­ç½®å¿«é€Ÿç¯„åœé¸æ“‡
        function setQuickRange(start, end) {
            document.getElementById('start-period').value = start;
            document.getElementById('end-period').value = end;
            updateRangeInfo();
        }

        // æ›´æ–°ç¯„åœè³‡è¨Šé¡¯ç¤º
        function updateRangeInfo() {
            const startPeriod = parseInt(document.getElementById('start-period').value) || 1;
            const endPeriod = parseInt(document.getElementById('end-period').value) || 1;

            const periodCount = Math.max(0, endPeriod - startPeriod + 1);

            document.getElementById('period-count').textContent = `çµ±è¨ˆæœŸæ•¸ï¼š${periodCount}æœŸ`;
            document.getElementById('period-range').textContent = `ç¯„åœï¼šç¬¬${startPeriod}æœŸ è‡³ ç¬¬${endPeriod}æœŸ`;

            // é©—è­‰ç¯„åœ
            const applyBtn = document.querySelector('.apply-btn');
            if (startPeriod > endPeriod || periodCount <= 0) {
                applyBtn.disabled = true;
                applyBtn.textContent = 'âŒ ç¯„åœç„¡æ•ˆ';
            } else if (endPeriod > lotteryData.length) {
                applyBtn.disabled = true;
                applyBtn.textContent = `âŒ è¶…å‡ºè³‡æ–™ç¯„åœ (æœ€å¤§${lotteryData.length}æœŸ)`;
            } else {
                applyBtn.disabled = false;
                applyBtn.textContent = 'ğŸ” æ‡‰ç”¨ç¯„åœçµ±è¨ˆ';
            }
        }

        // æ‡‰ç”¨ç¯„åœé¸æ“‡
        function applyRangeSelection() {
            const startPeriod = parseInt(document.getElementById('start-period').value) || 1;
            const endPeriod = parseInt(document.getElementById('end-period').value) || 1;

            if (startPeriod > endPeriod) {
                alert('é–‹å§‹æœŸæ•¸ä¸èƒ½å¤§æ–¼çµæŸæœŸæ•¸ï¼');
                return;
            }

            if (endPeriod > lotteryData.length) {
                alert(`çµæŸæœŸæ•¸ä¸èƒ½è¶…éè³‡æ–™ç¯„åœï¼ç›®å‰æœ€å¤§æœŸæ•¸ç‚º ${lotteryData.length}`);
                return;
            }

            updateStatsWithRange(startPeriod, endPeriod);
        }

        // æ›´æ–°çµ±è¨ˆæ•¸æ“šï¼ˆç¯„åœç‰ˆæœ¬ï¼‰
        function updateStatsWithRange(startPeriod, endPeriod) {
            const statsContent = document.getElementById('stats-content');

            try {
                // è¨ˆç®—è™Ÿç¢¼çµ±è¨ˆ
                const numberFreq = {};

                // åˆå§‹åŒ–1-49çš„é »ç‡ç‚º0
                for (let i = 1; i <= 49; i++) {
                    numberFreq[i] = 0;
                }

                // è¨ˆç®—é¸å®šç¯„åœå…§çš„è™Ÿç¢¼é »ç‡
                // æ³¨æ„ï¼šé™£åˆ—ç´¢å¼•å¾0é–‹å§‹ï¼Œä½†æœŸæ•¸å¾1é–‹å§‹ï¼Œæ‰€ä»¥éœ€è¦èª¿æ•´
                const startIndex = startPeriod - 1;
                const endIndex = endPeriod;
                const selectedData = lotteryData.slice(startIndex, endIndex);

                selectedData.forEach(row => {
                    row.numbers.forEach(num => {
                        numberFreq[num]++;
                    });
                    // ç‰¹åˆ¥è™Ÿä¹Ÿè¨ˆå…¥çµ±è¨ˆ
                    numberFreq[row.extra_number]++;
                });

                // è¨ˆç®—æ•¸å­—å…±ç¾çŸ©é™£
                const coMatrix = calculateCoOccurrence(selectedData);

                // è½‰æ›ç‚ºé™£åˆ—ä¸¦æŒ‰é »ç‡æ’åº
                const sortedNumbers = Object.entries(numberFreq)
                    .map(([num, freq]) => ({
                        number: parseInt(num),
                        frequency: freq
                    }))
                    .sort((a, b) => b.frequency - a.frequency);

                // ç”Ÿæˆçµ±è¨ˆç¶²æ ¼
                let html = '<div class="stats-grid">';

                sortedNumbers.forEach((item, index) => {
                    const rank = index + 1;
                    let rankClass = '';

                    if (rank <= 7) rankClass = `rank-${rank}`;
                    else if (rank <= 14) rankClass = 'rank-7';
                    else rankClass = 'rank-7';

                    // ç²å–èˆ‡æ­¤æ•¸å­—æœ€å¸¸å…±ç¾çš„å…¶ä»–æ•¸å­—
                    const topCoOccurring = getTopCoOccurring(item.number, coMatrix, 48);

                    html += `
                        <div class="number-stat">
                            <div class="stat-header">
                                <div class="stat-number">${item.number}</div>
                                <div class="stat-info">
                                    <div class="stat-frequency">${item.frequency}æ¬¡</div>
                                    <div class="stat-rank ${rankClass}">ç¬¬${rank}å</div>
                                </div>
                            </div>
                            <div class="co-occurrence">
                                <div class="co-occurrence-title">å¸¸èˆ‡ä»¥ä¸‹æ•¸å­—åŒæ™‚å‡ºç¾ï¼š</div>
                                <div class="co-numbers">
                    `;

                    if (topCoOccurring.length > 0) {
                        topCoOccurring.forEach(co => {
                            html += `
                                <div class="co-number">
                                    <div class="co-number-ball">${co.number}</div>
                                    <span class="co-frequency">${co.frequency}æ¬¡</span>
                                </div>
                            `;
                        });
                    } else {
                        html += '<div class="co-number"><span class="co-frequency">æš«ç„¡å…±ç¾æ•¸æ“š</span></div>';
                    }

                    html += `
                                </div>
                            </div>
                        </div>
                    `;
                });

                html += '</div>';

                const periodCount = endPeriod - startPeriod + 1;
                statsContent.innerHTML = `
                    <p style="text-align: center; margin-bottom: 20px; color: #666;">
                        ç¬¬${startPeriod}æœŸè‡³ç¬¬${endPeriod}æœŸè™Ÿç¢¼å‡ºç¾é »ç‡çµ±è¨ˆèˆ‡å…±ç¾åˆ†æ (åŒ…å«ç‰¹åˆ¥è™Ÿ)<br>
                        <small>çµ±è¨ˆæœŸæ•¸ï¼š${periodCount}æœŸ | è³‡æ–™ç¯„åœï¼š${selectedData.length}ç­†é–‹çè¨˜éŒ„</small>
                    </p>
                    ${html}
                `;

            } catch (error) {
                console.error('Error updating stats:', error);
                statsContent.innerHTML = '<div class="error">è¼‰å…¥çµ±è¨ˆæ•¸æ“šæ™‚å‡ºç¾éŒ¯èª¤</div>';
            }
        }

        // ä¿æŒå‘å¾Œç›¸å®¹æ€§çš„èˆŠç‰ˆ updateStats å‡½æ•¸
        function updateStats(periods) {
            updateStatsWithRange(1, periods);
        }

        // æŠ•æ³¨æ¨¡å¼åˆ‡æ›
        function switchBettingMode(mode) {
            currentBettingMode = mode;

            // æ›´æ–°æ¨™ç±¤é æ¨£å¼
            document.querySelectorAll('.mode-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // åˆ‡æ›é¡¯ç¤ºå…§å®¹
            if (mode === 'complex') {
                document.getElementById('complex-betting-mode').style.display = 'block';
                document.getElementById('banker-betting-mode').style.display = 'none';
            } else {
                document.getElementById('complex-betting-mode').style.display = 'none';
                document.getElementById('banker-betting-mode').style.display = 'block';
                // åˆå§‹åŒ–è†½è…³æŠ•æ³¨ç¶²æ ¼
                initializeBankerGrids();
            }

            // æ›´æ–°çµ±è¨ˆåˆ†æ
            if (document.getElementById('verification').classList.contains('active')) {
                loadVerification();
            }
        }

        // åˆå§‹åŒ–è†½è…³æŠ•æ³¨ç¶²æ ¼
        function initializeBankerGrids() {
            const bankerGrid = document.getElementById('banker-grid');
            const runnerGrid = document.getElementById('runner-grid');

            bankerGrid.innerHTML = '';
            runnerGrid.innerHTML = '';

            // ç”Ÿæˆè†½ç¢¼ç¶²æ ¼
            for (let i = 1; i <= 49; i++) {
                const bankerCell = document.createElement('div');
                bankerCell.className = 'number-cell';
                bankerCell.textContent = i;
                bankerCell.onclick = () => toggleBankerNumber(i);
                bankerGrid.appendChild(bankerCell);

                const runnerCell = document.createElement('div');
                runnerCell.className = 'number-cell';
                runnerCell.textContent = i;
                runnerCell.onclick = () => toggleRunnerNumber(i);
                runnerGrid.appendChild(runnerCell);
            }

            updateBankerDisplay();
        }

        // åˆ‡æ›è†½ç¢¼é¸æ“‡
        function toggleBankerNumber(number) {
            const index = bankerNumbers.indexOf(number);

            if (index > -1) {
                // å–æ¶ˆé¸æ“‡è†½ç¢¼
                bankerNumbers.splice(index, 1);
            } else {
                // é¸æ“‡è†½ç¢¼
                if (bankerNumbers.length >= maxBankerNumbers) {
                    alert(`è†½ç¢¼æœ€å¤šåªèƒ½é¸æ“‡${maxBankerNumbers}å€‹ï¼`);
                    return;
                }

                // æª¢æŸ¥æ˜¯å¦å·²åœ¨è…³ç¢¼ä¸­
                if (runnerNumbers.includes(number)) {
                    alert('è©²è™Ÿç¢¼å·²åœ¨è…³ç¢¼ä¸­ï¼Œä¸èƒ½é‡è¤‡é¸æ“‡ï¼');
                    return;
                }

                bankerNumbers.push(number);
            }

            updateBankerDisplay();
            updateBankerStatus();
        }

        // åˆ‡æ›è…³ç¢¼é¸æ“‡
        function toggleRunnerNumber(number) {
            const index = runnerNumbers.indexOf(number);

            if (index > -1) {
                // å–æ¶ˆé¸æ“‡è…³ç¢¼
                runnerNumbers.splice(index, 1);
            } else {
                // é¸æ“‡è…³ç¢¼
                // æª¢æŸ¥æ˜¯å¦å·²åœ¨è†½ç¢¼ä¸­
                if (bankerNumbers.includes(number)) {
                    alert('è©²è™Ÿç¢¼å·²åœ¨è†½ç¢¼ä¸­ï¼Œä¸èƒ½é‡è¤‡é¸æ“‡ï¼');
                    return;
                }

                runnerNumbers.push(number);
            }

            updateBankerDisplay();
            updateBankerStatus();
        }

        // æ›´æ–°è†½è…³æŠ•æ³¨é¡¯ç¤º
        function updateBankerDisplay() {
            // æ›´æ–°è†½ç¢¼é¡¯ç¤º
            const bankerCells = document.querySelectorAll('#banker-grid .number-cell');
            bankerCells.forEach(cell => {
                const number = parseInt(cell.textContent);
                if (bankerNumbers.includes(number)) {
                    cell.classList.add('selected');
                } else {
                    cell.classList.remove('selected');
                }

                // å¦‚æœåœ¨è…³ç¢¼ä¸­ï¼Œç¦ç”¨è†½ç¢¼é¸æ“‡
                if (runnerNumbers.includes(number)) {
                    cell.classList.add('disabled');
                } else {
                    cell.classList.remove('disabled');
                }
            });

            // æ›´æ–°è…³ç¢¼é¡¯ç¤º
            const runnerCells = document.querySelectorAll('#runner-grid .number-cell');
            runnerCells.forEach(cell => {
                const number = parseInt(cell.textContent);
                if (runnerNumbers.includes(number)) {
                    cell.classList.add('selected');
                } else {
                    cell.classList.remove('selected');
                }

                // å¦‚æœåœ¨è†½ç¢¼ä¸­ï¼Œç¦ç”¨è…³ç¢¼é¸æ“‡
                if (bankerNumbers.includes(number)) {
                    cell.classList.add('disabled');
                } else {
                    cell.classList.remove('disabled');
                }
            });
        }

        // æ›´æ–°è†½è…³æŠ•æ³¨ç‹€æ…‹
        function updateBankerStatus() {
            const bankerCount = bankerNumbers.length;
            const runnerCount = runnerNumbers.length;

            // è¨ˆç®—çµ„åˆæ•¸ï¼šC(è…³ç¢¼æ•¸, 6-è†½ç¢¼æ•¸)
            let combinationCount = 0;
            if (bankerCount >= 1 && bankerCount <= 5 && runnerCount >= 1) {
                const needFromRunner = 6 - bankerCount;
                if (needFromRunner <= runnerCount) {
                    combinationCount = getCombinationCount(runnerCount, needFromRunner);
                }
            }

            document.getElementById('banker-count').textContent = `è†½ç¢¼ï¼š${bankerCount}å€‹`;
            document.getElementById('runner-count').textContent = `è…³ç¢¼ï¼š${runnerCount}å€‹`;
            document.getElementById('banker-combination-count').textContent = `ç¸½çµ„åˆï¼š${combinationCount.toLocaleString()}æ³¨`;

            // å¦‚æœç•¶å‰åœ¨æ ¸å°ä¸­çæ¨™ç±¤é ï¼Œè‡ªå‹•æ›´æ–°çµ±è¨ˆåˆ†æ
            if (document.getElementById('verification').classList.contains('active')) {
                loadVerification();
            }
        }

        // åˆå§‹åŒ–è™Ÿç¢¼é¸æ“‡ä»‹é¢
        function initializeNumberSelection() {
            const numberGrid = document.getElementById('number-grid');
            numberGrid.innerHTML = '';

            // ç”Ÿæˆ1-49çš„è™Ÿç¢¼æ ¼å­
            for (let i = 1; i <= 49; i++) {
                const numberCell = document.createElement('div');
                numberCell.className = 'number-cell';
                numberCell.textContent = i;
                numberCell.onclick = () => toggleNumber(i);
                numberGrid.appendChild(numberCell);
            }

            // è¼‰å…¥ä¿å­˜çš„é¸æ“‡
            loadSavedSelection();
            updateSelectionStatus();
        }

        // åˆ‡æ›è™Ÿç¢¼é¸æ“‡ç‹€æ…‹
        function toggleNumber(number) {
            const index = selectedNumbers.indexOf(number);

            if (index > -1) {
                // å–æ¶ˆé¸æ“‡
                selectedNumbers.splice(index, 1);
            } else {
                // é¸æ“‡è™Ÿç¢¼
                if (selectedNumbers.length < maxSelections) {
                    selectedNumbers.push(number);
                } else {
                    alert(`æœ€å¤šåªèƒ½é¸æ“‡${maxSelections}å€‹è™Ÿç¢¼ï¼`);
                    return;
                }
            }

            updateNumberDisplay();
            updateSelectionStatus();
        }

        // æ›´æ–°è™Ÿç¢¼é¡¯ç¤ºç‹€æ…‹
        function updateNumberDisplay() {
            const numberCells = document.querySelectorAll('.number-cell');
            numberCells.forEach(cell => {
                const number = parseInt(cell.textContent);
                if (selectedNumbers.includes(number)) {
                    cell.classList.add('selected');
                } else {
                    cell.classList.remove('selected');
                }
            });
        }

        // æ›´æ–°é¸æ“‡ç‹€æ…‹é¡¯ç¤º
        function updateSelectionStatus() {
            const selectedCount = selectedNumbers.length;
            const combinationCount = selectedCount >= 6 ? getCombinationCount(selectedCount, 6) : 0;

            document.getElementById('selected-count').textContent = `å·²é¸æ“‡ï¼š${selectedCount}å€‹è™Ÿç¢¼`;
            document.getElementById('combination-count').textContent = `å¯çµ„åˆï¼š${combinationCount.toLocaleString()}æ³¨`;

            // å¦‚æœç•¶å‰åœ¨æ ¸å°ä¸­çæ¨™ç±¤é ï¼Œè‡ªå‹•æ›´æ–°çµ±è¨ˆåˆ†æ
            if (document.getElementById('verification').classList.contains('active')) {
                loadVerification();
            }
        }

        // è¨ˆç®—çµ„åˆæ•¸
        function getCombinationCount(n, r) {
            if (n < r) return 0;
            if (r === 0 || r === n) return 1;

            let result = 1;
            for (let i = 0; i < r; i++) {
                result = result * (n - i) / (i + 1);
            }
            return Math.round(result);
        }

        // é‡ç½®é¸æ“‡
        function resetSelection() {
            if (currentBettingMode === 'banker') {
                bankerNumbers = [];
                runnerNumbers = [];
                updateBankerDisplay();
                updateBankerStatus();
            } else {
                selectedNumbers = [];
                updateNumberDisplay();
                updateSelectionStatus();
            }
        }

        // ä¿å­˜é¸æ“‡åˆ°localStorage
        function saveSelection() {
            if (currentBettingMode === 'banker') {
                if (bankerNumbers.length === 0 && runnerNumbers.length === 0) {
                    alert('è«‹å…ˆé¸æ“‡è†½ç¢¼å’Œè…³ç¢¼ï¼');
                    return;
                }

                const bankerData = {
                    mode: 'banker',
                    bankerNumbers: [...bankerNumbers],
                    runnerNumbers: [...runnerNumbers]
                };
                localStorage.setItem('savedBankerNumbers', JSON.stringify(bankerData));
                alert(`å·²ä¿å­˜è†½è…³æŠ•æ³¨çµ„åˆåˆ°ã€Œæˆ‘çš„ä¿å­˜ã€ï¼`);
            } else {
                if (selectedNumbers.length === 0) {
                    // å¦‚æœæ²’æœ‰æ‰‹å‹•é¸æ“‡è™Ÿç¢¼ï¼Œä¿å­˜ç•¶å‰çµ±è¨ˆåˆ†æçš„ç†±é–€è™Ÿç¢¼
                    const startPeriod = parseInt(document.getElementById('verification-start-period').value) || 1;
                    const endPeriod = parseInt(document.getElementById('verification-end-period').value) || 40;
                    
                    const startIndex = startPeriod - 1;
                    const endIndex = endPeriod;
                    const analysisData = lotteryData.slice(startIndex, endIndex);
                    const numberFreq = {};

                    // åˆå§‹åŒ–1-49çš„é »ç‡ç‚º0
                    for (let i = 1; i <= 49; i++) {
                        numberFreq[i] = 0;
                    }

                    // è¨ˆç®—è™Ÿç¢¼é »ç‡ï¼ˆåŒ…å«ç‰¹åˆ¥è™Ÿï¼‰
                    analysisData.forEach(row => {
                        row.numbers.forEach(num => {
                            numberFreq[num]++;
                        });
                        // ç‰¹åˆ¥è™Ÿä¹Ÿè¨ˆå…¥çµ±è¨ˆ
                        numberFreq[row.extra_number]++;
                    });

                    // è½‰æ›ç‚ºé™£åˆ—ä¸¦æŒ‰é »ç‡æ’åºï¼Œå–å‰10å
                    const sortedNumbers = Object.entries(numberFreq)
                        .map(([num, freq]) => ({
                            number: parseInt(num),
                            frequency: freq
                        }))
                        .sort((a, b) => b.frequency - a.frequency)
                        .slice(0, 10);

                    const analysisNumbers = sortedNumbers.map(item => item.number);
                    
                    localStorage.setItem('savedLotteryNumbers', JSON.stringify(analysisNumbers));
                    quickSelections.saved = [...analysisNumbers];
                    alert(`å·²ä¿å­˜çµ±è¨ˆåˆ†æçš„${analysisNumbers.length}å€‹ç†±é–€è™Ÿç¢¼åˆ°ã€Œæˆ‘çš„ä¿å­˜ã€ï¼\nè™Ÿç¢¼ï¼š${analysisNumbers.sort((a, b) => a - b).join(', ')}`);
                } else {
                    localStorage.setItem('savedLotteryNumbers', JSON.stringify(selectedNumbers));
                    quickSelections.saved = [...selectedNumbers];
                    alert(`å·²ä¿å­˜${selectedNumbers.length}å€‹è™Ÿç¢¼åˆ°ã€Œæˆ‘çš„ä¿å­˜ã€ï¼`);
                }
            }
        }

        // è¼‰å…¥ä¿å­˜çš„é¸æ“‡
        function loadSavedSelection() {
            const saved = localStorage.getItem('savedLotteryNumbers');
            if (saved) {
                quickSelections.saved = JSON.parse(saved);
            }
        }

        // è¼‰å…¥ä¿å­˜çš„è†½è…³æŠ•æ³¨
        function loadSavedBankerSelection() {
            const saved = localStorage.getItem('savedBankerNumbers');
            if (saved) {
                return JSON.parse(saved);
            }
            return null;
        }

        // å¿«é€Ÿé¸æ“‡é è¨­çµ„åˆ
        function loadQuickSelection(type) {
            if (currentBettingMode === 'banker') {
                if (type === 'saved') {
                    const savedBanker = loadSavedBankerSelection();
                    if (!savedBanker) {
                        alert('å°šæœªä¿å­˜ä»»ä½•è†½è…³æŠ•æ³¨çµ„åˆï¼');
                        return;
                    }
                    bankerNumbers = [...savedBanker.bankerNumbers];
                    runnerNumbers = [...savedBanker.runnerNumbers];
                    updateBankerDisplay();
                    updateBankerStatus();
                } else {
                    // ç‚ºè†½è…³æŠ•æ³¨æ¨¡å¼é©é…å…¶ä»–å¿«é€Ÿé¸æ“‡
                    const numbers = quickSelections[type];
                    if (!numbers || numbers.length === 0) {
                        alert('è©²çµ„åˆæš«ç„¡æ•¸æ“šï¼');
                        return;
                    }

                    // å°‡å‰3å€‹ä½œç‚ºè†½ç¢¼ï¼Œå…¶é¤˜ä½œç‚ºè…³ç¢¼
                    bankerNumbers = numbers.slice(0, Math.min(3, numbers.length));
                    runnerNumbers = numbers.slice(3);

                    // å¦‚æœè…³ç¢¼ä¸è¶³ï¼Œå°‡éƒ¨åˆ†è†½ç¢¼ç§»åˆ°è…³ç¢¼
                    if (runnerNumbers.length === 0 && bankerNumbers.length > 1) {
                        runnerNumbers = bankerNumbers.slice(1);
                        bankerNumbers = bankerNumbers.slice(0, 1);
                    }

                    updateBankerDisplay();
                    updateBankerStatus();
                }
            } else {
                if (type === 'saved') {
                    // å¾ localStorage é‡æ–°è¼‰å…¥ä¿å­˜çš„è™Ÿç¢¼
                    const saved = localStorage.getItem('savedLotteryNumbers');
                    if (!saved) {
                        alert('å°šæœªä¿å­˜ä»»ä½•è™Ÿç¢¼çµ„åˆï¼');
                        return;
                    }
                    const savedNumbers = JSON.parse(saved);
                    quickSelections.saved = [...savedNumbers];
                    selectedNumbers = [...savedNumbers];
                    updateNumberDisplay();
                    updateSelectionStatus();
                    alert(`å·²è¼‰å…¥ä¿å­˜çš„${savedNumbers.length}å€‹è™Ÿç¢¼ï¼š${savedNumbers.sort((a, b) => a - b).join(', ')}`);
                } else {
                    const numbers = quickSelections[type];
                    if (!numbers || numbers.length === 0) {
                        alert('è©²çµ„åˆæš«ç„¡æ•¸æ“šï¼');
                        return;
                    }

                    selectedNumbers = [...numbers];
                    updateNumberDisplay();
                    updateSelectionStatus(); // é€™æœƒè‡ªå‹•è§¸ç™¼çµ±è¨ˆåˆ†ææ›´æ–°
                }
            }
        }

        // åˆå§‹åŒ–æ ¸å°ä¸­çé é¢çš„ç¯„åœé¸æ“‡ä»‹é¢
        function initializeVerificationRangeSelection() {
            // è¨­ç½®æœ€å¤§æœŸæ•¸é™åˆ¶
            const maxPeriods = lotteryData.length;
            document.getElementById('verification-start-period').max = maxPeriods;
            document.getElementById('verification-end-period').max = maxPeriods;

            // æ·»åŠ è¼¸å…¥äº‹ä»¶ç›£è½å™¨
            document.getElementById('verification-start-period').addEventListener('input', updateVerificationRangeInfo);
            document.getElementById('verification-end-period').addEventListener('input', updateVerificationRangeInfo);

            // åˆå§‹åŒ–ç¯„åœè³‡è¨Š
            updateVerificationRangeInfo();
        }

        // è¨­ç½®æ ¸å°ä¸­çé é¢çš„å¿«é€Ÿç¯„åœé¸æ“‡
        function setVerificationQuickRange(start, end) {
            document.getElementById('verification-start-period').value = start;
            document.getElementById('verification-end-period').value = end;
            updateVerificationRangeInfo();

            // ç«‹å³æ›´æ–°çµ±è¨ˆåˆ†æï¼ˆå¿«é€Ÿé¸æ“‡ä¸éœ€è¦å»¶é²ï¼‰
            if (document.getElementById('verification').classList.contains('active')) {
                loadVerification();
            }
        }

        // æ›´æ–°æ ¸å°ä¸­çé é¢çš„ç¯„åœè³‡è¨Šé¡¯ç¤º
        function updateVerificationRangeInfo() {
            const startPeriod = parseInt(document.getElementById('verification-start-period').value) || 1;
            const endPeriod = parseInt(document.getElementById('verification-end-period').value) || 1;

            const periodCount = Math.max(0, endPeriod - startPeriod + 1);

            document.getElementById('verification-period-count').textContent = `çµ±è¨ˆæœŸæ•¸ï¼š${periodCount}æœŸ`;
            document.getElementById('verification-period-range').textContent = `ç¯„åœï¼šç¬¬${startPeriod}æœŸ è‡³ ç¬¬${endPeriod}æœŸ`;
        }

        // æ–°çš„è¤‡å¼ä¸­çè¨ˆç®—å‡½æ•¸
        function calculateComplexWinnings() {
            let allCombinations;
            let totalCombinations;
            let analysisNumbers;

            // æ ¹æ“šæŠ•æ³¨æ¨¡å¼é©—è­‰å’Œç”Ÿæˆçµ„åˆ
            if (currentBettingMode === 'banker') {
                // è†½è…³æŠ•æ³¨æ¨¡å¼é©—è­‰
                if (bankerNumbers.length < 1 || bankerNumbers.length > 5) {
                    alert('è«‹é¸æ“‡1-5å€‹è†½ç¢¼ï¼');
                    return;
                }
                if (runnerNumbers.length < 1) {
                    alert('è«‹è‡³å°‘é¸æ“‡1å€‹è…³ç¢¼ï¼');
                    return;
                }
                const needFromRunner = 6 - bankerNumbers.length;
                if (needFromRunner > runnerNumbers.length) {
                    alert('è†½ç¢¼å’Œè…³ç¢¼çµ„åˆä¸è¶³6å€‹è™Ÿç¢¼ï¼');
                    return;
                }

                analysisNumbers = [...bankerNumbers, ...runnerNumbers].sort((a, b) => a - b);
                allCombinations = generateBankerCombinations(bankerNumbers, runnerNumbers);
                totalCombinations = allCombinations.length;
            } else {
                // è¤‡å¼æŠ•æ³¨æ¨¡å¼é©—è­‰
                if (selectedNumbers.length < 6) {
                    alert('è«‹è‡³å°‘é¸æ“‡6å€‹è™Ÿç¢¼ï¼');
                    return;
                }

                analysisNumbers = [...selectedNumbers];
                allCombinations = getCombinations(selectedNumbers, 6);
                totalCombinations = allCombinations.length;
            }

            // ç²å–æœŸæ•¸ç¯„åœ
            const startPeriod = parseInt(document.getElementById('verification-start-period').value) || 1;
            const endPeriod = parseInt(document.getElementById('verification-end-period').value) || 40;

            if (startPeriod > endPeriod) {
                alert('é–‹å§‹æœŸæ•¸ä¸èƒ½å¤§æ–¼çµæŸæœŸæ•¸ï¼');
                return;
            }

            if (endPeriod > lotteryData.length) {
                alert(`çµæŸæœŸæ•¸ä¸èƒ½è¶…éè³‡æ–™ç¯„åœï¼ç›®å‰æœ€å¤§æœŸæ•¸ç‚º ${lotteryData.length}`);
                return;
            }

            // çé‡‘æ¨™æº–
            const prizeAmounts = {
                first: 8000000,   // é ­çï¼š$8,000,000
                second: 1000000,  // äºŒçï¼š$1,000,000
                third: 35000,     // ä¸‰çï¼š$35,000
                fourth: 9600,     // å››çï¼š$9,600
                fifth: 640,       // äº”çï¼š$640
                sixth: 320,       // å…­çï¼š$320
                seventh: 40       // ä¸ƒçï¼š$40
            };

            const betCost = 10; // æ¯æ³¨æˆæœ¬ï¼š$10

            // è¨ˆç®—é¸å®šç¯„åœå…§çš„ä¸­çæƒ…æ³
            const startIndex = startPeriod - 1;
            const endIndex = endPeriod;
            const selectedData = lotteryData.slice(startIndex, endIndex);

            let totalWinnings = {
                first: 0, second: 0, third: 0, fourth: 0, fifth: 0, sixth: 0, seventh: 0
            };

            let totalWinCount = {
                first: 0, second: 0, third: 0, fourth: 0, fifth: 0, sixth: 0, seventh: 0
            };

            // æª¢æŸ¥æ¯æœŸçš„ä¸­çæƒ…æ³
            selectedData.forEach(draw => {
                const winningNumbers = draw.numbers.sort((a, b) => a - b);
                const extraNumber = draw.extra_number;

                // æª¢æŸ¥æ¯å€‹çµ„åˆ
                allCombinations.forEach(combo => {
                    const mainMatches = combo.filter(num => winningNumbers.includes(num)).length;
                    const extraMatch = combo.includes(extraNumber);

                    // åˆ¤å®šçé …
                    if (mainMatches === 6) {
                        totalWinCount.first++;
                        totalWinnings.first += prizeAmounts.first;
                    } else if (mainMatches === 5 && extraMatch) {
                        totalWinCount.second++;
                        totalWinnings.second += prizeAmounts.second;
                    } else if (mainMatches === 5) {
                        totalWinCount.third++;
                        totalWinnings.third += prizeAmounts.third;
                    } else if (mainMatches === 4 && extraMatch) {
                        totalWinCount.fourth++;
                        totalWinnings.fourth += prizeAmounts.fourth;
                    } else if (mainMatches === 4) {
                        totalWinCount.fifth++;
                        totalWinnings.fifth += prizeAmounts.fifth;
                    } else if (mainMatches === 3 && extraMatch) {
                        totalWinCount.sixth++;
                        totalWinnings.sixth += prizeAmounts.sixth;
                    } else if (mainMatches === 3) {
                        totalWinCount.seventh++;
                        totalWinnings.seventh += prizeAmounts.seventh;
                    }
                });
            });

            // è¨ˆç®—ç¸½æŠ•æ³¨æˆæœ¬å’Œæ”¶ç›Š
            const totalCost = totalCombinations * selectedData.length * betCost;
            const totalPrize = Object.values(totalWinnings).reduce((sum, amount) => sum + amount, 0);
            const netProfit = totalPrize - totalCost;
            const roi = totalCost > 0 ? ((netProfit / totalCost) * 100) : 0;

            // é¡¯ç¤ºå½ˆçª—
            showWinningsModal({
                selectedNumbers: analysisNumbers,
                totalCombinations,
                periodRange: { start: startPeriod, end: endPeriod, count: selectedData.length },
                winCount: totalWinCount,
                winnings: totalWinnings,
                prizeAmounts,
                totalCost,
                totalPrize,
                netProfit,
                roi,
                bettingMode: currentBettingMode,
                bankerNumbers: currentBettingMode === 'banker' ? bankerNumbers : null,
                runnerNumbers: currentBettingMode === 'banker' ? runnerNumbers : null
            });
        }

        // é¡¯ç¤ºæ´¾å½©çé‡‘å½ˆçª—
        function showWinningsModal(data) {
            const modal = document.getElementById('winnings-modal');
            const detailsDiv = document.getElementById('winnings-details');

            // ç”Ÿæˆé¸æ“‡çš„è™Ÿç¢¼é¡¯ç¤º
            let selectedNumbersHtml;
            if (data.bettingMode === 'banker') {
                const bankerHtml = data.bankerNumbers.map(num =>
                    `<span class="number-ball" style="margin: 2px; background: linear-gradient(135deg, #dc3545 0%, #c82333 100%); color: white;">${num}</span>`
                ).join('');
                const runnerHtml = data.runnerNumbers.map(num =>
                    `<span class="number-ball" style="margin: 2px; background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white;">${num}</span>`
                ).join('');
                selectedNumbersHtml = `
                    <div style="margin-bottom: 10px;">
                        <strong>è†½ç¢¼ï¼š</strong>${bankerHtml}
                    </div>
                    <div>
                        <strong>è…³ç¢¼ï¼š</strong>${runnerHtml}
                    </div>
                `;
            } else {
                selectedNumbersHtml = data.selectedNumbers.map(num =>
                    `<span class="number-ball" style="margin: 2px;">${num}</span>`
                ).join('');
            }

            // ç”Ÿæˆçé …æ˜ç´°è¡¨æ ¼
            const prizeDetails = [
                { name: 'é ­ç', condition: 'ä¸­6å€‹æ­£é¸è™Ÿç¢¼', count: data.winCount.first, amount: data.prizeAmounts.first, total: data.winnings.first },
                { name: 'äºŒç', condition: 'ä¸­5å€‹æ­£é¸è™Ÿç¢¼ + ç‰¹åˆ¥è™Ÿ', count: data.winCount.second, amount: data.prizeAmounts.second, total: data.winnings.second },
                { name: 'ä¸‰ç', condition: 'ä¸­5å€‹æ­£é¸è™Ÿç¢¼', count: data.winCount.third, amount: data.prizeAmounts.third, total: data.winnings.third },
                { name: 'å››ç', condition: 'ä¸­4å€‹æ­£é¸è™Ÿç¢¼ + ç‰¹åˆ¥è™Ÿ', count: data.winCount.fourth, amount: data.prizeAmounts.fourth, total: data.winnings.fourth },
                { name: 'äº”ç', condition: 'ä¸­4å€‹æ­£é¸è™Ÿç¢¼', count: data.winCount.fifth, amount: data.prizeAmounts.fifth, total: data.winnings.fifth },
                { name: 'å…­ç', condition: 'ä¸­3å€‹æ­£é¸è™Ÿç¢¼ + ç‰¹åˆ¥è™Ÿ', count: data.winCount.sixth, amount: data.prizeAmounts.sixth, total: data.winnings.sixth },
                { name: 'ä¸ƒç', condition: 'ä¸­3å€‹æ­£é¸è™Ÿç¢¼', count: data.winCount.seventh, amount: data.prizeAmounts.seventh, total: data.winnings.seventh }
            ];

            let prizeTableHtml = '';
            prizeDetails.forEach(prize => {
                const rowClass = prize.count > 0 ? 'style="background-color: #e8f5e8;"' : '';
                prizeTableHtml += `
                    <tr ${rowClass}>
                        <td style="font-weight: 600;">${prize.name}</td>
                        <td>${prize.condition}</td>
                        <td style="color: ${prize.count > 0 ? '#28a745' : '#6c757d'}; font-weight: bold;">${prize.count}</td>
                        <td>$${prize.amount.toLocaleString()}</td>
                        <td style="color: ${prize.total > 0 ? '#28a745' : '#6c757d'}; font-weight: bold;">$${prize.total.toLocaleString()}</td>
                    </tr>
                `;
            });

            // è¨ˆç®—ç¸½ä¸­çæ³¨æ•¸
            const totalWinCount = Object.values(data.winCount).reduce((sum, count) => sum + count, 0);

            detailsDiv.innerHTML = `
                <div style="margin-bottom: 25px;">
                    <h3 style="color: #333; margin-bottom: 15px;">ğŸ“‹ æŠ•æ³¨è©³æƒ…</h3>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                        <p><strong>${data.bettingMode === 'banker' ? 'è†½è…³è™Ÿç¢¼ï¼š' : 'é¸æ“‡è™Ÿç¢¼ï¼š'}</strong>${selectedNumbersHtml}</p>
                        <p><strong>${data.bettingMode === 'banker' ? 'è†½è…³çµ„åˆï¼š' : 'è¤‡å¼çµ„åˆï¼š'}</strong>${data.bettingMode === 'banker' ?
                            `è†½ç¢¼${data.bankerNumbers.length}å€‹ + è…³ç¢¼${data.runnerNumbers.length}å€‹é¸${6-data.bankerNumbers.length}å€‹ = ${data.totalCombinations.toLocaleString()}æ³¨` :
                            `å¾${data.selectedNumbers.length}å€‹è™Ÿç¢¼ä¸­é¸6å€‹ = ${data.totalCombinations.toLocaleString()}æ³¨`}</p>
                        <p><strong>çµ±è¨ˆæœŸæ•¸ï¼š</strong>ç¬¬${data.periodRange.start}æœŸ è‡³ ç¬¬${data.periodRange.end}æœŸ (å…±${data.periodRange.count}æœŸ)</p>
                        <p><strong>ç¸½æŠ•æ³¨ï¼š</strong>${data.totalCombinations.toLocaleString()}æ³¨ Ã— ${data.periodRange.count}æœŸ Ã— $10 = $${data.totalCost.toLocaleString()}</p>
                    </div>
                </div>

                <div style="margin-bottom: 25px;">
                    <h3 style="color: #333; margin-bottom: 15px;">ğŸ† ä¸­çæ˜ç´°</h3>
                    <table style="width: 100%; border-collapse: collapse; margin-bottom: 15px;">
                        <thead>
                            <tr style="background: #007bff; color: white;">
                                <th style="padding: 12px; text-align: left;">çé …</th>
                                <th style="padding: 12px; text-align: left;">ä¸­çæ¢ä»¶</th>
                                <th style="padding: 12px; text-align: center;">ä¸­çæ³¨æ•¸</th>
                                <th style="padding: 12px; text-align: right;">å–®æ³¨çé‡‘</th>
                                <th style="padding: 12px; text-align: right;">å°è¨ˆ</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${prizeTableHtml}
                        </tbody>
                    </table>
                </div>

                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 15px; text-align: center;">
                    <h3 style="margin-bottom: 15px;">ğŸ’° æ”¶ç›Šç¸½çµ</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">ç¸½æŠ•æ³¨æˆæœ¬</div>
                            <div style="font-size: 1.3rem; font-weight: bold;">$${data.totalCost.toLocaleString()}</div>
                        </div>
                        <div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">ç¸½ä¸­çé‡‘é¡</div>
                            <div style="font-size: 1.3rem; font-weight: bold;">$${data.totalPrize.toLocaleString()}</div>
                        </div>
                        <div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">æ·¨æ”¶ç›Š</div>
                            <div style="font-size: 1.3rem; font-weight: bold; color: ${data.netProfit >= 0 ? '#90EE90' : '#FFB6C1'};">
                                ${data.netProfit >= 0 ? '+' : ''}$${data.netProfit.toLocaleString()}
                            </div>
                        </div>
                        <div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">æŠ•è³‡å›å ±ç‡</div>
                            <div style="font-size: 1.3rem; font-weight: bold; color: ${data.roi >= 0 ? '#90EE90' : '#FFB6C1'};">
                                ${data.roi >= 0 ? '+' : ''}${data.roi.toFixed(2)}%
                            </div>
                        </div>
                    </div>
                    <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.3);">
                        <p style="margin: 0; font-size: 0.9rem; opacity: 0.9;">
                            ç¸½ä¸­çæ³¨æ•¸ï¼š${totalWinCount.toLocaleString()}æ³¨ |
                            ä¸­çç‡ï¼š${((totalWinCount / (data.totalCombinations * data.periodRange.count)) * 100).toFixed(4)}%
                        </p>
                    </div>
                </div>
            `;

            modal.style.display = 'block';
        }

        // é—œé–‰æ´¾å½©çé‡‘å½ˆçª—
        function closeWinningsModal() {
            document.getElementById('winnings-modal').style.display = 'none';
        }

        // é»æ“Šå½ˆçª—å¤–éƒ¨é—œé–‰
        window.onclick = function(event) {
            const modal = document.getElementById('winnings-modal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }

        // è¨ˆç®—çµ„åˆæ•¸ï¼ˆå¾nå€‹æ•¸å­—ä¸­é¸rå€‹çš„çµ„åˆæ•¸ï¼‰
        function getCombinations(arr, size) {
            function combine(start, combo) {
                if (combo.length === size) {
                    return [combo.slice()];
                }
                
                let combinations = [];
                for (let i = start; i < arr.length; i++) {
                    combo.push(arr[i]);
                    combinations = combinations.concat(combine(i + 1, combo));
                    combo.pop();
                }
                return combinations;
            }
            
            return combine(0, []);
        }

        // ç”Ÿæˆè†½è…³æŠ•æ³¨çµ„åˆ
        function generateBankerCombinations(bankerNumbers, runnerNumbers) {
            const needFromRunner = 6 - bankerNumbers.length;
            const runnerCombinations = getCombinations(runnerNumbers, needFromRunner);

            return runnerCombinations.map(runnerCombo => {
                return [...bankerNumbers, ...runnerCombo].sort((a, b) => a - b);
            });
        }

        // è¤‡å¼æŠ•æ³¨è¨ˆç®—åŠŸèƒ½
        function calculateCustomComplex() {
            const verificationContent = document.getElementById('verification-content');
            
            try {
                // è¤‡å¼æŠ•æ³¨è™Ÿç¢¼ï¼ˆ16å€‹è™Ÿç¢¼ï¼‰
                // const complexNumbers = [5, 6, 9, 13, 19, 25, 26, 30, 32, 35, 36, 39, 40, 44, 45, 46];
                // [29,26,13,17,35,6,12,45,34,9,5,23]
                // const complexNumbers = [3, 7, 11, 12, 13, 20, 21, 22, 23, 24, 27, 30];
                // const complexNumbers = [25,6,12,19,22,26,27,29,32,34,46];
                //  const complexNumbers = [22,11,23,25,26,29,32,34,19,31,35];
                const complexNumbers = [3, 7, 11, 13, 20, 21, 22, 23, 24, 27, 30];

                // ç”Ÿæˆæ‰€æœ‰è¤‡å¼çµ„åˆï¼ˆå¾16å€‹è™Ÿç¢¼ä¸­é¸6å€‹ï¼‰
                const allCombinations = getCombinations(complexNumbers, 6);
                
                const totalCombinations = allCombinations.length; // æ‡‰è©²æ˜¯8008æ³¨
                
                // æª¢æŸ¥æœ€æ–°10æœŸçš„ä¸­çæƒ…æ³
                const latestData = lotteryData.slice(0, 40); // æœ€æ–°10æœŸ
                const prizeResults = [];
                
                latestData.forEach((draw, drawIndex) => {
                    const winningNumbers = draw.numbers.sort((a, b) => a - b);
                    const extraNumber = draw.extra_number;
                    
                    let firstPrize = 0;  // é ­çï¼š6å€‹æ­£é¸è™Ÿç¢¼å…¨ä¸­
                    let secondPrize = 0; // äºŒçï¼š5å€‹æ­£é¸è™Ÿç¢¼ + ç‰¹åˆ¥è™Ÿ
                    let thirdPrize = 0;  // ä¸‰çï¼š5å€‹æ­£é¸è™Ÿç¢¼
                    let fourPrize = 0;  // å››çï¼š4å€‹æ­£é¸è™Ÿç¢¼ + ç‰¹åˆ¥è™Ÿ
                    let fivePrize = 0;  // äº”çï¼š4å€‹æ­£é¸è™Ÿç¢¼ + ç‰¹åˆ¥è™Ÿ
                    let sixPrize = 0;  // å…­çï¼š4å€‹æ­£é¸è™Ÿç¢¼ + ç‰¹åˆ¥è™Ÿ
                    let sevenPrize = 0;  // ä¸ƒçï¼š4å€‹æ­£é¸è™Ÿç¢¼ + ç‰¹åˆ¥è™Ÿ
                    
                    // æª¢æŸ¥æ¯å€‹çµ„åˆ
                    allCombinations.forEach(combo => {
                        // è¨ˆç®—æ­£é¸è™Ÿç¢¼åŒ¹é…æ•¸
                        const mainMatches = combo.filter(num => winningNumbers.includes(num)).length;
                        
                        // è¨ˆç®—ç‰¹åˆ¥è™ŸåŒ¹é…
                        const extraMatch = combo.includes(extraNumber);
                        
                        // åˆ¤å®šçé …
                        if (mainMatches === 6) {
                            firstPrize++;
                        } else if (mainMatches === 5 && extraMatch) {
                            secondPrize++;
                        } else if (mainMatches === 5) {
                            thirdPrize++;
                        } else if (mainMatches === 4 && extraMatch) {
                            fourPrize++;
                        } else if (mainMatches === 4) {
                            fivePrize++;
                        } else if (mainMatches === 3 && extraMatch) {
                            sixPrize++;
                        }else if (mainMatches === 3) {
                            sevenPrize++;
                        }
                    });
                    
                    prizeResults.push({
                        drawNumber: draw.draw_number,
                        drawDate: draw.draw_date,
                        winningNumbers: winningNumbers,
                        extraNumber: extraNumber,
                        firstPrize,
                        secondPrize,
                        thirdPrize,
                        fourPrize,
                        fivePrize,
                        sixPrize,
                        sevenPrize
                    });
                });
                
                // è¨ˆç®—ç¸½ä¸­ççµ±è¨ˆ
                const totalStats = {
                    firstPrize: prizeResults.reduce((sum, result) => sum + result.firstPrize, 0),
                    secondPrize: prizeResults.reduce((sum, result) => sum + result.secondPrize, 0),
                    thirdPrize: prizeResults.reduce((sum, result) => sum + result.thirdPrize, 0),
                    fourPrize: prizeResults.reduce((sum, result) => sum + result.fourPrize, 0),
                    fivePrize: prizeResults.reduce((sum, result) => sum + result.fivePrize, 0),
                    sixPrize: prizeResults.reduce((sum, result) => sum + result.sixPrize, 0),
                    sevenPrize: prizeResults.reduce((sum, result) => sum + result.sevenPrize, 0)
                };
                
                // ç”Ÿæˆé¡¯ç¤ºå…§å®¹
                let html = `
                    <div style="text-align: center; margin-bottom: 30px;">
                        <p style="color: #666; font-size: 1.1rem;">
                            è¤‡å¼æŠ•æ³¨çµæœï¼šå¾11å€‹è™Ÿç¢¼ä¸­é¸6å€‹çš„æ‰€æœ‰çµ„åˆ<br>
                            ç¸½å…±${totalCombinations}æ³¨ï¼Œæª¢æŸ¥æœ€æ–°10æœŸçš„ä¸­çæƒ…æ³
                        </p>
                        <div style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                            <strong>æŠ•æ³¨è©³æƒ…ï¼š</strong> 
                            <span style="color: #007bff; font-weight: bold;">11å€‹è™Ÿç¢¼è¤‡å¼æŠ•æ³¨</span> 
                            <span style="color: #28a745; font-weight: bold;">C(11,6) = ${totalCombinations}æ³¨</span>
                        </div>
                    </div>
                    
                    <!-- ç¸½çµ±è¨ˆ -->
                    <div style="display: flex; justify-content: center; gap: 20px; margin-bottom: 30px; flex-wrap: wrap;">
                        <div style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%); color: white; padding: 15px 25px; border-radius: 12px; text-align: center; min-width: 120px;">
                            <div style="font-size: 1.5rem; font-weight: bold;">${totalStats.firstPrize}</div>
                            <div style="font-size: 0.9rem;">é ­çæ¬¡æ•¸</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #fd7e14 0%, #e55a00 100%); color: white; padding: 15px 25px; border-radius: 12px; text-align: center; min-width: 120px;">
                            <div style="font-size: 1.5rem; font-weight: bold;">${totalStats.secondPrize}</div>
                            <div style="font-size: 0.9rem;">äºŒçæ¬¡æ•¸</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%); color: white; padding: 15px 25px; border-radius: 12px; text-align: center; min-width: 120px;">
                            <div style="font-size: 1.5rem; font-weight: bold;">${totalStats.thirdPrize}</div>
                            <div style="font-size: 0.9rem;">ä¸‰çæ¬¡æ•¸</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%); color: white; padding: 15px 25px; border-radius: 12px; text-align: center; min-width: 120px;">
                            <div style="font-size: 1.5rem; font-weight: bold;">${totalStats.fourPrize}</div>
                            <div style="font-size: 0.9rem;">å››çæ¬¡æ•¸</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%); color: white; padding: 15px 25px; border-radius: 12px; text-align: center; min-width: 120px;">
                            <div style="font-size: 1.5rem; font-weight: bold;">${totalStats.fivePrize}</div>
                            <div style="font-size: 0.9rem;">äº”çæ¬¡æ•¸</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%); color: white; padding: 15px 25px; border-radius: 12px; text-align: center; min-width: 120px;">
                            <div style="font-size: 1.5rem; font-weight: bold;">${totalStats.sixPrize}</div>
                            <div style="font-size: 0.9rem;">å…­çæ¬¡æ•¸</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%); color: white; padding: 15px 25px; border-radius: 12px; text-align: center; min-width: 120px;">
                            <div style="font-size: 1.5rem; font-weight: bold;">${totalStats.sevenPrize}</div>
                            <div style="font-size: 0.9rem;">ä¸ƒçæ¬¡æ•¸</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #6f42c1 0%, #5a32a3 100%); color: white; padding: 15px 25px; border-radius: 12px; text-align: center; min-width: 120px;">
                            <div style="font-size: 1.5rem; font-weight: bold;">${totalCombinations}</div>
                            <div style="font-size: 0.9rem;">ç¸½æ³¨æ•¸</div>
                        </div>
                    </div>
                    
                    <!-- è©³ç´°çµæœ -->
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th>æœŸè™Ÿ</th>
                                <th>é–‹çæ—¥æœŸ</th>
                                <th>é–‹çè™Ÿç¢¼</th>
                                <th>ç‰¹åˆ¥è™Ÿ</th>
                                <th>é ­ç</th>
                                <th>äºŒç</th>
                                <th>ä¸‰ç</th>
                                <th>å››ç</th>
                                <th>äº”ç</th>
                                <th>å…­ç</th>
                                <th>ä¸ƒç</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                
                prizeResults.forEach(result => {
                    const numbers = result.winningNumbers.map(num => 
                        `<span class="number-ball">${num}</span>`
                    ).join('');
                    
                    html += `
                        <tr>
                            <td>${result.drawNumber}</td>
                            <td>${result.drawDate}</td>
                            <td>${numbers}</td>
                            <td><span class="number-ball extra-number-ball">${result.extraNumber}</span></td>
                            <td style="color: ${result.firstPrize > 0 ? '#dc3545' : '#6c757d'}; font-weight: bold;">${result.firstPrize}</td>
                            <td style="color: ${result.secondPrize > 0 ? '#fd7e14' : '#6c757d'}; font-weight: bold;">${result.secondPrize}</td>
                            <td style="color: ${result.thirdPrize > 0 ? '#ffc107' : '#6c757d'}; font-weight: bold;">${result.thirdPrize}</td>
                            <td style="color: ${result.fourPrize > 0 ? '#dc3545' : '#6c757d'}; font-weight: bold;">${result.fourPrize}</td>
                            <td style="color: ${result.fivePrize > 0 ? '#fd7e14' : '#6c757d'}; font-weight: bold;">${result.fivePrize}</td>
                            <td style="color: ${result.sixPrize > 0 ? '#ffc107' : '#6c757d'}; font-weight: bold;">${result.sixPrize}</td>
                            <td style="color: ${result.sevenPrize > 0 ? '#ffc107' : '#6c757d'}; font-weight: bold;">${result.sevenPrize}</td>
                        </tr>
                    `;
                });
                
                html += '</tbody></table>';
                
                verificationContent.innerHTML = html;
                
            } catch (error) {
                console.error('Error calculating complex:', error);
                verificationContent.innerHTML = '<div class="error">è¨ˆç®—è¤‡å¼æŠ•æ³¨æ™‚å‡ºç¾éŒ¯èª¤</div>';
            }
        }

        // æ ¸å°ä¸­çåŠŸèƒ½ - çµ±è¨ˆåˆ†æ
        function loadVerification() {
            const verificationContent = document.getElementById('verification-content');

            try {
                // ç²å–ç”¨æˆ¶è¨­å®šçš„æœŸæ•¸ç¯„åœ
                const startPeriod = parseInt(document.getElementById('verification-start-period').value) || 1;
                const endPeriod = parseInt(document.getElementById('verification-end-period').value) || 40;

                if (startPeriod > endPeriod) {
                    verificationContent.innerHTML = '<div class="error">é–‹å§‹æœŸæ•¸ä¸èƒ½å¤§æ–¼çµæŸæœŸæ•¸ï¼</div>';
                    return;
                }

                if (endPeriod > lotteryData.length) {
                    verificationContent.innerHTML = `<div class="error">çµæŸæœŸæ•¸ä¸èƒ½è¶…éè³‡æ–™ç¯„åœï¼ç›®å‰æœ€å¤§æœŸæ•¸ç‚º ${lotteryData.length}</div>`;
                    return;
                }

                // æ ¹æ“šæŠ•æ³¨æ¨¡å¼ç²å–åˆ†æè™Ÿç¢¼
                let analysisNumbers;
                let allCombinations;
                let totalCombinations;

                if (currentBettingMode === 'banker') {
                    // è†½è…³æŠ•æ³¨æ¨¡å¼
                    if (bankerNumbers.length >= 1 && bankerNumbers.length <= 5 && runnerNumbers.length >= 1) {
                        const needFromRunner = 6 - bankerNumbers.length;
                        if (needFromRunner <= runnerNumbers.length) {
                            analysisNumbers = [...bankerNumbers, ...runnerNumbers].sort((a, b) => a - b);
                            // ç”Ÿæˆè†½è…³çµ„åˆ
                            allCombinations = generateBankerCombinations(bankerNumbers, runnerNumbers);
                            totalCombinations = allCombinations.length;
                            
                            // é©—è­‰çµ„åˆæ•¸è¨ˆç®—æ˜¯å¦æ­£ç¢º
                            const expectedCombinations = getCombinationCount(runnerNumbers.length, needFromRunner);
                            if (totalCombinations !== expectedCombinations) {
                                console.warn(`è†½è…³æŠ•æ³¨çµ„åˆæ•¸ä¸ä¸€è‡´ï¼šå¯¦éš›=${totalCombinations}, ç†è«–=${expectedCombinations}`);
                                // ä½¿ç”¨ç†è«–å€¼ç¢ºä¿æ­£ç¢ºæ€§
                                totalCombinations = expectedCombinations;
                            }
                        } else {
                            verificationContent.innerHTML = '<div class="error">è†½ç¢¼å’Œè…³ç¢¼çµ„åˆä¸è¶³6å€‹è™Ÿç¢¼ï¼</div>';
                            return;
                        }
                    } else {
                        verificationContent.innerHTML = '<div class="error">è«‹é¸æ“‡1-5å€‹è†½ç¢¼å’Œè‡³å°‘1å€‹è…³ç¢¼ï¼</div>';
                        return;
                    }
                } else if (selectedNumbers.length >= 6) {
                    // è¤‡å¼æŠ•æ³¨æ¨¡å¼ - ä½¿ç”¨ç”¨æˆ¶é¸æ“‡çš„è™Ÿç¢¼
                    analysisNumbers = [...selectedNumbers];
                    allCombinations = getCombinations(analysisNumbers, 6);
                    totalCombinations = allCombinations.length;
                } else {
                    // æ ¹æ“šæŒ‡å®šæœŸæ•¸ç¯„åœçµ±è¨ˆé¸å‡ºæœ€ç†±é–€çš„10å€‹è™Ÿç¢¼
                    const startIndex = startPeriod - 1;
                    const endIndex = endPeriod;
                    const analysisData = lotteryData.slice(startIndex, endIndex);
                    const numberFreq = {};

                    // åˆå§‹åŒ–1-49çš„é »ç‡ç‚º0
                    for (let i = 1; i <= 49; i++) {
                        numberFreq[i] = 0;
                    }

                    // è¨ˆç®—è™Ÿç¢¼é »ç‡ï¼ˆåŒ…å«ç‰¹åˆ¥è™Ÿï¼‰
                    analysisData.forEach(row => {
                        row.numbers.forEach(num => {
                            numberFreq[num]++;
                        });
                        // ç‰¹åˆ¥è™Ÿä¹Ÿè¨ˆå…¥çµ±è¨ˆ
                        numberFreq[row.extra_number]++;
                    });

                    // è½‰æ›ç‚ºé™£åˆ—ä¸¦æŒ‰é »ç‡æ’åºï¼Œå–å‰10å
                    const sortedNumbers = Object.entries(numberFreq)
                        .map(([num, freq]) => ({
                            number: parseInt(num),
                            frequency: freq
                        }))
                        .sort((a, b) => b.frequency - a.frequency)
                        .slice(0, 10);

                    analysisNumbers = sortedNumbers.map(item => item.number);
                    // ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„6å€‹è™Ÿç¢¼çµ„åˆ
                    allCombinations = getCombinations(analysisNumbers, 6);
                    totalCombinations = allCombinations.length;
                }

                // è¨ˆç®—æŒ‡å®šæœŸæ•¸ç¯„åœå…§çš„ä¸­çæƒ…æ³
                const startIndex = startPeriod - 1;
                const endIndex = endPeriod;
                const selectedData = lotteryData.slice(startIndex, endIndex);
                const prizeResults = [];

                // çé‡‘æ¨™æº–
                const prizeAmounts = {
                    first: 8000000,   // é ­çï¼š$8,000,000
                    second: 1000000,  // äºŒçï¼š$1,000,000
                    third: 35000,     // ä¸‰çï¼š$35,000
                    fourth: 9600,     // å››çï¼š$9,600
                    fifth: 640,       // äº”çï¼š$640
                    sixth: 320,       // å…­çï¼š$320
                    seventh: 40       // ä¸ƒçï¼š$40
                };

                selectedData.forEach((draw, drawIndex) => {
                    const winningNumbers = draw.numbers.sort((a, b) => a - b);
                    const extraNumber = draw.extra_number;

                    let firstPrize = 0;   // é ­çï¼š6å€‹æ­£é¸è™Ÿç¢¼å…¨ä¸­
                    let secondPrize = 0;  // äºŒçï¼š5å€‹æ­£é¸è™Ÿç¢¼ + ç‰¹åˆ¥è™Ÿ
                    let thirdPrize = 0;   // ä¸‰çï¼š5å€‹æ­£é¸è™Ÿç¢¼
                    let fourthPrize = 0;  // å››çï¼š4å€‹æ­£é¸è™Ÿç¢¼ + ç‰¹åˆ¥è™Ÿ
                    let fifthPrize = 0;   // äº”çï¼š4å€‹æ­£é¸è™Ÿç¢¼
                    let sixthPrize = 0;   // å…­çï¼š3å€‹æ­£é¸è™Ÿç¢¼ + ç‰¹åˆ¥è™Ÿ
                    let seventhPrize = 0; // ä¸ƒçï¼š3å€‹æ­£é¸è™Ÿç¢¼

                    // æª¢æŸ¥æ¯å€‹çµ„åˆ
                    allCombinations.forEach(combo => {
                        const sortedCombo = combo.sort((a, b) => a - b);

                        // è¨ˆç®—æ­£é¸è™Ÿç¢¼åŒ¹é…æ•¸
                        const mainMatches = sortedCombo.filter(num => winningNumbers.includes(num)).length;

                        // è¨ˆç®—ç‰¹åˆ¥è™ŸåŒ¹é…
                        const extraMatch = sortedCombo.includes(extraNumber);

                        // åˆ¤å®šçé …
                        if (mainMatches === 6) {
                            firstPrize++;
                        } else if (mainMatches === 5 && extraMatch) {
                            secondPrize++;
                        } else if (mainMatches === 5) {
                            thirdPrize++;
                        } else if (mainMatches === 4 && extraMatch) {
                            fourthPrize++;
                        } else if (mainMatches === 4) {
                            fifthPrize++;
                        } else if (mainMatches === 3 && extraMatch) {
                            sixthPrize++;
                        } else if (mainMatches === 3) {
                            seventhPrize++;
                        }
                    });

                    prizeResults.push({
                        drawNumber: draw.draw_number,
                        drawDate: draw.draw_date,
                        winningNumbers: winningNumbers,
                        extraNumber: extraNumber,
                        firstPrize,
                        secondPrize,
                        thirdPrize,
                        fourthPrize,
                        fifthPrize,
                        sixthPrize,
                        seventhPrize
                    });
                });

                // è¨ˆç®—ç¸½ä¸­çæ¬¡æ•¸å’Œç¸½çé‡‘
                const totals = {
                    first: prizeResults.reduce((sum, result) => sum + result.firstPrize, 0),
                    second: prizeResults.reduce((sum, result) => sum + result.secondPrize, 0),
                    third: prizeResults.reduce((sum, result) => sum + result.thirdPrize, 0),
                    fourth: prizeResults.reduce((sum, result) => sum + result.fourthPrize, 0),
                    fifth: prizeResults.reduce((sum, result) => sum + result.fifthPrize, 0),
                    sixth: prizeResults.reduce((sum, result) => sum + result.sixthPrize, 0),
                    seventh: prizeResults.reduce((sum, result) => sum + result.seventhPrize, 0)
                };

                const totalWinnings =
                    totals.first * prizeAmounts.first +
                    totals.second * prizeAmounts.second +
                    totals.third * prizeAmounts.third +
                    totals.fourth * prizeAmounts.fourth +
                    totals.fifth * prizeAmounts.fifth +
                    totals.sixth * prizeAmounts.sixth +
                    totals.seventh * prizeAmounts.seventh;

                const totalCost = totalCombinations * selectedData.length * 10; // æ¯æ³¨$10
                const netProfit = totalWinnings - totalCost;

                // ç”Ÿæˆé¡¯ç¤ºå…§å®¹
                let html = `
                    <div style="text-align: center; margin-bottom: 30px;">
                        <p style="color: #666; font-size: 1.1rem;">
                            ${currentBettingMode === 'banker' ? 'ä½¿ç”¨æ‚¨é¸æ“‡çš„è†½è…³æŠ•æ³¨è™Ÿç¢¼' :
                              (selectedNumbers.length >= 6 ? 'ä½¿ç”¨æ‚¨é¸æ“‡çš„è™Ÿç¢¼' : `æ ¹æ“šç¬¬${startPeriod}æœŸè‡³ç¬¬${endPeriod}æœŸçµ±è¨ˆé¸å‡ºæœ€ç†±é–€çš„${analysisNumbers.length}å€‹è™Ÿç¢¼`)}<br>
                            æ¨¡æ“¬${currentBettingMode === 'banker' ? 'è†½è…³' : 'è¤‡å¼'}æŠ•æ³¨ï¼ˆ${totalCombinations.toLocaleString()}æ³¨ï¼‰ï¼Œçµ±è¨ˆç¬¬${startPeriod}æœŸè‡³ç¬¬${endPeriod}æœŸçš„ä¸­çæƒ…æ³
                        </p>
                        <div style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                            <strong>åˆ†æè™Ÿç¢¼ï¼š</strong>
                `;

                // å°‡åˆ†æè™Ÿç¢¼æ’åºå¾Œé¡¯ç¤º
                analysisNumbers.sort((a, b) => a - b).forEach(num => {
                    html += `<span class="number-ball" style="margin: 2px;">${num}</span>`;
                });

                html += `
                        </div>
                        <div style="margin: 15px 0; color: #666;">
                            <strong>çµ±è¨ˆç¯„åœï¼š</strong>ç¬¬${startPeriod}æœŸ è‡³ ç¬¬${endPeriod}æœŸ (å…±${selectedData.length}æœŸ) |
                            <strong>ç¸½æŠ•æ³¨æˆæœ¬ï¼š</strong>$${totalCost.toLocaleString()} |
                            <strong>ç¸½çé‡‘ï¼š</strong>$${totalWinnings.toLocaleString()} |
                            <strong>æ·¨æ”¶ç›Šï¼š</strong><span style="color: ${netProfit >= 0 ? '#28a745' : '#dc3545'}; font-weight: bold;">${netProfit >= 0 ? '+' : ''}$${netProfit.toLocaleString()}</span>
                        </div>
                    </div>
                `;

                // çµ±è¨ˆæ‘˜è¦ - ä¸ƒå€‹çé …
                html += `
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px; margin-bottom: 30px;">
                        <div style="background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%); color: white; padding: 15px; border-radius: 12px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 5px;">${totals.first}</div>
                            <div style="font-size: 0.8rem;">é ­çæ¬¡æ•¸</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #ffa726 0%, #fb8c00 100%); color: white; padding: 15px; border-radius: 12px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 5px;">${totals.second}</div>
                            <div style="font-size: 0.8rem;">äºŒçæ¬¡æ•¸</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #42a5f5 0%, #1e88e5 100%); color: white; padding: 15px; border-radius: 12px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 5px;">${totals.third}</div>
                            <div style="font-size: 0.8rem;">ä¸‰çæ¬¡æ•¸</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #ab47bc 0%, #8e24aa 100%); color: white; padding: 15px; border-radius: 12px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 5px;">${totals.fourth}</div>
                            <div style="font-size: 0.8rem;">å››çæ¬¡æ•¸</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #26c6da 0%, #00acc1 100%); color: white; padding: 15px; border-radius: 12px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 5px;">${totals.fifth}</div>
                            <div style="font-size: 0.8rem;">äº”çæ¬¡æ•¸</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #ffc107 0%, #ff8f00 100%); color: white; padding: 15px; border-radius: 12px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 5px;">${totals.sixth}</div>
                            <div style="font-size: 0.8rem;">å…­çæ¬¡æ•¸</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #66bb6a 0%, #43a047 100%); color: white; padding: 15px; border-radius: 12px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 5px;">${totals.seventh}</div>
                            <div style="font-size: 0.8rem;">ä¸ƒçæ¬¡æ•¸</div>
                        </div>
                    </div>
                `;

                // è©³ç´°çµæœè¡¨æ ¼
                html += `
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th>æœŸè™Ÿ</th>
                                <th>é–‹çæ—¥æœŸ</th>
                                <th>é–‹çè™Ÿç¢¼</th>
                                <th>ç‰¹åˆ¥è™Ÿ</th>
                                <th>é ­ç</th>
                                <th>äºŒç</th>
                                <th>ä¸‰ç</th>
                                <th>å››ç</th>
                                <th>äº”ç</th>
                                <th>å…­ç</th>
                                <th>ä¸ƒç</th>
                            </tr>
                        </thead>
                        <tbody>
                `;

                prizeResults.forEach(result => {
                    const numbers = result.winningNumbers.map(num =>
                        `<span class="number-ball">${num}</span>`
                    ).join('');

                    html += `
                        <tr>
                            <td>${result.drawNumber}</td>
                            <td>${result.drawDate}</td>
                            <td>${numbers}</td>
                            <td><span class="number-ball extra-number-ball">${result.extraNumber}</span></td>
                            <td style="color: ${result.firstPrize > 0 ? '#ff4757' : '#6c757d'}; font-weight: bold;">${result.firstPrize}</td>
                            <td style="color: ${result.secondPrize > 0 ? '#ffa502' : '#6c757d'}; font-weight: bold;">${result.secondPrize}</td>
                            <td style="color: ${result.thirdPrize > 0 ? '#3742fa' : '#6c757d'}; font-weight: bold;">${result.thirdPrize}</td>
                            <td style="color: ${result.fourthPrize > 0 ? '#8e44ad' : '#6c757d'}; font-weight: bold;">${result.fourthPrize}</td>
                            <td style="color: ${result.fifthPrize > 0 ? '#00cec9' : '#6c757d'}; font-weight: bold;">${result.fifthPrize}</td>
                            <td style="color: ${result.sixthPrize > 0 ? '#ffc107' : '#6c757d'}; font-weight: bold;">${result.sixthPrize}</td>
                            <td style="color: ${result.seventhPrize > 0 ? '#2ecc71' : '#6c757d'}; font-weight: bold;">${result.seventhPrize}</td>
                        </tr>
                    `;
                });

                html += '</tbody></table>';

                verificationContent.innerHTML = html;
                
            } catch (error) {
                console.error('Error loading verification:', error);
                verificationContent.innerHTML = '<div class="error">è¼‰å…¥æ ¸å°æ•¸æ“šæ™‚å‡ºç¾éŒ¯èª¤</div>';
            }
        }

        // é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadResults();
            // å¦‚æœç•¶å‰åœ¨çµ±è¨ˆæ¨™ç±¤é ï¼Œåˆå§‹åŒ–ç¯„åœé¸æ“‡
            if (document.getElementById('statistics').classList.contains('active')) {
                initializeRangeSelection();
            }
            // å¦‚æœç•¶å‰åœ¨æ ¸å°ä¸­çæ¨™ç±¤é ï¼Œåˆå§‹åŒ–è™Ÿç¢¼é¸æ“‡å’Œç¯„åœé¸æ“‡
            if (document.getElementById('verification').classList.contains('active')) {
                initializeNumberSelection();
                initializeVerificationRangeSelection();
                // å¦‚æœæ˜¯è†½è…³æŠ•æ³¨æ¨¡å¼ï¼Œä¹Ÿåˆå§‹åŒ–è†½è…³ç¶²æ ¼
                if (currentBettingMode === 'banker') {
                    initializeBankerGrids();
                }
                loadVerification();
            }
            // å¦‚æœç•¶å‰åœ¨æ±Ÿæ©èºæ—‹å››æ–¹åœ–æ¨™ç±¤é ï¼Œåˆå§‹åŒ–æ±Ÿæ©åœ–
            if (document.getElementById('gann-square').classList.contains('active')) {
                initializeGannSquare();
            }
        });

        // ========================================
        // é«˜é »è™Ÿç¢¼ç¯©é¸åŠŸèƒ½
        // ========================================
        
        let currentFilteredNumbers = []; // å„²å­˜ç•¶å‰ç¯©é¸çµæœ
        let filterHistory = []; // å„²å­˜ç¯©é¸æ­·å²è¨˜éŒ„
        
        // getRandom6 å‡½æ•¸ï¼šå¾é™£åˆ—ä¸­éš¨æ©ŸæŠ½å– 6 å€‹è™Ÿç¢¼
        function getRandom6(arr) {
            if (!Array.isArray(arr)) return [];
            if (arr.length <= 6) return [...arr]; // å¦‚æœå°‘æ–¼ç­‰æ–¼6å€‹ï¼Œç›´æ¥å›å‚³å…¨éƒ¨

            const copy = [...arr]; // è¤‡è£½ä¸€ä»½ï¼Œé¿å…ä¿®æ”¹åŸé™£åˆ—
            // Fisher-Yates æ´—ç‰Œï¼ˆå¾å¾Œå¾€å‰ï¼‰
            for (let i = copy.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [copy[i], copy[j]] = [copy[j], copy[i]];
            }
            return copy.slice(0, 6); // å–æ´—ç‰Œå¾Œçš„å‰6å€‹
        }
        
        // ç¯©é¸é«˜é »è™Ÿç¢¼ä¸»å‡½æ•¸
        function filterHighFrequencyNumbers() {
            // å–å¾—ç•¶å‰é¸æ“‡çš„æœŸæ•¸ç¯„åœ
            const startPeriod = parseInt(document.getElementById('start-period').value) || 1;
            const endPeriod = parseInt(document.getElementById('end-period').value) || 1;

            if (startPeriod > endPeriod) {
                alert('é–‹å§‹æœŸæ•¸ä¸èƒ½å¤§æ–¼çµæŸæœŸæ•¸ï¼');
                return;
            }

            if (endPeriod > lotteryData.length) {
                alert(`çµæŸæœŸæ•¸ä¸èƒ½è¶…éè³‡æ–™ç¯„åœï¼ç›®å‰æœ€å¤§æœŸæ•¸ç‚º ${lotteryData.length}`);
                return;
            }

            // è¨ˆç®—è™Ÿç¢¼çµ±è¨ˆ
            const numberFreq = {};

            // åˆå§‹åŒ–1-49çš„é »ç‡ç‚º0
            for (let i = 1; i <= 49; i++) {
                numberFreq[i] = 0;
            }

            // è¨ˆç®—é¸å®šç¯„åœå…§çš„è™Ÿç¢¼é »ç‡
            const startIndex = startPeriod - 1;
            const endIndex = endPeriod;
            const selectedData = lotteryData.slice(startIndex, endIndex);

            selectedData.forEach(row => {
                row.numbers.forEach(num => {
                    numberFreq[num]++;
                });
                // ç‰¹åˆ¥è™Ÿä¹Ÿè¨ˆå…¥çµ±è¨ˆ
                numberFreq[row.extra_number]++;
            });

            // æ‰¾å‡ºå‡ºç¾æ¬¡æ•¸æœ€å¤šçš„è™Ÿç¢¼æ¬¡æ•¸
            let maxFrequency = 0;
            for (let num in numberFreq) {
                if (numberFreq[num] > maxFrequency) {
                    maxFrequency = numberFreq[num];
                }
            }

            // è¨ˆç®—é–€æª»å€¼ï¼ˆä¸€åŠæ¬¡æ•¸ï¼‰
            const threshold = Math.floor(maxFrequency / 2);

            // ç¯©é¸å‡ºç¬¦åˆæ¢ä»¶çš„è™Ÿç¢¼
            currentFilteredNumbers = [];
            for (let num = 1; num <= 49; num++) {
                if (numberFreq[num] >= threshold) {
                    currentFilteredNumbers.push(num);
                }
            }

            // æ’åºï¼ˆæŒ‰è™Ÿç¢¼å¤§å°ï¼‰
            currentFilteredNumbers.sort((a, b) => a - b);

            // é¡¯ç¤ºçµæœ
            displayFilterResults(startPeriod, endPeriod, maxFrequency, threshold, currentFilteredNumbers);
        }

        // è¨ˆç®—çµ„åˆæ•¸ C(n, k)
        function combination(n, k) {
            if (k > n || k < 0) return 0;
            if (k === 0 || k === n) return 1;
            if (k > n - k) k = n - k; // å„ªåŒ–ï¼šåˆ©ç”¨å°ç¨±æ€§
            
            let result = 1;
            for (let i = 0; i < k; i++) {
                result = result * (n - i) / (i + 1);
            }
            return Math.round(result);
        }

        // è¨ˆç®—æ¦‚ç‡ï¼šå¾ total å€‹ä¸­é¸ 6 å€‹ï¼Œä¸­åˆ° matchedCount å€‹çš„æ¦‚ç‡
        function calculateProbability(total, matchedCount) {
            if (matchedCount > 6 || matchedCount < 0) return 0;
            if (total < 6) return 0;
            
            // è¨ˆç®—ï¼šC(matchedCount, k) * C(total - matchedCount, 6 - k) / C(total, 6)
            // é€™è£¡ç°¡åŒ–ç‚ºï¼šä¸­åˆ°è‡³å°‘ matchedCount å€‹çš„æ¦‚ç‡
            // å¯¦éš›è¨ˆç®—ï¼šä¸­åˆ° exactly matchedCount å€‹çš„æ¦‚ç‡
            let probability = 0;
            
            // è¨ˆç®—ä¸­åˆ° exactly matchedCount å€‹çš„æ¦‚ç‡
            if (matchedCount <= 6 && matchedCount <= total) {
                const numerator = combination(matchedCount, matchedCount) * combination(total - matchedCount, 6 - matchedCount);
                const denominator = combination(total, 6);
                if (denominator > 0) {
                    probability = numerator / denominator;
                }
            }
            
            return probability;
        }

        // è¨ˆç®—ä¸Šä¸€æœŸä¸­çæ¦‚ç‡
        function calculatePreviousPeriodProbability(previousPeriodData, filteredNumbers, filteredCount) {
            if (!previousPeriodData || filteredNumbers.length === 0) return null;
            
            const regularNumbers = previousPeriodData.numbers;
            const extraNumber = previousPeriodData.extra_number;
            const filteredNumbersSet = new Set(filteredNumbers);
            
            // è¨ˆç®—ç¬¦åˆæ¢ä»¶çš„æ™®é€šè™Ÿç¢¼ï¼ˆé€™äº›è™Ÿç¢¼å¿…é ˆåœ¨filteredNumbersä¸­ï¼‰
            const matchedRegularNumbers = regularNumbers.filter(num => filteredNumbersSet.has(num));
            const matchedRegularCount = matchedRegularNumbers.length;
            // ç‰¹åˆ¥è™Ÿç¢¼æ˜¯å¦ç¬¦åˆæ¢ä»¶
            const isExtraMatched = filteredNumbersSet.has(extraNumber);
            
            // ç¸½ç¬¦åˆæ•¸é‡ï¼ˆç‰¹åˆ¥è™Ÿç¢¼ç®—0.5å€‹ï¼‰
            const totalMatched = matchedRegularCount + (isExtraMatched ? 0.5 : 0);
            
            if (totalMatched === 0) return null;
            
            // æ¦‚ç‡1ï¼šå¾ filteredCount å€‹ä¸­é¸ 6 å€‹ï¼Œæ°å¥½ä¸­åˆ° matchedRegularCount å€‹ç‰¹å®šè™Ÿç¢¼çš„æ¦‚ç‡
            // å‰æï¼šé€™ matchedRegularCount å€‹è™Ÿç¢¼éƒ½åœ¨ filteredNumbers ä¸­
            let prob1 = 0;
            let prob1Regular = 0; // æ™®é€šè™Ÿç¢¼çš„æ¦‚ç‡
            if (matchedRegularCount > 0 && matchedRegularCount <= 6 && matchedRegularCount <= filteredCount && filteredCount >= 6) {
                // æƒ…æ³1ï¼šç‰¹åˆ¥è™Ÿç¢¼ä¸åœ¨ç¯©é¸è™Ÿç¢¼ä¸­ï¼Œæˆ–è€…ç‰¹åˆ¥è™Ÿç¢¼åœ¨ä½†æˆ‘å€‘åªè¨ˆç®—æ™®é€šè™Ÿç¢¼çš„æ¦‚ç‡
                // å¾ filteredCount å€‹ä¸­é¸ 6 å€‹ï¼Œæ°å¥½åŒ…å«é€™ matchedRegularCount å€‹ç‰¹å®šè™Ÿç¢¼
                // è¨ˆç®—å…¬å¼ï¼šC(filteredCount - matchedRegularCount, 6 - matchedRegularCount) / C(filteredCount, 6)
                // è§£é‡‹ï¼šå¾å‰©é¤˜çš„ (filteredCount - matchedRegularCount) å€‹è™Ÿç¢¼ä¸­é¸ (6 - matchedRegularCount) å€‹
                const numerator = combination(filteredCount - matchedRegularCount, 6 - matchedRegularCount);
                const denominator = combination(filteredCount, 6);
                if (denominator > 0 && numerator >= 0) {
                    prob1Regular = numerator / denominator;
                    prob1 = prob1Regular;

                    // æƒ…æ³2ï¼šç‰¹åˆ¥è™Ÿç¢¼ä¹Ÿåœ¨ç¯©é¸è™Ÿç¢¼ä¸­ï¼Œä¸”ç¬¦åˆæ¢ä»¶
                    // å¾ filteredCount å€‹ä¸­é¸ 6 å€‹ï¼Œæ°å¥½åŒ…å« matchedRegularCount å€‹ç‰¹å®šæ”ªå‡ºè™Ÿç¢¼ + ç‰¹åˆ¥è™Ÿç¢¼
                    // å¿…é ˆé¸ä¸­é€™ (matchedRegularCount + 1) å€‹è™Ÿç¢¼ï¼Œå‰©é¤˜å¾å…¶ä»–è™Ÿç¢¼ä¸­é¸
                    // å…¬å¼ï¼šC(filteredCount - matchedRegularCount - 1, 6 - matchedRegularCount - 1) / C(filteredCount, 6)
                    // æ³¨æ„ï¼šå¦‚æœ matchedRegularCount = 5ï¼Œå‰‡éœ€è¦é¸ä¸­ 5å€‹æ™®é€šè™Ÿç¢¼ + 1å€‹ç‰¹åˆ¥è™Ÿç¢¼ = 6å€‹ï¼Œå‰©é¤˜å¾å…¶ä»–è™Ÿç¢¼ä¸­é¸0å€‹
                    if (isExtraMatched) {
                        const remainingCount = filteredCount - matchedRegularCount - 1; // æ‰£é™¤å·²åŒ¹é…çš„æ™®é€šè™Ÿç¢¼å’Œç‰¹åˆ¥è™Ÿç¢¼
                        const needFromRemaining = 6 - matchedRegularCount - 1; // é‚„éœ€è¦å¾å‰©é¤˜è™Ÿç¢¼ä¸­é¸çš„æ•¸é‡
                        if (remainingCount >= 0 && needFromRemaining >= 0 && remainingCount >= needFromRemaining) {
                            prob1 = combination(remainingCount, needFromRemaining) / combination(filteredCount, 6);
                        } else {
                            prob1 = 0; // ç„¡æ³•æ»¿è¶³æ¢ä»¶
                        }
                    }
                }
            }
            
            // æ¦‚ç‡2ï¼šå¾ 49 å€‹ä¸­é¸ 6 å€‹ï¼Œæ°å¥½ä¸­åˆ° matchedRegularCount å€‹ç‰¹å®šè™Ÿç¢¼çš„æ¦‚ç‡
            // æ ¹æ“šå…­åˆå½©è¦å‰‡ï¼šé€™ matchedRegularCount å€‹ç‰¹å®šè™Ÿç¢¼å¿…é ˆæ˜¯å¾6å€‹ã€Œæ”ªå‡ºè™Ÿç¢¼ã€ä¸­é¸å‡ºçš„
            // æ­£ç¢ºå…¬å¼ï¼šC(6, matchedRegularCount) * C(42, 6-matchedRegularCount) / C(49, 6)
            // èªªæ˜ï¼š49å€‹è™Ÿç¢¼ - 6å€‹æ”ªå‡ºè™Ÿç¢¼ - 1å€‹ç‰¹åˆ¥è™Ÿç¢¼ = 42å€‹å…¶ä»–è™Ÿç¢¼
            let prob2 = 0;
            let prob2Regular = 0; // æ™®é€šè™Ÿç¢¼çš„æ¦‚ç‡
            if (matchedRegularCount > 0 && matchedRegularCount <= 6) {
                // å¾6å€‹ã€Œæ”ªå‡ºè™Ÿç¢¼ã€ä¸­é¸ matchedRegularCount å€‹ï¼Œå¾å‰©é¤˜42å€‹ä¸­é¸ (6-matchedRegularCount) å€‹
                // æ³¨æ„ï¼šå‰©é¤˜è™Ÿç¢¼æ˜¯ 49-6-1=42 å€‹ï¼ˆæ‰£é™¤6å€‹æ”ªå‡ºè™Ÿç¢¼å’Œ1å€‹ç‰¹åˆ¥è™Ÿç¢¼ï¼‰
                const numerator = combination(6, matchedRegularCount) * combination(42, 6 - matchedRegularCount);
                const denominator = combination(49, 6);
                if (denominator > 0 && numerator >= 0) {
                    prob2Regular = numerator / denominator;
                    prob2 = prob2Regular;

                    // å¦‚æœç‰¹åˆ¥è™Ÿç¢¼ä¹Ÿç¬¦åˆæ¢ä»¶ï¼Œéœ€è¦è¨ˆç®—åŒ…å«ç‰¹åˆ¥è™Ÿç¢¼çš„æ¦‚ç‡
                    // æ ¹æ“šå…­åˆå½©è¦å‰‡ï¼š
                    // - æ²’æœ‰ç‰¹åˆ¥è™Ÿç¢¼æ™‚ï¼Œæ¦‚ç‡ = C(6, k) * C(42, 6-k) / C(49, 6)
                    // - æœ‰ç‰¹åˆ¥è™Ÿç¢¼æ™‚ï¼Œæ¦‚ç‡ = C(6, k) * C(42, 5-k) / C(49, 6)ï¼ˆé¸ä¸­kå€‹æ”ªå‡ºè™Ÿç¢¼ + 1å€‹ç‰¹åˆ¥è™Ÿç¢¼ + (5-k)å€‹å…¶ä»–è™Ÿç¢¼ï¼‰
                    if (isExtraMatched) {
                        // æœ‰ç‰¹åˆ¥è™Ÿç¢¼æ™‚ï¼šå¾6å€‹æ”ªå‡ºè™Ÿç¢¼ä¸­é¸kå€‹ï¼Œå¾42å€‹å…¶ä»–è™Ÿç¢¼ä¸­é¸(5-k)å€‹ï¼ˆå› ç‚ºç‰¹åˆ¥è™Ÿç¢¼ä½”äº†1å€‹ä½ç½®ï¼‰
                        // å…¬å¼ï¼šC(6, k) * C(42, 5-k) / C(49, 6)
                        const numeratorWithExtra = combination(6, matchedRegularCount) * combination(42, 5 - matchedRegularCount);
                        if (numeratorWithExtra >= 0 && 5 - matchedRegularCount >= 0 && 42 >= 5 - matchedRegularCount) {
                            prob2 = numeratorWithExtra / combination(49, 6);
                        } else {
                            prob2 = 0; // ç„¡æ³•æ»¿è¶³æ¢ä»¶
                        }
                    }
                }
            }
            
            // ç‰¹åˆ¥è™Ÿç¢¼çš„æ¦‚ç‡ï¼ˆå¦‚æœç¬¦åˆæ¢ä»¶ï¼‰
            let extraProb = 0;
            if (isExtraMatched) {
                // ç‰¹åˆ¥è™Ÿç¢¼æ˜¯å¾å‰©é¤˜çš„43å€‹ä¸­æŠ½å–çš„ï¼ˆå› ç‚ºå·²ç¶“æŠ½äº†6å€‹æ™®é€šè™Ÿç¢¼ï¼‰ï¼Œæ¦‚ç‡æ˜¯ 1/43
                extraProb = 1 / 43;
            }
            
            return {
                matchedRegularCount,
                matchedRegularNumbers,
                isExtraMatched,
                totalMatched,
                probFromFiltered: prob1,
                probFrom49: prob2,
                extraProb: extraProb
            };
        }

        // é¡¯ç¤ºç¯©é¸çµæœ
        function displayFilterResults(startPeriod, endPeriod, maxFrequency, threshold, filteredNumbers) {
            const resultDiv = document.getElementById('high-frequency-result');
            const thresholdInfo = document.getElementById('filter-threshold-info');
            const filteredNumbersDiv = document.getElementById('filtered-numbers');
            const filteredNumbersCountDiv = document.getElementById('filtered-numbers-count');
            const previousPeriodNumbersDiv = document.getElementById('previous-period-numbers');
            const random6Div = document.getElementById('random-6-numbers');

            // é¡¯ç¤ºçµæœå€åŸŸ
            resultDiv.style.display = 'block';

            // é¡¯ç¤ºç¯©é¸æ¢ä»¶ï¼ˆåŒ…å«ç¯©é¸å‡ºæ•¸å­—çš„æ•¸é‡ï¼‰
            thresholdInfo.textContent = `æœŸæ•¸ç¯„åœï¼šç¬¬ ${startPeriod} æœŸ ~ ç¬¬ ${endPeriod} æœŸï¼ˆå…± ${endPeriod - startPeriod + 1} æœŸï¼‰ï½œæœ€é«˜å‡ºç¾æ¬¡æ•¸ï¼š${maxFrequency} æ¬¡ï½œé–€æª»å€¼ï¼š${threshold} æ¬¡ï½œç¯©é¸å‡º ${filteredNumbers.length} å€‹è™Ÿç¢¼`;

            // é¡¯ç¤ºç¯©é¸å‡ºæ•¸å­—çš„æ•¸é‡
            filteredNumbersCountDiv.textContent = `ï¼ˆå…± ${filteredNumbers.length} å€‹ï¼‰`;

            // é¡¯ç¤ºä¸Šä¸€æœŸçš„è™Ÿç¢¼
            const probabilityInfoDiv = document.getElementById('probability-info');
            if (startPeriod === 1) {
                // ç¬¬1æœŸæ²’æœ‰ä¸Šä¸€æœŸ
                previousPeriodNumbersDiv.innerHTML = '<span style="color: #999;">ç„¡ä¸Šä¸€æœŸ</span>';
                probabilityInfoDiv.innerHTML = '';
            } else {
                // ç²å–ä¸Šä¸€æœŸçš„æ•¸æ“šï¼ˆstartPeriod - 1 å°æ‡‰ lotteryData çš„ç´¢å¼•æ˜¯ startPeriod - 2ï¼‰
                const previousPeriodIndex = startPeriod - 2;
                if (previousPeriodIndex >= 0 && previousPeriodIndex < lotteryData.length) {
                    const previousPeriodData = lotteryData[previousPeriodIndex];
                    const previousPeriodNumber = previousPeriodIndex + 1; // æœŸæ•¸å¾1é–‹å§‹
                    const regularNumbers = [...previousPeriodData.numbers].sort((a, b) => a - b);
                    const extraNumber = previousPeriodData.extra_number;
                    
                    // å‰µå»ºä¸€å€‹ Set ä¾†å¿«é€Ÿæª¢æŸ¥è™Ÿç¢¼æ˜¯å¦åœ¨ç¯©é¸çµæœä¸­
                    const filteredNumbersSet = new Set(filteredNumbers);
                    
                    // è¨ˆç®—ç¬¦åˆæ¢ä»¶çš„è™Ÿç¢¼
                    const matchedRegularNumbers = regularNumbers.filter(num => filteredNumbersSet.has(num));
                    const isExtraMatched = filteredNumbersSet.has(extraNumber);
                    const totalMatched = matchedRegularNumbers.length + (isExtraMatched ? 0.5 : 0);
                    
                    // é¡¯ç¤ºæ™®é€šè™Ÿç¢¼ï¼ˆç”¨é€—è™Ÿåˆ†éš”ï¼‰
                    const regularNumbersHtml = regularNumbers.map(num => {
                        const isMatched = filteredNumbersSet.has(num);
                        const bgColor = isMatched ? '#667eea' : '#28a745';
                        return `<span style="display: inline-block; width: 35px; height: 35px; line-height: 35px; text-align: center; background: ${bgColor}; color: white; border-radius: 50%; margin: 3px; font-weight: bold; ${isMatched ? 'box-shadow: 0 0 8px rgba(102, 126, 234, 0.6);' : ''}">${num}</span>`;
                    }).join('');
                    
                    // é¡¯ç¤ºç‰¹åˆ¥è™Ÿç¢¼ï¼ˆç”¨ + è™Ÿé€£æ¥ï¼‰- ä½¿ç”¨æ©™è‰²ç³»å€åˆ†
                    const extraBgColor = isExtraMatched ? '#667eea' : '#ffb74d'; // ç¬¦åˆæ¢ä»¶ç”¨æ©™è‰²ï¼Œä¸ç¬¦åˆç”¨æ·ºæ©™è‰²
                    const extraNumberHtml = `<span style="margin: 0 5px; font-size: 18px; font-weight: bold; color: #333;">+</span><span style="display: inline-block; width: 35px; height: 35px; line-height: 35px; text-align: center; background: ${extraBgColor}; color: white; border-radius: 50%; margin: 3px; font-weight: bold; ${isExtraMatched ? 'box-shadow: 0 0 8px rgba(255, 152, 0, 0.6);' : ''}">${extraNumber}</span>`;
                    
                    previousPeriodNumbersDiv.innerHTML = `ç¬¬ ${previousPeriodNumber} æœŸï¼š` + regularNumbersHtml + extraNumberHtml;
                    
                    // è¨ˆç®—ä¸¦é¡¯ç¤ºæ¦‚ç‡
                    if (totalMatched > 0 && filteredNumbers.length > 0) {
                        const probResult = calculatePreviousPeriodProbability(previousPeriodData, filteredNumbers, filteredNumbers.length);
                        if (probResult) {
                            const matchedDesc = `${matchedRegularNumbers.join(',')}${isExtraMatched ? '+' + extraNumber : ''}`;
                            const matchedRegularCount = matchedRegularNumbers.length; // ç²å–ç¬¦åˆæ¢ä»¶çš„æ™®é€šè™Ÿç¢¼æ•¸é‡
                            
                            // è¨ˆç®—ç¯©é¸è™Ÿç¢¼ä¸­ç¼ºå°‘çš„æ”ªå‡ºè™Ÿç¢¼
                            const missingRegularNumbers = previousPeriodData.numbers.filter(num => !filteredNumbersSet.has(num));
                            const missingCount = missingRegularNumbers.length;
                            
                            // åˆ¤æ–·å¾ç¯©é¸è™Ÿç¢¼ä¸­é¸æ˜¯å¦æ›´å®¹æ˜“
                            const isFilteredEasier = probResult.probFromFiltered > probResult.probFrom49;
                            
                            // è¨ˆç®—100æ³¨çš„æ¦‚ç‡ï¼ˆè‡³å°‘ä¸­ä¸€æ³¨çš„æ¦‚ç‡ï¼‰
                            const prob100 = 1 - Math.pow(1 - probResult.probFromFiltered, 100);
                            
                            let probInfoHtml = `
                                <div style="margin-bottom: 5px;">
                                    <strong>ä¸­çè™Ÿç¢¼ï¼š</strong>${matchedDesc}ï¼ˆå…± ${totalMatched} å€‹ï¼‰
                                </div>
                                <div style="margin-bottom: 5px;">
                                    <strong>å¾ ${filteredNumbers.length} å€‹ä¸­é¸ 6 å€‹ï¼Œä¸­åˆ°ç¬¦åˆä¸­ççš„æ¦‚ç‡ï¼š</strong>
                                    <span style="color: ${isFilteredEasier ? '#28a745' : '#dc3545'}; font-weight: bold;">${(probResult.probFromFiltered * 100).toFixed(6)}%</span>
                                    <span style="color: #666; font-size: 12px;">(1/${Math.round(1 / probResult.probFromFiltered).toLocaleString()}æ¬¡)</span>
                                </div>
                                <div style="margin-bottom: 5px;">
                                    <strong>å¾ 49 å€‹ä¸­é¸ 6 å€‹ï¼Œä¸­åˆ°ç¬¦åˆä¸­ççš„æ¦‚ç‡ï¼š</strong>
                                    <span style="color: ${!isFilteredEasier ? '#28a745' : '#dc3545'}; font-weight: bold;">${(probResult.probFrom49 * 100).toFixed(6)}%</span>
                                    <span style="color: #666; font-size: 12px;">(1/${Math.round(1 / probResult.probFrom49).toLocaleString()}æ¬¡)</span>
                                </div>
                                <div style="margin-top: 8px; padding: 8px; background: #f0f0f0; border-radius: 4px; font-size: 12px; line-height: 1.6;">
                                    <div style="margin-bottom: 4px;"><strong>ğŸ“Š è¨ˆç®—èªªæ˜ï¼š</strong></div>
                                    <div style="margin-bottom: 3px;"><strong>å¾ ${filteredNumbers.length} å€‹ä¸­é¸ 6 å€‹ï¼š</strong></div>
                                    <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ æ°å¥½åŒ…å« ${matchedRegularCount} å€‹ç‰¹å®šè™Ÿç¢¼ï¼ˆ${matchedRegularNumbers.join(',')}ï¼‰${isExtraMatched ? ` + ç‰¹åˆ¥è™Ÿç¢¼${extraNumber}` : ''}</div>
                                    ${missingCount > 0 ? `<div style="margin-bottom: 3px; margin-left: 10px; color: #dc3545;">â€¢ âš ï¸ ç¼ºå°‘æ”ªå‡ºè™Ÿç¢¼ï¼š${missingRegularNumbers.join(',')}ï¼ˆå…±${missingCount}å€‹ä¸åœ¨ç¯©é¸è™Ÿç¢¼ä¸­ï¼‰</div>` : ''}
                                    ${isExtraMatched ? `
                                        <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ å…¬å¼ï¼šC(${matchedRegularCount}, ${matchedRegularCount}) Ã— C(${filteredNumbers.length - matchedRegularCount - 1}, ${5 - matchedRegularCount}) / C(${filteredNumbers.length}, 6)</div>
                                        <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ èªªæ˜ï¼šå¾${matchedRegularCount}å€‹åœ¨æ± ä¸­çš„æ”ªå‡ºè™Ÿç¢¼ä¸­é¸${matchedRegularCount}å€‹ï¼Œå¾å‰©é¤˜${filteredNumbers.length - matchedRegularCount - 1}å€‹ä¸­é¸${5 - matchedRegularCount}å€‹</div>
                                    ` : `
                                        <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ å…¬å¼ï¼šC(${matchedRegularCount}, ${matchedRegularCount}) Ã— C(${filteredNumbers.length - matchedRegularCount}, ${6 - matchedRegularCount}) / C(${filteredNumbers.length}, 6)</div>
                                        <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ èªªæ˜ï¼šå¾${matchedRegularCount}å€‹åœ¨æ± ä¸­çš„æ”ªå‡ºè™Ÿç¢¼ä¸­é¸${matchedRegularCount}å€‹ï¼Œå¾å‰©é¤˜${filteredNumbers.length - matchedRegularCount}å€‹ä¸­é¸${6 - matchedRegularCount}å€‹</div>
                                    `}
                                    <div style="margin-top: 6px; margin-bottom: 3px;"><strong>å¾ 49 å€‹ä¸­é¸ 6 å€‹ï¼š</strong></div>
                                    <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ æ°å¥½ä¸­ ${matchedRegularCount} å€‹æ”ªå‡ºè™Ÿç¢¼${isExtraMatched ? ` + ç‰¹åˆ¥è™Ÿç¢¼` : ''}ï¼ˆå¯å¾6å€‹æ”ªå‡ºè™Ÿç¢¼ä¸­ä»»é¸${matchedRegularCount}å€‹ï¼‰</div>
                                    ${isExtraMatched ? `
                                        <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ å…¬å¼ï¼šC(6, ${matchedRegularCount}) Ã— C(42, ${5 - matchedRegularCount}) / C(49, 6)</div>
                                        <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ èªªæ˜ï¼šæœ‰ C(6,${matchedRegularCount})=${combination(6, matchedRegularCount)} ç¨®æ–¹å¼é¸${matchedRegularCount}å€‹æ”ªå‡ºè™Ÿç¢¼ï¼Œå¾42å€‹å…¶ä»–è™Ÿç¢¼ä¸­é¸${5 - matchedRegularCount}å€‹</div>
                                    ` : `
                                        <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ å…¬å¼ï¼šC(6, ${matchedRegularCount}) Ã— C(42, ${6 - matchedRegularCount}) / C(49, 6)</div>
                                        <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ èªªæ˜ï¼šæœ‰ C(6,${matchedRegularCount})=${combination(6, matchedRegularCount)} ç¨®æ–¹å¼é¸${matchedRegularCount}å€‹æ”ªå‡ºè™Ÿç¢¼ï¼Œå¾42å€‹å…¶ä»–è™Ÿç¢¼ä¸­é¸${6 - matchedRegularCount}å€‹</div>
                                    `}
                                    ${isFilteredEasier ? `
                                        <div style="margin-top: 6px; padding-top: 6px; border-top: 1px solid #ddd; color: #28a745;">
                                            <strong>ğŸ’¡ ç‚ºä»€éº¼å¾ ${filteredNumbers.length} å€‹ä¸­é¸çš„æ¦‚ç‡æ›´é«˜ï¼Ÿ</strong><br>
                                            å› ç‚ºç¯©é¸è™Ÿç¢¼æ± è¼ƒå°ï¼Œé¸ä¸­ç‰¹å®šè™Ÿç¢¼çš„æ©Ÿç‡æ›´é«˜ã€‚<br>
                                            ç¯©é¸è™Ÿç¢¼ä¸­åŒ…å«äº†å…¨éƒ¨${matchedRegularCount + (isExtraMatched ? 1 : 0)}å€‹ä¸­çè™Ÿç¢¼ã€‚
                                        </div>
                                    ` : `
                                        <div style="margin-top: 6px; padding-top: 6px; border-top: 1px solid #ddd; color: #dc3545;">
                                            <strong>âš ï¸ ç‚ºä»€éº¼å¾ ${filteredNumbers.length} å€‹ä¸­é¸çš„æ¦‚ç‡åè€Œæ›´ä½ï¼Ÿ</strong><br>
                                            å› ç‚ºç¯©é¸è™Ÿç¢¼ä¸­ç¼ºå°‘ ${missingCount} å€‹æ”ªå‡ºè™Ÿç¢¼ï¼ˆ${missingRegularNumbers.join(',')}ï¼‰ï¼<br>
                                            å¾49å€‹ä¸­é¸ï¼šæœ‰ C(6,${matchedRegularCount})=${combination(6, matchedRegularCount)} ç¨®æ–¹å¼ä¸­${matchedRegularCount}å€‹æ”ªå‡ºè™Ÿç¢¼<br>
                                            å¾${filteredNumbers.length}å€‹ä¸­é¸ï¼šåªæœ‰ C(${matchedRegularCount},${matchedRegularCount})=1 ç¨®æ–¹å¼ï¼ˆå› ç‚ºæ± ä¸­åªæœ‰é€™${matchedRegularCount}å€‹æ”ªå‡ºè™Ÿç¢¼ï¼‰
                                        </div>
                                    `}
                                    <div style="margin-top: 6px; padding-top: 6px; border-top: 1px solid #ddd;">
                                        <strong>ğŸ’¡ 100æ³¨èªªæ˜ï¼š</strong><br>
                                        è²·100æ³¨ï¼ˆæ¯æ³¨éƒ½æ˜¯å¾${filteredNumbers.length}å€‹ä¸­éš¨æ©Ÿé¸6å€‹ï¼‰ï¼Œ<br>
                                        <strong>è‡³å°‘ä¸­ä¸€æ³¨çš„æ¦‚ç‡ï¼š${(prob100 * 100).toFixed(2)}%</strong><br>
                                        <span style="color: #666; font-size: 11px;">ï¼ˆä¸æ˜¯ç°¡å–®çš„ ${(probResult.probFromFiltered * 100).toFixed(6)}% Ã— 100ï¼‰</span>
                                    </div>
                                </div>
                            `;
                            probabilityInfoDiv.innerHTML = probInfoHtml;
                        } else {
                            probabilityInfoDiv.innerHTML = '';
                        }
                    } else {
                        probabilityInfoDiv.innerHTML = '<span style="color: #999;">ç„¡ç¬¦åˆä¸­çè™Ÿç¢¼</span>';
                    }
                } else {
                    previousPeriodNumbersDiv.innerHTML = '<span style="color: #999;">ç„¡æ³•ç²å–ä¸Šä¸€æœŸæ•¸æ“š</span>';
                    probabilityInfoDiv.innerHTML = '';
                }
            }

            // é¡¯ç¤ºç¬¦åˆæ¢ä»¶çš„è™Ÿç¢¼
            if (filteredNumbers.length === 0) {
                filteredNumbersDiv.innerHTML = '<span style="color: #999;">ç„¡ç¬¦åˆæ¢ä»¶çš„è™Ÿç¢¼</span>';
                random6Div.innerHTML = '<span style="color: #999;">ç„¡æ³•æŠ½å–</span>';
            } else {
                // é¡¯ç¤ºæ‰€æœ‰ç¬¦åˆæ¢ä»¶çš„è™Ÿç¢¼ï¼ˆå¸¶æœ‰åœ“å½¢èƒŒæ™¯ï¼‰
                filteredNumbersDiv.innerHTML = filteredNumbers.map(num => 
                    `<span style="display: inline-block; width: 35px; height: 35px; line-height: 35px; text-align: center; background: #667eea; color: white; border-radius: 50%; margin: 3px; font-weight: bold;">${num}</span>`
                ).join('');

                // éš¨æ©ŸæŠ½å– 6 å€‹è™Ÿç¢¼
                const random6 = getRandom6(filteredNumbers);
                random6Div.innerHTML = random6.map(num => 
                    `<span style="display: inline-block; width: 40px; height: 40px; line-height: 40px; text-align: center; background: #764ba2; color: white; border-radius: 50%; margin: 5px; font-weight: bold; font-size: 18px;">${num}</span>`
                ).join('');
                
                // æ·»åŠ åˆ°æ­·å²è¨˜éŒ„
                addToFilterHistory(startPeriod, endPeriod, maxFrequency, threshold, filteredNumbers, random6);
            }

            // æ»¾å‹•åˆ°çµæœå€åŸŸ
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // é‡æ–°éš¨æ©ŸæŠ½å– 6 å€‹è™Ÿç¢¼
        function refreshRandom6() {
            if (currentFilteredNumbers.length === 0) {
                alert('è«‹å…ˆåŸ·è¡Œã€Œç¯©é¸é«˜é »è™Ÿç¢¼ã€ï¼');
                return;
            }

            const random6Div = document.getElementById('random-6-numbers');
            const random6 = getRandom6(currentFilteredNumbers);
            
            random6Div.innerHTML = random6.map(num => 
                `<span style="display: inline-block; width: 40px; height: 40px; line-height: 40px; text-align: center; background: #764ba2; color: white; border-radius: 50%; margin: 5px; font-weight: bold; font-size: 18px;">${num}</span>`
            ).join('');
            
            // å–å¾—ç•¶å‰çš„ç¯©é¸åƒæ•¸ï¼ˆå¾æœ€æ–°çš„æ­·å²è¨˜éŒ„æˆ–ç•¶å‰é¡¯ç¤ºçš„è³‡è¨Šï¼‰
            if (filterHistory.length > 0) {
                const latestItem = filterHistory[0];
                // æ·»åŠ æ–°çš„éš¨æ©Ÿçµæœåˆ°æ­·å²è¨˜éŒ„
                addToFilterHistory(
                    latestItem.startPeriod, 
                    latestItem.endPeriod, 
                    latestItem.maxFrequency, 
                    latestItem.threshold, 
                    currentFilteredNumbers, 
                    random6
                );
            }
        }

        // æ·»åŠ åˆ°æ­·å²è¨˜éŒ„
        function addToFilterHistory(startPeriod, endPeriod, maxFrequency, threshold, filteredNumbers, random6) {
            const timestamp = new Date().toLocaleString('zh-TW', { 
                year: 'numeric', 
                month: '2-digit', 
                day: '2-digit', 
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit' 
            });
            
            const historyItem = {
                timestamp,
                startPeriod,
                endPeriod,
                maxFrequency,
                threshold,
                filteredNumbers: [...filteredNumbers],
                random6: [...random6]
            };
            
            // æ·»åŠ åˆ°æ­·å²è¨˜éŒ„é™£åˆ—ï¼ˆæœ€æ–°çš„åœ¨å‰é¢ï¼‰
            filterHistory.unshift(historyItem);
            
            // é™åˆ¶æ­·å²è¨˜éŒ„æ•¸é‡ï¼ˆæœ€å¤šä¿ç•™ 20 ç­†ï¼‰
            if (filterHistory.length > 20) {
                filterHistory = filterHistory.slice(0, 20);
            }
            
            // æ›´æ–°æ­·å²è¨˜éŒ„é¡¯ç¤º
            updateFilterHistoryDisplay();
        }

        // æ›´æ–°æ­·å²è¨˜éŒ„é¡¯ç¤º
        function updateFilterHistoryDisplay() {
            const historyDiv = document.getElementById('filter-history');
            
            if (filterHistory.length === 0) {
                historyDiv.innerHTML = '<p style="color: #999; text-align: center; padding: 20px;">å°šç„¡ç¯©é¸è¨˜éŒ„</p>';
                updateHistoricalHighFrequencyNumbers(); // æ›´æ–°æ­·å²é«˜é »è™Ÿç¢¼
                return;
            }
            
            let html = '';
            filterHistory.forEach((item, index) => {
                html += `
                    <div style="margin-bottom: 15px; padding: 12px; background: white; border-radius: 6px; border-left: 3px solid ${index === 0 ? '#667eea' : '#ddd'};">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <span style="font-size: 12px; color: #666;">ğŸ• ${item.timestamp}</span>
                            <div style="display: flex; gap: 5px;">
                                <button onclick="loadHistoryItem(${index})" style="padding: 2px 8px; background: #667eea; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 11px;">è¼‰å…¥</button>
                                <button onclick="removeHistoryItem(${index})" style="padding: 2px 8px; background: #dc3545; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 11px;">ç§»é™¤</button>
                            </div>
                        </div>
                        <div style="font-size: 13px; color: #555; margin-bottom: 6px;">
                            æœŸæ•¸ï¼šç¬¬ ${item.startPeriod} ~ ${item.endPeriod} æœŸ | é–€æª»ï¼š${item.threshold} æ¬¡
                        </div>
                        <div style="margin-bottom: 6px;">
                            <strong style="font-size: 12px; color: #764ba2;">éš¨æ©Ÿ 6 ç¢¼ï¼š</strong>
                            ${(() => {
                                // ç²å–ä¸Šä¸€æœŸçš„ä¸­çè™Ÿç¢¼ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
                                let previousPeriodRegularNumbers = new Set();
                                let previousPeriodExtraNumber = null;
                                if (item.startPeriod > 1) {
                                    const previousPeriodIndex = item.startPeriod - 2;
                                    if (previousPeriodIndex >= 0 && previousPeriodIndex < lotteryData.length) {
                                        const previousPeriodData = lotteryData[previousPeriodIndex];
                                        // ä¸Šä¸€æœŸçš„æ™®é€šè™Ÿç¢¼
                                        previousPeriodData.numbers.forEach(num => previousPeriodRegularNumbers.add(num));
                                        // ä¸Šä¸€æœŸçš„ç‰¹åˆ¥è™Ÿç¢¼
                                        previousPeriodExtraNumber = previousPeriodData.extra_number;
                                    }
                                }
                                
                                return item.random6.map(num => {
                                    // åˆ¤æ–·è™Ÿç¢¼æ˜¯å¦ç¬¦åˆä¸Šä¸€æœŸçš„ä¸­çè™Ÿç¢¼
                                    const isRegularMatched = previousPeriodRegularNumbers.has(num);
                                    const isExtraMatched = (previousPeriodExtraNumber !== null && num === previousPeriodExtraNumber);
                                    
                                    let bgColor = '#764ba2'; // é»˜èªé¡è‰²
                                    if (isExtraMatched) {
                                        // å¦‚æœæ˜¯ç‰¹åˆ¥è™Ÿç¢¼ï¼Œç”¨æ©™è‰²
                                        bgColor = '#ff9800';
                                    } else if (isRegularMatched) {
                                        // å¦‚æœæ˜¯æ™®é€šè™Ÿç¢¼ï¼Œç”¨ç´«è‰²
                                        bgColor = '#667eea';
                                    }
                                    
                                    return `<span style="display: inline-block; width: 28px; height: 28px; line-height: 28px; text-align: center; background: ${bgColor}; color: white; border-radius: 50%; margin: 2px; font-weight: bold; font-size: 13px; ${isExtraMatched || isRegularMatched ? 'box-shadow: 0 0 4px rgba(0,0,0,0.3);' : ''}">${num}</span>`;
                                }).join('');
                            })()}
                        </div>
                        <div style="font-size: 11px; color: #999;">
                            ç¬¦åˆæ¢ä»¶ï¼š${item.filteredNumbers.length} å€‹è™Ÿç¢¼
                        </div>
                    </div>
                `;
            });
            
            historyDiv.innerHTML = html;
            
            // æ›´æ–°æ­·å²é«˜é »è™Ÿç¢¼
            updateHistoricalHighFrequencyNumbers();
        }
        
        // è¨ˆç®—ä¸¦æ›´æ–°æ­·å²é«˜é »è™Ÿç¢¼
        function updateHistoricalHighFrequencyNumbers() {
            const displayDiv = document.getElementById('historical-high-frequency');
            
            if (filterHistory.length === 0) {
                displayDiv.innerHTML = '<p style="color: #999; text-align: center; margin: 0; width: 100%;">å°šç„¡æ­·å²æ•¸æ“š</p>';
                return;
            }
            
            // çµ±è¨ˆæ‰€æœ‰æ­·å²è¨˜éŒ„ä¸­éš¨æ©Ÿ6ç¢¼çš„è™Ÿç¢¼å‡ºç¾æ¬¡æ•¸
            const numberFrequency = {};
            
            filterHistory.forEach(item => {
                item.random6.forEach(num => {
                    numberFrequency[num] = (numberFrequency[num] || 0) + 1;
                });
            });
            
            // è½‰æ›ç‚ºé™£åˆ—ä¸¦æŒ‰é »ç‡æ’åº
            let sortedNumbers = Object.entries(numberFrequency)
                .map(([num, freq]) => ({
                    number: parseInt(num),
                    frequency: freq
                }))
                .sort((a, b) => {
                    // å¦‚æœé »ç‡ç›¸åŒï¼Œéœ€è¦æ ¹æ“šç•¶å‰æœŸæ•¸ç¯„åœçš„çµ±è¨ˆæ’åä¾†æ±ºå®š
                    if (b.frequency === a.frequency) {
                        return sortByGlobalRank(a.number, b.number);
                    }
                    return b.frequency - a.frequency;
                });
            
            // å–å‰6å€‹ä¸åŒçš„è™Ÿç¢¼
            const top6Numbers = sortedNumbers.slice(0, 6);
            
            if (top6Numbers.length === 0) {
                displayDiv.innerHTML = '<p style="color: #999; text-align: center; margin: 0; width: 100%;">å°šç„¡æ•¸æ“š</p>';
                return;
            }
            
            // é¡¯ç¤ºé«˜é »è™Ÿç¢¼
            let html = '';
            top6Numbers.forEach(item => {
                // ä½¿ç”¨æ¼¸å±¤è‰²ï¼Œæ ¹æ“šæ’åå¾æ·±åˆ°æ·º
                const colors = [
                    'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
                    'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
                    'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)',
                    'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',
                    'linear-gradient(135deg, #30cfd0 0%, #330867 100%)',
                    'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)'
                ];
                const colorIndex = top6Numbers.indexOf(item);
                const bgColor = colors[colorIndex] || colors[5];
                
                html += `
                    <div style="display: flex; flex-direction: column; align-items: center;">
                        <span style="display: inline-block; width: 42px; height: 42px; line-height: 42px; text-align: center; background: ${bgColor}; color: white; border-radius: 50%; font-weight: bold; font-size: 18px; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">${item.number}</span>
                        <span style="font-size: 10px; color: #666; margin-top: 4px;">${item.frequency}æ¬¡</span>
                    </div>
                `;
            });
            
            displayDiv.innerHTML = html;
        }
        
        // æ ¹æ“šå…¨å±€çµ±è¨ˆæ’åä¾†æ’åºï¼ˆç•¶é »ç‡ç›¸åŒæ™‚ä½¿ç”¨ï¼‰
        function sortByGlobalRank(num1, num2) {
            // å–å¾—ç•¶å‰é¸æ“‡çš„æœŸæ•¸ç¯„åœ
            const startPeriod = parseInt(document.getElementById('start-period').value) || 1;
            const endPeriod = parseInt(document.getElementById('end-period').value) || lotteryData.length;
            
            // è¨ˆç®—è©²ç¯„åœå…§çš„è™Ÿç¢¼é »ç‡
            const numberFreq = {};
            for (let i = 1; i <= 49; i++) {
                numberFreq[i] = 0;
            }
            
            const startIndex = startPeriod - 1;
            const endIndex = endPeriod;
            const selectedData = lotteryData.slice(startIndex, endIndex);
            
            selectedData.forEach(row => {
                row.numbers.forEach(num => {
                    numberFreq[num]++;
                });
                numberFreq[row.extra_number]++;
            });
            
            // æ¯”è¼ƒå…©å€‹è™Ÿç¢¼çš„é »ç‡
            const freq1 = numberFreq[num1] || 0;
            const freq2 = numberFreq[num2] || 0;
            
            if (freq2 !== freq1) {
                return freq2 - freq1; // é »ç‡é«˜çš„æ’å‰é¢
            }
            
            // å¦‚æœé »ç‡ä¹Ÿç›¸åŒï¼ŒæŒ‰è™Ÿç¢¼å¤§å°æ’åº
            return num1 - num2;
        }

        // è¼‰å…¥æ­·å²è¨˜éŒ„é …ç›®
        function loadHistoryItem(index) {
            const item = filterHistory[index];
            if (!item) return;
            
            // æ›´æ–°ç•¶å‰ç¯©é¸çµæœ
            currentFilteredNumbers = [...item.filteredNumbers];
            
            // é¡¯ç¤ºçµæœå€åŸŸ
            const resultDiv = document.getElementById('high-frequency-result');
            resultDiv.style.display = 'block';
            
            // æ›´æ–°ç¯©é¸æ¢ä»¶ï¼ˆåŒ…å«ç¯©é¸å‡ºæ•¸å­—çš„æ•¸é‡ï¼‰
            const thresholdInfo = document.getElementById('filter-threshold-info');
            thresholdInfo.textContent = `æœŸæ•¸ç¯„åœï¼šç¬¬ ${item.startPeriod} æœŸ ~ ç¬¬ ${item.endPeriod} æœŸï¼ˆå…± ${item.endPeriod - item.startPeriod + 1} æœŸï¼‰ï½œæœ€é«˜å‡ºç¾æ¬¡æ•¸ï¼š${item.maxFrequency} æ¬¡ï½œé–€æª»å€¼ï¼š${item.threshold} æ¬¡ï½œç¯©é¸å‡º ${item.filteredNumbers.length} å€‹è™Ÿç¢¼`;
            
            // æ›´æ–°ç¯©é¸å‡ºæ•¸å­—çš„æ•¸é‡
            const filteredNumbersCountDiv = document.getElementById('filtered-numbers-count');
            filteredNumbersCountDiv.textContent = `ï¼ˆå…± ${item.filteredNumbers.length} å€‹ï¼‰`;
            
            // é¡¯ç¤ºä¸Šä¸€æœŸçš„è™Ÿç¢¼
            const previousPeriodNumbersDiv = document.getElementById('previous-period-numbers');
            const probabilityInfoDiv = document.getElementById('probability-info');
            if (item.startPeriod === 1) {
                // ç¬¬1æœŸæ²’æœ‰ä¸Šä¸€æœŸ
                previousPeriodNumbersDiv.innerHTML = '<span style="color: #999;">ç„¡ä¸Šä¸€æœŸ</span>';
                probabilityInfoDiv.innerHTML = '';
            } else {
                // ç²å–ä¸Šä¸€æœŸçš„æ•¸æ“šï¼ˆstartPeriod - 1 å°æ‡‰ lotteryData çš„ç´¢å¼•æ˜¯ startPeriod - 2ï¼‰
                const previousPeriodIndex = item.startPeriod - 2;
                if (previousPeriodIndex >= 0 && previousPeriodIndex < lotteryData.length) {
                    const previousPeriodData = lotteryData[previousPeriodIndex];
                    const previousPeriodNumber = previousPeriodIndex + 1; // æœŸæ•¸å¾1é–‹å§‹
                    const regularNumbers = [...previousPeriodData.numbers].sort((a, b) => a - b);
                    const extraNumber = previousPeriodData.extra_number;
                    
                    // å‰µå»ºä¸€å€‹ Set ä¾†å¿«é€Ÿæª¢æŸ¥è™Ÿç¢¼æ˜¯å¦åœ¨ç¯©é¸çµæœä¸­
                    const filteredNumbersSet = new Set(item.filteredNumbers);
                    
                    // è¨ˆç®—ç¬¦åˆæ¢ä»¶çš„è™Ÿç¢¼
                    const matchedRegularNumbers = regularNumbers.filter(num => filteredNumbersSet.has(num));
                    const isExtraMatched = filteredNumbersSet.has(extraNumber);
                    const totalMatched = matchedRegularNumbers.length + (isExtraMatched ? 0.5 : 0);
                    
                    // é¡¯ç¤ºæ™®é€šè™Ÿç¢¼ï¼ˆç”¨é€—è™Ÿåˆ†éš”ï¼‰
                    const regularNumbersHtml = regularNumbers.map(num => {
                        const isMatched = filteredNumbersSet.has(num);
                        const bgColor = isMatched ? '#667eea' : '#28a745';
                        return `<span style="display: inline-block; width: 35px; height: 35px; line-height: 35px; text-align: center; background: ${bgColor}; color: white; border-radius: 50%; margin: 3px; font-weight: bold; ${isMatched ? 'box-shadow: 0 0 8px rgba(102, 126, 234, 0.6);' : ''}">${num}</span>`;
                    }).join('');
                    
                    // é¡¯ç¤ºç‰¹åˆ¥è™Ÿç¢¼ï¼ˆç”¨ + è™Ÿé€£æ¥ï¼‰- ä½¿ç”¨æ©™è‰²ç³»å€åˆ†
                    const extraBgColor = isExtraMatched ? '#667eea' : '#ffb74d'; // ç¬¦åˆæ¢ä»¶ç”¨æ©™è‰²ï¼Œä¸ç¬¦åˆç”¨æ·ºæ©™è‰²
                    const extraNumberHtml = `<span style="margin: 0 5px; font-size: 18px; font-weight: bold; color: #333;">+</span><span style="display: inline-block; width: 35px; height: 35px; line-height: 35px; text-align: center; background: ${extraBgColor}; color: white; border-radius: 50%; margin: 3px; font-weight: bold; ${isExtraMatched ? 'box-shadow: 0 0 8px rgba(255, 152, 0, 0.6);' : ''}">${extraNumber}</span>`;
                    
                    previousPeriodNumbersDiv.innerHTML = `ç¬¬ ${previousPeriodNumber} æœŸï¼š` + regularNumbersHtml + extraNumberHtml;
                    
                    // è¨ˆç®—ä¸¦é¡¯ç¤ºæ¦‚ç‡
                    if (totalMatched > 0 && item.filteredNumbers.length > 0) {
                        const probResult = calculatePreviousPeriodProbability(previousPeriodData, item.filteredNumbers, item.filteredNumbers.length);
                        if (probResult) {
                            const matchedDesc = `${matchedRegularNumbers.join(',')}${isExtraMatched ? '+' + extraNumber : ''}`;
                            
                            // è¨ˆç®—ç¯©é¸è™Ÿç¢¼ä¸­ç¼ºå°‘çš„æ”ªå‡ºè™Ÿç¢¼
                            const missingRegularNumbers = regularNumbers.filter(num => !filteredNumbersSet.has(num));
                            const missingCount = missingRegularNumbers.length;
                            
                            // åˆ¤æ–·å¾ç¯©é¸è™Ÿç¢¼ä¸­é¸æ˜¯å¦æ›´å®¹æ˜“
                            const isFilteredEasier = probResult.probFromFiltered > probResult.probFrom49;
                            
                            // è¨ˆç®—100æ³¨çš„æ¦‚ç‡ï¼ˆè‡³å°‘ä¸­ä¸€æ³¨çš„æ¦‚ç‡ï¼‰
                            const prob100 = 1 - Math.pow(1 - probResult.probFromFiltered, 100);
                            
                            let probInfoHtml = `
                                <div style="margin-bottom: 5px;">
                                    <strong>ä¸­çè™Ÿç¢¼ï¼š</strong>${matchedDesc}ï¼ˆå…± ${totalMatched} å€‹ï¼‰
                                </div>
                                <div style="margin-bottom: 5px;">
                                    <strong>å¾ ${item.filteredNumbers.length} å€‹ä¸­é¸ 6 å€‹ï¼Œä¸­åˆ°ç¬¦åˆä¸­ççš„æ¦‚ç‡ï¼š</strong>
                                    <span style="color: ${isFilteredEasier ? '#28a745' : '#dc3545'}; font-weight: bold;">${(probResult.probFromFiltered * 100).toFixed(6)}%</span>
                                    <span style="color: #666; font-size: 12px;">(1/${Math.round(1 / probResult.probFromFiltered).toLocaleString()}æ¬¡)</span>
                                </div>
                                <div style="margin-bottom: 5px;">
                                    <strong>å¾ 49 å€‹ä¸­é¸ 6 å€‹ï¼Œä¸­åˆ°ç¬¦åˆä¸­ççš„æ¦‚ç‡ï¼š</strong>
                                    <span style="color: ${!isFilteredEasier ? '#28a745' : '#dc3545'}; font-weight: bold;">${(probResult.probFrom49 * 100).toFixed(6)}%</span>
                                    <span style="color: #666; font-size: 12px;">(1/${Math.round(1 / probResult.probFrom49).toLocaleString()}æ¬¡)</span>
                                </div>
                                <div style="margin-top: 8px; padding: 8px; background: #f0f0f0; border-radius: 4px; font-size: 12px; line-height: 1.6;">
                                    <div style="margin-bottom: 4px;"><strong>ğŸ“Š è¨ˆç®—èªªæ˜ï¼š</strong></div>
                                    <div style="margin-bottom: 3px;"><strong>å¾ ${item.filteredNumbers.length} å€‹ä¸­é¸ 6 å€‹ï¼š</strong></div>
                                    <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ æ°å¥½åŒ…å« ${matchedRegularNumbers.length} å€‹ç‰¹å®šè™Ÿç¢¼ï¼ˆ${matchedRegularNumbers.join(',')}ï¼‰${isExtraMatched ? ` + ç‰¹åˆ¥è™Ÿç¢¼${extraNumber}` : ''}</div>
                                    ${missingCount > 0 ? `<div style="margin-bottom: 3px; margin-left: 10px; color: #dc3545;">â€¢ âš ï¸ ç¼ºå°‘æ”ªå‡ºè™Ÿç¢¼ï¼š${missingRegularNumbers.join(',')}ï¼ˆå…±${missingCount}å€‹ä¸åœ¨ç¯©é¸è™Ÿç¢¼ä¸­ï¼‰</div>` : ''}
                                    ${isExtraMatched ? `
                                        <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ å…¬å¼ï¼šC(${matchedRegularNumbers.length}, ${matchedRegularNumbers.length}) Ã— C(${item.filteredNumbers.length - matchedRegularNumbers.length - 1}, ${5 - matchedRegularNumbers.length}) / C(${item.filteredNumbers.length}, 6)</div>
                                        <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ èªªæ˜ï¼šå¾${matchedRegularNumbers.length}å€‹åœ¨æ± ä¸­çš„æ”ªå‡ºè™Ÿç¢¼ä¸­é¸${matchedRegularNumbers.length}å€‹ï¼Œå¾å‰©é¤˜${item.filteredNumbers.length - matchedRegularNumbers.length - 1}å€‹ä¸­é¸${5 - matchedRegularNumbers.length}å€‹</div>
                                    ` : `
                                        <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ å…¬å¼ï¼šC(${matchedRegularNumbers.length}, ${matchedRegularNumbers.length}) Ã— C(${item.filteredNumbers.length - matchedRegularNumbers.length}, ${6 - matchedRegularNumbers.length}) / C(${item.filteredNumbers.length}, 6)</div>
                                        <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ èªªæ˜ï¼šå¾${matchedRegularNumbers.length}å€‹åœ¨æ± ä¸­çš„æ”ªå‡ºè™Ÿç¢¼ä¸­é¸${matchedRegularNumbers.length}å€‹ï¼Œå¾å‰©é¤˜${item.filteredNumbers.length - matchedRegularNumbers.length}å€‹ä¸­é¸${6 - matchedRegularNumbers.length}å€‹</div>
                                    `}
                                    <div style="margin-top: 6px; margin-bottom: 3px;"><strong>å¾ 49 å€‹ä¸­é¸ 6 å€‹ï¼š</strong></div>
                                    <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ æ°å¥½ä¸­ ${matchedRegularNumbers.length} å€‹æ”ªå‡ºè™Ÿç¢¼${isExtraMatched ? ` + ç‰¹åˆ¥è™Ÿç¢¼` : ''}ï¼ˆå¯å¾6å€‹æ”ªå‡ºè™Ÿç¢¼ä¸­ä»»é¸${matchedRegularNumbers.length}å€‹ï¼‰</div>
                                    ${isExtraMatched ? `
                                        <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ å…¬å¼ï¼šC(6, ${matchedRegularNumbers.length}) Ã— C(42, ${5 - matchedRegularNumbers.length}) / C(49, 6)</div>
                                        <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ èªªæ˜ï¼šæœ‰ C(6,${matchedRegularNumbers.length})=${combination(6, matchedRegularNumbers.length)} ç¨®æ–¹å¼é¸${matchedRegularNumbers.length}å€‹æ”ªå‡ºè™Ÿç¢¼ï¼Œå¾42å€‹å…¶ä»–è™Ÿç¢¼ä¸­é¸${5 - matchedRegularNumbers.length}å€‹</div>
                                    ` : `
                                        <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ å…¬å¼ï¼šC(6, ${matchedRegularNumbers.length}) Ã— C(42, ${6 - matchedRegularNumbers.length}) / C(49, 6)</div>
                                        <div style="margin-bottom: 3px; margin-left: 10px;">â€¢ èªªæ˜ï¼šæœ‰ C(6,${matchedRegularNumbers.length})=${combination(6, matchedRegularNumbers.length)} ç¨®æ–¹å¼é¸${matchedRegularNumbers.length}å€‹æ”ªå‡ºè™Ÿç¢¼ï¼Œå¾42å€‹å…¶ä»–è™Ÿç¢¼ä¸­é¸${6 - matchedRegularNumbers.length}å€‹</div>
                                    `}
                                    ${isFilteredEasier ? `
                                        <div style="margin-top: 6px; padding-top: 6px; border-top: 1px solid #ddd; color: #28a745;">
                                            <strong>ğŸ’¡ ç‚ºä»€éº¼å¾ ${item.filteredNumbers.length} å€‹ä¸­é¸çš„æ¦‚ç‡æ›´é«˜ï¼Ÿ</strong><br>
                                            å› ç‚ºç¯©é¸è™Ÿç¢¼æ± è¼ƒå°ï¼Œé¸ä¸­ç‰¹å®šè™Ÿç¢¼çš„æ©Ÿç‡æ›´é«˜ã€‚<br>
                                            ç¯©é¸è™Ÿç¢¼ä¸­åŒ…å«äº†å…¨éƒ¨${matchedRegularNumbers.length + (isExtraMatched ? 1 : 0)}å€‹ä¸­çè™Ÿç¢¼ã€‚
                                        </div>
                                    ` : `
                                        <div style="margin-top: 6px; padding-top: 6px; border-top: 1px solid #ddd; color: #dc3545;">
                                            <strong>âš ï¸ ç‚ºä»€éº¼å¾ ${item.filteredNumbers.length} å€‹ä¸­é¸çš„æ¦‚ç‡åè€Œæ›´ä½ï¼Ÿ</strong><br>
                                            å› ç‚ºç¯©é¸è™Ÿç¢¼ä¸­ç¼ºå°‘ ${missingCount} å€‹æ”ªå‡ºè™Ÿç¢¼ï¼ˆ${missingRegularNumbers.join(',')}ï¼‰ï¼<br>
                                            å¾49å€‹ä¸­é¸ï¼šæœ‰ C(6,${matchedRegularNumbers.length})=${combination(6, matchedRegularNumbers.length)} ç¨®æ–¹å¼ä¸­${matchedRegularNumbers.length}å€‹æ”ªå‡ºè™Ÿç¢¼<br>
                                            å¾${item.filteredNumbers.length}å€‹ä¸­é¸ï¼šåªæœ‰ C(${matchedRegularNumbers.length},${matchedRegularNumbers.length})=1 ç¨®æ–¹å¼ï¼ˆå› ç‚ºæ± ä¸­åªæœ‰é€™${matchedRegularNumbers.length}å€‹æ”ªå‡ºè™Ÿç¢¼ï¼‰
                                        </div>
                                    `}
                                    <div style="margin-top: 6px; padding-top: 6px; border-top: 1px solid #ddd;">
                                        <strong>ğŸ’¡ 100æ³¨èªªæ˜ï¼š</strong><br>
                                        è²·100æ³¨ï¼ˆæ¯æ³¨éƒ½æ˜¯å¾${item.filteredNumbers.length}å€‹ä¸­éš¨æ©Ÿé¸6å€‹ï¼‰ï¼Œ<br>
                                        <strong>è‡³å°‘ä¸­ä¸€æ³¨çš„æ¦‚ç‡ï¼š${(prob100 * 100).toFixed(2)}%</strong><br>
                                        <span style="color: #666; font-size: 11px;">ï¼ˆä¸æ˜¯ç°¡å–®çš„ ${(probResult.probFromFiltered * 100).toFixed(6)}% Ã— 100ï¼‰</span>
                                    </div>
                                </div>
                            `;
                            probabilityInfoDiv.innerHTML = probInfoHtml;
                        } else {
                            probabilityInfoDiv.innerHTML = '';
                        }
                    } else {
                        probabilityInfoDiv.innerHTML = '<span style="color: #999;">ç„¡ç¬¦åˆä¸­çè™Ÿç¢¼</span>';
                    }
                } else {
                    previousPeriodNumbersDiv.innerHTML = '<span style="color: #999;">ç„¡æ³•ç²å–ä¸Šä¸€æœŸæ•¸æ“š</span>';
                    probabilityInfoDiv.innerHTML = '';
                }
            }
            
            // æ›´æ–°ç¬¦åˆæ¢ä»¶çš„è™Ÿç¢¼
            const filteredNumbersDiv = document.getElementById('filtered-numbers');
            filteredNumbersDiv.innerHTML = item.filteredNumbers.map(num => 
                `<span style="display: inline-block; width: 35px; height: 35px; line-height: 35px; text-align: center; background: #667eea; color: white; border-radius: 50%; margin: 3px; font-weight: bold;">${num}</span>`
            ).join('');
            
            // æ›´æ–°éš¨æ©Ÿ 6 å€‹è™Ÿç¢¼
            const random6Div = document.getElementById('random-6-numbers');
            random6Div.innerHTML = item.random6.map(num => 
                `<span style="display: inline-block; width: 40px; height: 40px; line-height: 40px; text-align: center; background: #764ba2; color: white; border-radius: 50%; margin: 5px; font-weight: bold; font-size: 18px;">${num}</span>`
            ).join('');
            
            // æ»¾å‹•åˆ°çµæœå€åŸŸ
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // ç§»é™¤å–®ç­†æ­·å²è¨˜éŒ„
        function removeHistoryItem(index) {
            if (index < 0 || index >= filterHistory.length) {
                alert('ç„¡æ•ˆçš„è¨˜éŒ„ç´¢å¼•ï¼');
                return;
            }
            
            if (confirm('ç¢ºå®šè¦ç§»é™¤é€™ç­†ç¯©é¸æ­·å²è¨˜éŒ„å—ï¼Ÿ')) {
                filterHistory.splice(index, 1);
                updateFilterHistoryDisplay();
            }
        }

        // æ¸…é™¤æ­·å²è¨˜éŒ„
        function clearFilterHistory() {
            if (filterHistory.length === 0) {
                alert('ç›®å‰æ²’æœ‰æ­·å²è¨˜éŒ„ï¼');
                return;
            }
            
            if (confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰ç¯©é¸æ­·å²è¨˜éŒ„å—ï¼Ÿ')) {
                filterHistory = [];
                updateFilterHistoryDisplay();
            }
        }

        // ========================================
        // æ±Ÿæ©èºæ—‹å››æ–¹åœ–åŠŸèƒ½
        // ========================================

        // ç”Ÿæˆèºæ—‹çŸ©é™£ï¼ˆå¾ä¸­å¿ƒå‘å¤–é †æ™‚é‡æ—‹è½‰ï¼šå³â†’ä¸‹â†’å·¦â†’ä¸Šï¼‰
        function generateSpiralMatrix(size) {
            const matrix = Array.from({ length: size }, () => Array(size).fill(0));
            
            // å¾ä¸­å¿ƒé–‹å§‹
            const center = Math.floor(size / 2);
            let row = center;
            let col = center;
            let num = 1;
            
            matrix[row][col] = num++;
            
            // èºæ—‹æ–¹å‘ï¼šå³(0)â†’ä¸‹(1)â†’å·¦(2)â†’ä¸Š(3)
            // æ–¹å‘å‘é‡ï¼š[è¡Œè®ŠåŒ–, åˆ—è®ŠåŒ–]
            const directions = [
                [0, 1],   // å³
                [1, 0],   // ä¸‹
                [0, -1],  // å·¦
                [-1, 0]   // ä¸Š
            ];
            
            let steps = 1; // ç•¶å‰æ–¹å‘éœ€è¦èµ°çš„æ­¥æ•¸
            let dirIndex = 0; // ç•¶å‰æ–¹å‘ç´¢å¼•
            
            while (num <= size * size) {
                // æ¯å€‹æ–¹å‘èµ°å…©æ¬¡å¾Œï¼Œæ­¥æ•¸å¢åŠ 
                for (let i = 0; i < 2; i++) {
                    const [dr, dc] = directions[dirIndex];
                    
                    for (let step = 0; step < steps; step++) {
                        row += dr;
                        col += dc;
                        
                        if (row >= 0 && row < size && col >= 0 && col < size) {
                            matrix[row][col] = num++;
                        }
                        
                        if (num > size * size) break;
                    }
                    
                    if (num > size * size) break;
                    
                    // åˆ‡æ›åˆ°ä¸‹ä¸€å€‹æ–¹å‘
                    dirIndex = (dirIndex + 1) % 4;
                }
                
                // æ¯å®Œæˆå…©å€‹æ–¹å‘ï¼Œæ­¥æ•¸å¢åŠ 
                steps++;
            }
            
            return matrix;
        }

        // åˆå§‹åŒ–æ±Ÿæ©èºæ—‹å››æ–¹åœ–
        function initializeGannSquare() {
            const gridContainer = document.getElementById('gann-square-grid');
            const periodSelect = document.getElementById('gann-period-select');
            
            // ç”Ÿæˆ7x7èºæ—‹çŸ©é™£
            const matrix = generateSpiralMatrix(7);
            
            // å‰µå»ºç¶²æ ¼HTML
            let html = '<div class="gann-grid">';
            
            for (let i = 0; i < 7; i++) {
                for (let j = 0; j < 7; j++) {
                    const number = matrix[i][j];
                    
                    // æ ¼å¼åŒ–æ•¸å­—ç‚ºå…©ä½æ•¸
                    const displayNumber = number.toString().padStart(2, '0');
                    
                    html += `
                        <div class="gann-cell" data-number="${number}" title="è™Ÿç¢¼: ${displayNumber}">
                            ${displayNumber}
                        </div>
                    `;
                }
            }
            
            html += '</div>';
            gridContainer.innerHTML = html;
            
            // åˆå§‹åŒ–æœŸæ•¸é¸æ“‡å™¨
            initializeGannPeriodSelect();
        }

        // åˆå§‹åŒ–æœŸæ•¸é¸æ“‡å™¨
        function initializeGannPeriodSelect() {
            const periodSelect = document.getElementById('gann-period-select');
            
            if (!periodSelect || !lotteryData || lotteryData.length === 0) return;
            
            // æ¸…ç©ºç¾æœ‰é¸é …ï¼ˆä¿ç•™ç¬¬ä¸€å€‹é è¨­é¸é …ï¼‰
            periodSelect.innerHTML = '<option value="">è«‹é¸æ“‡æœŸæ•¸</option>';
            
            // å–æœ€è¿‘100æœŸï¼ˆæˆ–å…¨éƒ¨ï¼Œå¦‚æœå°‘æ–¼100æœŸï¼‰
            const periodsToShow = Math.min(100, lotteryData.length);
            
            for (let i = 0; i < periodsToShow; i++) {
                const data = lotteryData[i];
                const option = document.createElement('option');
                option.value = i;
                option.textContent = `ç¬¬ ${data.draw_number} æœŸ - ${data.draw_date}`;
                periodSelect.appendChild(option);
            }
        }

        // ç²å–æ•¸å­—åœ¨èºæ—‹çŸ©é™£ä¸­çš„ä½ç½®
        function getNumberPosition(number) {
            const matrix = generateSpiralMatrix(7);
            for (let i = 0; i < 7; i++) {
                for (let j = 0; j < 7; j++) {
                    if (matrix[i][j] === number) {
                        return { row: i, col: j };
                    }
                }
            }
            return null;
        }

        // æª¢æŸ¥ä¸Šä¸€æœŸçš„æ©«è¡Œæˆ–ç›´è¡Œé€£çºŒ2å€‹ä»¥ä¸Šæ•¸å­—
        function getConsecutiveRowColNumbers(previousNumbers) {
            const consecutiveNumbers = new Set();
            
            // ç²å–æ‰€æœ‰æ•¸å­—çš„ä½ç½®ï¼ˆåŒ…å«æ•¸å­—æœ¬èº«ï¼‰
            const numberPositions = [];
            previousNumbers.forEach(num => {
                const pos = getNumberPosition(num);
                if (pos !== null) {
                    numberPositions.push({ num, row: pos.row, col: pos.col });
                }
            });
            
            // æŒ‰è¡Œåˆ†çµ„
            const rowGroups = {};
            numberPositions.forEach(item => {
                if (!rowGroups[item.row]) {
                    rowGroups[item.row] = [];
                }
                rowGroups[item.row].push(item);
            });
            
            // æª¢æŸ¥æ¯è¡Œæ˜¯å¦æœ‰é€£çºŒ2å€‹ä»¥ä¸Šæ•¸å­—ï¼ˆç›¸é„°æˆ–æ¥è¿‘ï¼‰
            Object.keys(rowGroups).forEach(row => {
                const rowNums = rowGroups[row].sort((a, b) => a.col - b.col);
                if (rowNums.length >= 2) {
                    // æª¢æŸ¥æ˜¯å¦åœ¨åŒä¸€è¡Œä¸”é€£çºŒæˆ–æ¥è¿‘ï¼ˆåˆ—å·®<=1ï¼‰
                    for (let i = 0; i < rowNums.length - 1; i++) {
                        if (Math.abs(rowNums[i].col - rowNums[i + 1].col) <= 1) {
                            consecutiveNumbers.add(rowNums[i].num);
                            consecutiveNumbers.add(rowNums[i + 1].num);
                        }
                    }
                }
            });
            
            // æŒ‰åˆ—åˆ†çµ„
            const colGroups = {};
            numberPositions.forEach(item => {
                if (!colGroups[item.col]) {
                    colGroups[item.col] = [];
                }
                colGroups[item.col].push(item);
            });
            
            // æª¢æŸ¥æ¯åˆ—æ˜¯å¦æœ‰é€£çºŒ2å€‹ä»¥ä¸Šæ•¸å­—ï¼ˆç›¸é„°æˆ–æ¥è¿‘ï¼‰
            Object.keys(colGroups).forEach(col => {
                const colNums = colGroups[col].sort((a, b) => a.row - b.row);
                if (colNums.length >= 2) {
                    // æª¢æŸ¥æ˜¯å¦åœ¨åŒä¸€åˆ—ä¸”é€£çºŒæˆ–æ¥è¿‘ï¼ˆè¡Œå·®<=1ï¼‰
                    for (let i = 0; i < colNums.length - 1; i++) {
                        if (Math.abs(colNums[i].row - colNums[i + 1].row) <= 1) {
                            consecutiveNumbers.add(colNums[i].num);
                            consecutiveNumbers.add(colNums[i + 1].num);
                        }
                    }
                }
            });
            
            return Array.from(consecutiveNumbers);
        }

        // æ›´æ–°æ±Ÿæ©åœ–é«˜äº®é¡¯ç¤º
        function updateGannSquareHighlight() {
            const periodSelect = document.getElementById('gann-period-select');
            const selectedInfo = document.getElementById('gann-selected-info');
            const selectedNumbersDiv = document.getElementById('gann-selected-numbers');
            
            // ç§»é™¤æ‰€æœ‰ç¾æœ‰çš„é«˜äº®å’Œæ¨£å¼
            document.querySelectorAll('.gann-cell').forEach(cell => {
                cell.classList.remove('highlight', 'previous-period', 'consecutive-row-col');
                cell.style.color = '';
                cell.style.background = '';
            });
            
            const selectedIndex = periodSelect.value;
            
            if (selectedIndex === '') {
                // æœªé¸æ“‡æœŸæ•¸ï¼Œéš±è—è³‡è¨Šå€
                selectedInfo.style.display = 'none';
                return;
            }
            
            // ç²å–é¸ä¸­æœŸæ•¸çš„é–‹çæ•¸æ“š
            const drawData = lotteryData[parseInt(selectedIndex)];
            
            if (!drawData) return;
            
            // ç²å–è©²æœŸçš„æ‰€æœ‰è™Ÿç¢¼ï¼ˆåŒ…å«ç‰¹åˆ¥è™Ÿï¼‰
            const currentNumbers = [...drawData.numbers, drawData.extra_number];
            
            // ç²å–ä¸Šä¸€æœŸçš„æ•¸æ“šï¼ˆå¦‚æœå­˜åœ¨ï¼‰
            let previousNumbers = [];
            let consecutiveNumbers = [];
            const previousIndex = parseInt(selectedIndex) + 1;
            if (previousIndex < lotteryData.length) {
                const previousData = lotteryData[previousIndex];
                previousNumbers = [...previousData.numbers, previousData.extra_number];
                consecutiveNumbers = getConsecutiveRowColNumbers(previousNumbers);
            }
            
            // å®šç¾©é¡è‰²æ–¹æ¡ˆ - è¨­è¨ˆæ˜é¡¯å°æ¯”è‰²
            // é¡è‰²1ï¼šç•¶æœŸæ•¸å­— - ä½¿ç”¨äº®ç¶ è‰²/é’è‰²ï¼Œåœ¨æ·±è‰²èƒŒæ™¯ä¸Šéå¸¸æ˜é¡¯
            const color1Bg = 'linear-gradient(135deg, #00d4ff 0%, #00ff88 100%)';
            // é¡è‰²2ï¼šä¸Šä¸€æœŸæ•¸å­— - ä½¿ç”¨äº®æ©™è‰²/é»ƒè‰²ï¼Œèˆ‡ç•¶æœŸå€åˆ†
            const color2Bg = 'linear-gradient(135deg, #ff9500 0%, #ffcc00 100%)';
            // é¡è‰²3ï¼šä¸Šä¸€æœŸçš„æ©«è¡Œæˆ–ç›´è¡Œé€£çºŒ2å€‹ä»¥ä¸Šæ•¸å­— - ä½¿ç”¨é®®æ˜çš„ç´…è‰²/ç²‰ç´…è‰²èƒŒæ™¯
            const color3Bg = 'linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%)';
            
            // å…ˆè™•ç†ä¸Šä¸€æœŸçš„æ©«è¡Œæˆ–ç›´è¡Œé€£çºŒ2å€‹ä»¥ä¸Šæ•¸å­—ï¼ˆé¡è‰²3ï¼šèƒŒæ™¯é¡è‰²ï¼‰- å„ªå…ˆç´šæœ€é«˜
            consecutiveNumbers.forEach(num => {
                const cell = document.querySelector(`.gann-cell[data-number="${num}"]`);
                if (cell) {
                    cell.style.background = color3Bg;
                    cell.style.color = 'white';
                    cell.style.fontWeight = 'bold';
                    cell.style.boxShadow = '0 0 10px rgba(255, 65, 108, 0.8)';
                    cell.classList.add('consecutive-row-col');
                }
            });
            
            // é«˜äº®é¡¯ç¤ºä¸Šä¸€æœŸè™Ÿç¢¼ï¼ˆé¡è‰²2ï¼šèƒŒæ™¯é¡è‰²ï¼‰- å¦‚æœä¸åœ¨é€£çºŒæ•¸å­—ä¸­
            previousNumbers.forEach(num => {
                const cell = document.querySelector(`.gann-cell[data-number="${num}"]`);
                if (cell && !currentNumbers.includes(num) && !consecutiveNumbers.includes(num)) {
                    // å¦‚æœè©²è™Ÿç¢¼ä¸åœ¨ç•¶æœŸä¸­ä¸”ä¸åœ¨é€£çºŒæ•¸å­—ä¸­ï¼Œæ‰æ‡‰ç”¨ä¸Šä¸€æœŸæ¨£å¼
                    cell.style.background = color2Bg;
                    cell.style.color = '#333';
                    cell.style.fontWeight = 'bold';
                    cell.style.boxShadow = '0 0 8px rgba(255, 149, 0, 0.6)';
                    cell.classList.add('previous-period');
                }
            });
            
            // é«˜äº®é¡¯ç¤ºç•¶æœŸè™Ÿç¢¼ï¼ˆé¡è‰²1ï¼šèƒŒæ™¯é¡è‰²ï¼‰- æœ€å¾Œè™•ç†ï¼Œå„ªå…ˆé¡¯ç¤ºç•¶æœŸ
            currentNumbers.forEach(num => {
                const cell = document.querySelector(`.gann-cell[data-number="${num}"]`);
                if (cell) {
                    // ç•¶æœŸè™Ÿç¢¼è¦†è“‹ä¸Šä¸€æœŸæ¨£å¼
                    cell.style.background = color1Bg;
                    cell.style.color = '#333';
                    cell.style.fontWeight = 'bold';
                    cell.style.boxShadow = '0 0 10px rgba(0, 212, 255, 0.8)';
                    cell.classList.remove('previous-period', 'consecutive-row-col');
                }
            });
            
            // é¡¯ç¤ºé–‹çè™Ÿç¢¼è³‡è¨Š
            selectedInfo.style.display = 'block';
            
            // é¡¯ç¤ºè™Ÿç¢¼çƒ
            let numbersHtml = '';
            drawData.numbers.forEach(num => {
                numbersHtml += `<span style="display: inline-block; width: 32px; height: 32px; line-height: 32px; text-align: center; background: white; color: #667eea; border-radius: 50%; font-weight: bold; font-size: 14px;">${num}</span>`;
            });
            numbersHtml += `<span style="display: inline-block; width: 32px; height: 32px; line-height: 32px; text-align: center; background: #ffd700; color: #333; border-radius: 50%; font-weight: bold; font-size: 14px; border: 2px solid white;">${drawData.extra_number}</span>`;
            
            selectedNumbersDiv.innerHTML = numbersHtml;
        }

    </script>
</body>
</html> 